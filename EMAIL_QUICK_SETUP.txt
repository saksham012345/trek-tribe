╔═══════════════════════════════════════════════════════════════╗
║          📧 EMAIL NOTIFICATIONS - QUICK SETUP GUIDE           ║
╚═══════════════════════════════════════════════════════════════╝

CURRENT STATUS:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ Email Service: Fully implemented
✅ Email Templates: Beautiful HTML templates ready
✅ Integration: Added to booking & payment flows
⚠️  Configuration: NOT SET - Needs Gmail credentials


WHAT I NEED FROM YOU:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Just TWO things:

1. Gmail Address:  _______________________________

2. App Password:   _______________________________
                   (16 characters, get from Google Account)


HOW TO GET GMAIL APP PASSWORD:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Step 1: Visit https://myaccount.google.com/security

Step 2: Click "2-Step Verification"
        → Enable if not already enabled

Step 3: Scroll down to "App passwords"
        → Click "App passwords"

Step 4: Generate password:
        App: Mail
        Device: Other (Custom name)
        Name: "Trek Tribe Notifications"

Step 5: Click "Generate"

Step 6: Copy password:
        Example: "abcd efgh ijkl mnop"
        Remove spaces: "abcdefghijklmnop"

Step 7: Save it! You'll need to paste this on Render


CONFIGURE ON RENDER (30 seconds):
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. Go to: https://dashboard.render.com

2. Select service: trek-tribe-38in

3. Click "Environment" tab

4. Add variables:
   ┌────────────────────────────────────────────────────┐
   │ GMAIL_USER                                         │
   │ your-email@gmail.com                               │
   └────────────────────────────────────────────────────┘

   ┌────────────────────────────────────────────────────┐
   │ GMAIL_APP_PASSWORD                                 │
   │ abcdefghijklmnop                                   │
   └────────────────────────────────────────────────────┘

5. Click "Save Changes"

6. Service auto-restarts (wait 2 minutes)


DEPLOY CODE CHANGES:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

git add services/api/src/routes/bookings.ts
git add services/api/src/routes/organizer.ts

git commit -m "feat: Add email notifications for bookings and payments"

git push origin main


VERIFY IT WORKS:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Step 1: Check Render Logs
────────────────────────────────────────────────────────────────
After service restarts, look for:

✅ Email service initialized successfully with Gmail SMTP

If you see:
⚠️  Gmail credentials not configured
→ Environment variables not set correctly


Step 2: Test by Creating Booking
────────────────────────────────────────────────────────────────
1. Visit: https://www.trektribe.in
2. Join any trip
3. Complete booking
4. Check backend logs for:
   📧 Booking confirmation email sent { bookingId: '...' }
5. Check your Gmail inbox
6. Should receive: "🎯 Booking Confirmed - [Trip Title]"


Step 3: Test Payment Verification
────────────────────────────────────────────────────────────────
1. As organizer, verify a payment
2. Backend logs should show:
   📧 Payment verification email sent
3. User receives final confirmation email


WHAT EMAILS LOOK LIKE:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Beautiful HTML emails with:
✅ Trek Tribe branding (green colors)
✅ Trip details beautifully formatted
✅ Booking ID prominently displayed
✅ Organizer contact information
✅ Important reminders and next steps
✅ Mobile-responsive design
✅ Professional footer


WHEN EMAILS ARE SENT:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Event 1: User Creates Booking
→ Sends: Booking confirmation
→ To: User
→ CC: Organizer
→ Content: Booking details, pending payment status

Event 2: Organizer Verifies Payment
→ Sends: Payment verified confirmation
→ To: User
→ CC: Organizer
→ Content: Final confirmation, trip is confirmed

Event 3: User Resets Password
→ Sends: Password reset link
→ To: User
→ Content: Secure link with 1-hour expiration


SECURITY:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ App password is NOT your Gmail password
✅ Can be revoked anytime
✅ Limited to email sending only
✅ Stored securely on Render (not in code)
✅ Not exposed to frontend
✅ TLS encryption enabled


RECOMMENDED GMAIL ACCOUNT:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Option 1 (Best Practice): Create Dedicated Account
────────────────────────────────────────────────────────────────
Email: trektribe.notifications@gmail.com
       trek.tribe.bookings@gmail.com
       notifications@trektribe.com (if you have domain)

Benefits:
• Professional sender name
• Separate from personal email
• Better deliverability
• Easier to manage

Option 2: Use Personal Gmail
────────────────────────────────────────────────────────────────
Your existing Gmail account
Benefits:
• Quick setup
• Works immediately
• Good for testing


AFTER SETUP BENEFITS:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ Users receive instant booking confirmations
✅ Organizers get notified of new bookings
✅ Professional email communications
✅ Booking IDs sent for reference
✅ Password reset functionality works
✅ Future: Trip updates, reminders, etc.
✅ Better user trust and experience


TROUBLESHOOTING:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Problem: "Gmail credentials not configured"
Solution: 
  → Set GMAIL_USER and GMAIL_APP_PASSWORD on Render
  → Restart service
  → Check logs for success message

Problem: "Failed to send email"
Solution:
  → Verify app password is correct (16 chars, no spaces)
  → Ensure 2FA enabled on Gmail
  → Check Gmail account is active
  → Try regenerating app password

Problem: Not receiving emails
Solution:
  → Check spam/junk folder
  → Verify email address is correct
  → Check backend logs for "email sent" message
  → Test email service status endpoint


═══════════════════════════════════════════════════════════════

TO ENABLE EMAIL NOTIFICATIONS:

1. Get Gmail app password (5 minutes)
2. Set on Render environment (30 seconds)
3. Deploy backend changes (git push)
4. Test by creating a booking
5. Check email! ✅

═══════════════════════════════════════════════════════════════

Ready to set this up? Just provide:
• Gmail email address
• Gmail app password

I'll verify the configuration works! 📧✨

