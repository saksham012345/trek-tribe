[
  {
    "source": "README.md",
    "text": "# Trek Tribe\n\nA comprehensive travel platform that connects travelers for group trips and adventures with advanced features including WhatsApp integration, AI support, and professional-grade booking management.\n\n## üåü Core Features\n\n### Authentication & User Management\n- **Multi-role Authentication**: Register as traveler, organizer, or admin\n- **Secure JWT Authentication**: Password reset, email verification\n- **Enhanced User Profiles**: Profile pictures, verification documents, bio, interests\n- **Public Profile Pages**: Sharable user profiles with trip history\n\n### Trip Management\n- **Trip Creation & Management**: Create detailed trips with images, itineraries\n- **Advanced Trip Discovery**: Search by destination, price, category, dates\n- **Smart Trip Joining**: Automatic spot management and waiting lists\n- **Trip Reviews & Ratings**: User feedback system with moderation\n\n### Group Booking System\n- **Group Booking Creation**: Organizers can create group bookings with participant manage"
  },
  {
    "source": "README.md",
    "text": "ment\n- **Participant Management**: Add/remove participants, track booking status\n- **Booking Updates**: Modify dates, participants, and booking details\n- **Booking Cancellation**: Full cancellation support with status tracking\n\n### File Upload & Media Management\n- **Profile Pictures**: User avatar uploads with Firebase storage\n- **Trip Images**: Multiple image uploads for trip galleries\n- **Document Verification**: Upload verification documents for enhanced trust\n- **QR Code Generation**: Generate QR codes for trips and bookings\n\n### Communication & Support\n- **WhatsApp Integration**: Automated trip notifications and confirmations\n- **Real-time Chat**: Socket.io powered messaging system\n- **AI Chat Support**: OpenAI-powered customer support chatbot\n- **Telegram Integration**: Alternative messaging platform support\n\n### Admin & Moderation\n- **Admin Dashboard**: Comprehensive admin panel for platform management\n- **Review Moderation**: Approve, reject, flag, and manage user reviews\n- **U"
  },
  {
    "source": "README.md",
    "text": "ser Management**: Admin tools for user verification and management\n- **Trip Oversight**: Monitor and manage all platform trips\n- **Bulk Operations**: Efficient bulk actions for administrative tasks\n\n### Advanced Features\n- **Review Verification System**: Multi-stage review approval process\n- **Real-time Notifications**: Live updates via WebSocket connections\n- **Health Monitoring**: Built-in health check endpoints\n- **CLI Administration**: Command-line tools for database management\n\n### Enterprise CRM System\n- **Lead Management**: Track and score potential customers\n- **Support Ticketing**: Full-featured support ticket system\n- **Analytics Dashboard**: Comprehensive business insights\n- **Trip Verification**: Admin workflow for trip approval\n- **Real-time Chat**: Socket.io powered support chat\n\n### Organizer Subscriptions (Razorpay)\n- **2-Month Free Trial**: New organizers get 60 days free\n- **4 Subscription Tiers**: From ‚Çπ1,499 (5 trips) to ‚Çπ9,999 (50 trips)\n- **Automated Reminders**:"
  },
  {
    "source": "README.md",
    "text": "Email notifications 7 days and 1 day before trial expiry\n- **Secure Payments**: Razorpay integration with signature verification\n- **Auto-notification System**: Daily cron job checks trial status\n\n## üõ† Tech Stack\n\n### Frontend\n- **React 18+**: Modern React with TypeScript\n- **Tailwind CSS**: Utility-first CSS framework\n- **Socket.io Client**: Real-time communication\n- **React Router**: Client-side routing\n\n### Backend\n- **Node.js & Express**: TypeScript-based REST API\n- **MongoDB & Mongoose**: Document database with ODM\n- **Socket.io**: Real-time WebSocket communication\n- **JWT Authentication**: Secure token-based auth\n- **Firebase Storage**: Cloud file storage\n- **OpenAI API**: AI-powered chat support\n\n### Communication\n- **WhatsApp Web.js**: WhatsApp integration\n- **Telegram Bot API**: Telegram messaging\n- **Nodemailer**: Email notifications\n\n### DevOps & Tools\n- **Docker & Docker Compose**: Containerization\n- **TypeScript**: Type safety across the stack\n- **Zod**: Runtime type valid"
  },
  {
    "source": "README.md",
    "text": "ation\n- **Helmet**: Security middleware\n- **CORS**: Cross-origin resource sharing\n\n## ‚öôÔ∏è Available Scripts\n\n### Docker Operations\n- `npm run dev` - Start all services with Docker Compose\n- `npm run build` - Build all Docker images\n- `npm run stop` - Stop all running services\n- `npm run clean` - Stop services and remove volumes\n\n### Development\n- `npm run dev:api` - Start API in development mode (with hot reload)\n- `npm run dev:web` - Start React web app in development mode\n- `npm run install:all` - Install dependencies for all services\n\n### API-Specific Scripts\n- `npm run build` - Build TypeScript to JavaScript\n- `npm run start` - Start production API server\n- `npm run cleanup:trips` - Clean up test/demo trips\n- `npm run setup:db` - Initialize database with default data\n\n## üöÄ Quick Start\n\n### Prerequisites\n- Docker and Docker Compose\n- Node.js 20+ (for local development)\n\n### Running with Docker (Recommended)\n\n1. Clone the repository\n2. Run the application:\n   ```bash\n   npm run dev"
  },
  {
    "source": "README.md",
    "text": "```\n\n3. Access the application:\n   - **Web App**: http://localhost:3000\n   - **API**: http://localhost:4000\n   - **MongoDB**: localhost:27017\n\n### Local Development\n\n1. Install dependencies:\n   ```bash\n   npm run install:all\n   ```\n\n2. Start MongoDB (via Docker):\n   ```bash\n   docker run -d -p 27017:27017 --name trekk-mongo mongo:6\n   ```\n\n3. Start the API:\n   ```bash\n   npm run dev:api\n   ```\n\n4. Start the web app (in another terminal):\n   ```bash\n   npm run dev:web\n   ```\n\n## üì° API Endpoints\n\n### Authentication\n- `POST /auth/register` - Register a new user\n- `POST /auth/login` - Login user\n- `GET /auth/me` - Get current user info\n- `POST /auth/forgot-password` - Request password reset\n- `POST /auth/reset-password` - Reset password with token\n\n### Trips\n- `GET /trips` - Get all trips (with search/filter)\n- `POST /trips` - Create a new trip (organizers only)\n- `GET /trips/:id` - Get trip by ID\n- `POST /trips/:id/join` - Join a trip\n- `DELETE /trips/:id/leave` - Leave a trip\n- `POST /t"
  },
  {
    "source": "README.md",
    "text": "rips/:id/reviews` - Add trip review\n\n### User Profiles\n- `GET /users/profile` - Get user profile\n- `PUT /users/profile` - Update user profile\n- `GET /users/:id/public` - Get public user profile\n- `POST /upload/profile-picture` - Upload profile picture\n\n### Group Bookings\n- `POST /group-bookings` - Create group booking\n- `GET /group-bookings` - Get user's group bookings\n- `GET /group-bookings/:id` - Get specific group booking\n- `PUT /group-bookings/:id` - Update group booking\n- `DELETE /group-bookings/:id` - Cancel group booking\n- `POST /group-bookings/:id/participants` - Add participant\n- `DELETE /group-bookings/:id/participants/:participantId` - Remove participant\n\n### File Upload\n- `POST /upload/profile-picture` - Upload profile picture\n- `POST /upload/trip-images` - Upload trip images\n- `POST /upload/verification-document` - Upload verification document\n- `POST /upload/generate-qr` - Generate QR code\n\n### Admin (Protected)\n- `GET /admin/stats` - Get platform statistics\n- `GET /admin"
  },
  {
    "source": "README.md",
    "text": "/reviews/pending` - Get pending reviews\n- `POST /admin/reviews/:id/approve` - Approve review\n- `POST /admin/reviews/:id/reject` - Reject review\n- `POST /admin/reviews/:id/flag` - Flag review\n- `POST /admin/reviews/bulk-action` - Bulk review actions\n\n### Communication\n- `POST /chat-support` - AI chat support\n- `WebSocket /socket.io` - Real-time messaging\n\n### Health & Monitoring\n- `GET /health` - Health check endpoint\n\n## üìÅ Project Structure\n\n```\n‚îú‚îÄ‚îÄ services/\n‚îÇ   ‚îî‚îÄ‚îÄ api/                    # Node.js TypeScript API\n‚îÇ       ‚îú‚îÄ‚îÄ src/\n‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ middleware/     # Auth, admin, validation middleware\n‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ models/         # MongoDB/Mongoose models\n‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ routes/         # API route handlers\n‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ services/       # WhatsApp, AI, Firebase, Socket services\n‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ utils/          # Utility functions\n‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ cli/            # Command-line administration tools\n‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ scripts/        # Database and maintenance scripts\n‚îÇ       ‚îú‚îÄ‚îÄ healthche"
  },
  {
    "source": "README.md",
    "text": "ck.js      # Container health monitoring\n‚îÇ       ‚îî‚îÄ‚îÄ package.json        # API dependencies\n‚îú‚îÄ‚îÄ web/                        # React TypeScript frontend\n‚îÇ   ‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/         # Reusable React components\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/              # Page components\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/           # Frontend API services\n‚îÇ   ‚îî‚îÄ‚îÄ package.json            # Frontend dependencies\n‚îú‚îÄ‚îÄ frontend/                   # Additional frontend variant\n‚îú‚îÄ‚îÄ docker-compose.yml          # Multi-service orchestration\n‚îú‚îÄ‚îÄ nginx.conf                  # Reverse proxy configuration\n‚îú‚îÄ‚îÄ .env.example                # Environment variables template\n‚îî‚îÄ‚îÄ package.json                # Root package.json with scripts\n```\n\n## üöÄ Environment Setup\n\n### Quick Setup\n\n1. **Copy environment templates**:\n   ```bash\n   # Root environment (for Docker)\n   cp .env.example .env\n   \n   # Frontend environment\n   cp web/.env.example web/.env\n   ```\n\n2. **Configure essential variables** in `.env`:\n   ```bash\n   # Generate a s"
  },
  {
    "source": "README.md",
    "text": "ecure JWT secret (32+ characters)\n   JWT_SECRET=$(openssl rand -hex 32)\n   \n   # MongoDB connection (Docker default)\n   MONGODB_URI=mongodb://mongo:27017/trekktribe\n   \n   # Frontend URL\n   FRONTEND_URL=http://localhost:3000\n   ```\n\n3. **Configure frontend** in `web/.env`:\n   ```bash\n   # API endpoint\n   REACT_APP_API_URL=http://localhost:4000\n   ```\n\n### Advanced Configuration\n\n#### Authentication & Security\n```bash\n# JWT Configuration (REQUIRED)\nJWT_SECRET=your-secure-32-character-secret-key-here\nJWT_EXPIRES_IN=7d\n\n# Google OAuth (Optional)\nGOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com\nGOOGLE_CLIENT_SECRET=your-google-client-secret\n```\n\n#### Database\n```bash\n# Local MongoDB (Docker)\nMONGODB_URI=mongodb://mongo:27017/trekktribe\n\n# Local MongoDB (Direct)\nMONGODB_URI_LOCAL=mongodb://127.0.0.1:27017/trekktribe\n\n# MongoDB Atlas (Production)\nMONGODB_URI=mongodb+srv://user:pass@cluster.mongodb.net/trekktribe\n```\n\n#### Email Service (Optional)\n```bash\n# Gmail SMTP\nGMAIL_U"
  },
  {
    "source": "README.md",
    "text": "SER=your-email@gmail.com\nGMAIL_APP_PASSWORD=your-16-character-app-password\nEMAIL_ENABLED=true\n```\n\n#### WhatsApp Integration (Optional)\n```bash\nWHATSAPP_ENABLED=true\nDEFAULT_COUNTRY_CODE=91\nWHATSAPP_SESSION_NAME=trek-tribe-bot\n```\n\n#### Frontend Configuration\n```bash\n# API Configuration (REQUIRED)\nREACT_APP_API_URL=http://localhost:4000\nREACT_APP_SOCKET_URL=http://localhost:4000\n\n# Google OAuth (Optional)\nREACT_APP_GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com\n\n# Feature Flags\nREACT_APP_ENABLE_REAL_TIME_CHAT=true\nREACT_APP_ENABLE_AI_SUPPORT=true\nREACT_APP_ENABLE_QR_PAYMENTS=true\n```\n\n### Environment Variables Guide\n\nüìñ **Detailed Documentation**: See [`docs/ENV.md`](docs/ENV.md) for complete environment variable reference\n\nüöÄ **Deployment Guide**: See [`docs/DEPLOYMENT.md`](docs/DEPLOYMENT.md) for production deployment instructions\n\n### Secure Secret Generation\n\n```bash\n# Generate JWT secret (Unix/Mac)\nopenssl rand -hex 32\n\n# Generate JWT secret (Node.js)\nnode -e \"con"
  },
  {
    "source": "README.md",
    "text": "sole.log(require('crypto').randomBytes(32).toString('hex'))\"\n\n# Online generator\n# Visit: https://generate-secret.vercel.app/32\n```\n\n### Using process.env Safely\n\n```typescript\n// ‚úÖ Good: Validate required environment variables\nconst { MONGODB_URI, JWT_SECRET } = process.env;\n\nif (!MONGODB_URI) {\n  throw new Error('MONGODB_URI environment variable is required');\n}\n\nif (!JWT_SECRET || JWT_SECRET.length < 32) {\n  throw new Error('JWT_SECRET must be at least 32 characters long');\n}\n\n// ‚úÖ Good: Provide fallback values for optional variables\nconst PORT = parseInt(process.env.PORT || '4000', 10);\nconst NODE_ENV = process.env.NODE_ENV || 'development';\n\n// ‚úÖ Good: Type-safe environment variable access\ninterface EnvConfig {\n  mongoUri: string;\n  jwtSecret: string;\n  port: number;\n  nodeEnv: 'development' | 'production' | 'test';\n}\n\nfunction getConfig(): EnvConfig {\n  return {\n    mongoUri: process.env.MONGODB_URI!,\n    jwtSecret: process.env.JWT_SECRET!,\n    port: parseInt(process.env.PORT ||"
  },
  {
    "source": "README.md",
    "text": "'4000', 10),\n    nodeEnv: (process.env.NODE_ENV as any) || 'development',\n  };\n}\n```\n\n### Environment Validation\n\nThe application validates critical environment variables on startup:\n\n```typescript\n// Example validation in services/api/src/index.ts\nfunction validateEnvironment() {\n  const required = ['MONGODB_URI', 'JWT_SECRET'];\n  const missing = required.filter(key => !process.env[key]);\n  \n  if (missing.length > 0) {\n    console.error('‚ùå Missing required environment variables:');\n    missing.forEach(key => console.error(`   - ${key}`));\n    process.exit(1);\n  }\n  \n  console.log('‚úÖ Environment variables validated successfully');\n}\n```\n\n## üîß CLI Administration Tools\n\nThe project includes comprehensive CLI tools for administration:\n\n```bash\n# Navigate to API directory\ncd services/api\n\n# General help\nnpm run cli:help\n\n# Platform statistics\nnpm run cli:stats\n\n# User management\nnpm run cli:user:list\n\n# Trip management\nnpm run cli:trip:list\n\n# Database backup\nnpm run cli:backup\n\n# System c"
  },
  {
    "source": "README.md",
    "text": "leanup\nnpm run cli:cleanup\n\n# View system logs\nnpm run cli:logs\n\n# Database setup\nnpm run setup:db\n```\n\n## üìä Monitoring & Health Checks\n\n- **API Health**: `GET /health`\n- **Database Status**: Included in health check\n- **WhatsApp Connection**: Real-time status monitoring\n- **Socket.io Status**: Connection health tracking\n\n## üîê Security Features\n\n- **Helmet.js**: Security headers\n- **CORS Configuration**: Controlled cross-origin access\n- **JWT Token Validation**: Secure authentication\n- **Input Validation**: Zod schema validation\n- **File Upload Security**: Type and size restrictions\n- **Admin Route Protection**: Role-based access control"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "# Trek Tribe API Documentation\n\n## üåê Base URL\n- **Development**: `http://localhost:4000`\n- **Production**: `https://your-api-domain.com`\n\n## üîê Authentication\nAll protected endpoints require a JWT token in the Authorization header:\n```\nAuthorization: Bearer <your-jwt-token>\n```\n\n---\n\n## üîë Authentication Endpoints\n\n### POST /auth/register\nRegister a new user account.\n\n**Request Body:**\n```json\n{\n  \"email\": \"user@example.com\",\n  \"password\": \"SecurePassword123\",\n  \"name\": \"John Doe\",\n  \"role\": \"traveler\" // optional: \"traveler\" | \"organizer\"\n}\n```\n\n**Response (201):**\n```json\n{\n  \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n}\n```\n\n**Errors:**\n- `400` - Validation error (invalid email/password)\n- `409` - Email already in use\n\n### POST /auth/login\nAuthenticate user and receive JWT token.\n\n**Request Body:**\n```json\n{\n  \"email\": \"user@example.com\", \n  \"password\": \"SecurePassword123\"\n}\n```\n\n**Response (200):**\n```json\n{\n  \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n}\n```\n\n**Errors:"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "**\n- `400` - Validation error\n- `401` - Invalid credentials\n\n### GET /auth/me\nGet current user profile information.\n\n**Headers:** `Authorization: Bearer <token>`\n\n**Response (200):**\n```json\n{\n  \"user\": {\n    \"id\": \"647abc123def456789\",\n    \"email\": \"user@example.com\",\n    \"name\": \"John Doe\",\n    \"role\": \"traveler\",\n    \"phone\": \"+1234567890\",\n    \"bio\": \"Adventure enthusiast\",\n    \"profilePhoto\": \"https://example.com/photo.jpg\",\n    \"createdAt\": \"2024-01-01T00:00:00.000Z\"\n  }\n}\n```\n\n### POST /auth/forgot-password\nRequest password reset email.\n\n**Request Body:**\n```json\n{\n  \"email\": \"user@example.com\"\n}\n```\n\n**Response (200):**\n```json\n{\n  \"message\": \"If an account with that email exists, a password reset link has been sent.\"\n}\n```\n\n### POST /auth/reset-password\nReset password using token from email.\n\n**Request Body:**\n```json\n{\n  \"email\": \"user@example.com\",\n  \"token\": \"reset-token-from-email\",\n  \"newPassword\": \"NewSecurePassword123\"\n}\n```\n\n**Response (200):**\n```json\n{\n  \"message\": \""
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "Password reset successful. You can now log in with your new password.\"\n}\n```\n\n---\n\n## üó∫Ô∏è Trip Endpoints\n\n### GET /trips\nGet all trips with optional filtering.\n\n**Query Parameters:**\n- `q` - Text search (title, description, destination)\n- `category` - Filter by category\n- `minPrice` - Minimum price filter\n- `maxPrice` - Maximum price filter  \n- `dest` - Destination filter\n- `from` - Start date filter (YYYY-MM-DD)\n- `to` - End date filter (YYYY-MM-DD)\n\n**Example:** `/trips?q=himalaya&category=trekking&minPrice=1000&maxPrice=5000`\n\n**Response (200):**\n```json\n[\n  {\n    \"_id\": \"647abc123def456789\",\n    \"organizerId\": \"647abc123def456788\",\n    \"title\": \"Himalayan Adventure Trek\",\n    \"description\": \"Experience the breathtaking beauty of the Himalayas...\",\n    \"categories\": [\"trekking\", \"adventure\", \"mountains\"],\n    \"destination\": \"Nepal\",\n    \"location\": {\n      \"type\": \"Point\",\n      \"coordinates\": [85.3240, 27.7172]\n    },\n    \"schedule\": [\n      {\n        \"day\": 1,\n        \"title\": \"Arr"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "ival in Kathmandu\",\n        \"activities\": [\"Airport pickup\", \"Hotel check-in\", \"Welcome dinner\"]\n      }\n    ],\n    \"images\": [\"image1.jpg\", \"image2.jpg\"],\n    \"coverImage\": \"cover.jpg\",\n    \"capacity\": 15,\n    \"price\": 2500,\n    \"startDate\": \"2024-03-15T00:00:00.000Z\",\n    \"endDate\": \"2024-03-25T00:00:00.000Z\",\n    \"participants\": [\"user-id-1\", \"user-id-2\"],\n    \"status\": \"active\",\n    \"createdAt\": \"2024-01-01T00:00:00.000Z\"\n  }\n]\n```\n\n### POST /trips\nCreate a new trip (Organizer/Admin only).\n\n**Headers:** `Authorization: Bearer <token>`\n\n**Request Body:**\n```json\n{\n  \"title\": \"Himalayan Adventure Trek\",\n  \"description\": \"Experience the breathtaking beauty of the Himalayas...\",\n  \"categories\": [\"trekking\", \"adventure\"],\n  \"destination\": \"Nepal\",\n  \"location\": {\n    \"coordinates\": [85.3240, 27.7172]\n  },\n  \"schedule\": [\n    {\n      \"day\": 1,\n      \"title\": \"Arrival in Kathmandu\",\n      \"activities\": [\"Airport pickup\", \"Hotel check-in\"]\n    }\n  ],\n  \"images\": [\"image1.jpg\", \"image2.jpg\""
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "],\n  \"capacity\": 15,\n  \"price\": 2500,\n  \"startDate\": \"2024-03-15T00:00:00.000Z\",\n  \"endDate\": \"2024-03-25T00:00:00.000Z\"\n}\n```\n\n**Response (201):**\n```json\n{\n  \"message\": \"Trip created successfully\",\n  \"trip\": {\n    \"id\": \"647abc123def456789\",\n    \"title\": \"Himalayan Adventure Trek\",\n    \"destination\": \"Nepal\",\n    \"price\": 2500,\n    \"capacity\": 15,\n    \"startDate\": \"2024-03-15T00:00:00.000Z\",\n    \"endDate\": \"2024-03-25T00:00:00.000Z\",\n    \"categories\": [\"trekking\", \"adventure\"]\n  }\n}\n```\n\n### GET /trips/:id\nGet trip details by ID.\n\n**Response (200):**\n```json\n{\n  \"_id\": \"647abc123def456789\",\n  \"organizerId\": {\n    \"_id\": \"647abc123def456788\",\n    \"name\": \"Trek Organizer\",\n    \"email\": \"organizer@example.com\"\n  },\n  \"title\": \"Himalayan Adventure Trek\",\n  \"description\": \"Experience the breathtaking beauty...\",\n  \"categories\": [\"trekking\", \"adventure\"],\n  \"destination\": \"Nepal\",\n  \"schedule\": [...],\n  \"images\": [...],\n  \"capacity\": 15,\n  \"price\": 2500,\n  \"startDate\": \"2024-03-15T00:00:00"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": ".000Z\",\n  \"endDate\": \"2024-03-25T00:00:00.000Z\",\n  \"participants\": [...],\n  \"participantDetails\": [\n    {\n      \"userId\": \"user-id-1\",\n      \"emergencyContactName\": \"Jane Doe\",\n      \"emergencyContactPhone\": \"+1234567890\",\n      \"medicalConditions\": \"None\",\n      \"experienceLevel\": \"intermediate\",\n      \"joinedAt\": \"2024-01-15T00:00:00.000Z\"\n    }\n  ],\n  \"status\": \"active\",\n  \"createdAt\": \"2024-01-01T00:00:00.000Z\"\n}\n```\n\n### POST /trips/:id/join\nJoin a trip (Authenticated users only).\n\n**Headers:** `Authorization: Bearer <token>`\n\n**Response (200):**\n```json\n{\n  \"message\": \"Successfully joined trip\",\n  \"trip\": { /* Updated trip object */ }\n}\n```\n\n**Errors:**\n- `400` - Trip is full / Already joined\n- `404` - Trip not found\n\n### DELETE /trips/:id/leave\nLeave a trip (Authenticated users only).\n\n**Headers:** `Authorization: Bearer <token>`\n\n**Response (200):**\n```json\n{\n  \"message\": \"Successfully left trip\",\n  \"trip\": { /* Updated trip object */ }\n}\n```\n\n---\n\n## üë®‚Äçüíº Admin Endpoints\n\n### G"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "ET /admin/stats\nGet comprehensive admin dashboard statistics.\n\n**Headers:** `Authorization: Bearer <admin-token>`\n\n**Response (200):**\n```json\n{\n  \"overview\": {\n    \"totalUsers\": 150,\n    \"totalTrips\": 25,\n    \"totalBookings\": 300,\n    \"totalRevenue\": 750000,\n    \"totalReviews\": 85,\n    \"totalWishlists\": 120\n  },\n  \"users\": {\n    \"total\": 150,\n    \"byRole\": [\n      { \"role\": \"traveler\", \"count\": 120 },\n      { \"role\": \"organizer\", \"count\": 25 },\n      { \"role\": \"admin\", \"count\": 3 },\n      { \"role\": \"agent\", \"count\": 2 }\n    ],\n    \"recentUsers\": [...]\n  },\n  \"trips\": {\n    \"total\": 25,\n    \"byStatus\": [\n      { \"status\": \"active\", \"count\": 20 },\n      { \"status\": \"completed\", \"count\": 4 },\n      { \"status\": \"cancelled\", \"count\": 1 }\n    ],\n    \"recentTrips\": [...],\n    \"totalBookings\": 300,\n    \"totalRevenue\": 750000\n  }\n}\n```\n\n### GET /admin/users\nGet all users with pagination and search.\n\n**Headers:** `Authorization: Bearer <admin-token>`\n\n**Query Parameters:**\n- `page` - Page numbe"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "r (default: 1)\n- `limit` - Items per page (default: 10)\n- `search` - Search by name or email\n- `role` - Filter by role\n\n**Response (200):**\n```json\n{\n  \"users\": [\n    {\n      \"_id\": \"647abc123def456789\",\n      \"name\": \"John Doe\",\n      \"email\": \"john@example.com\",\n      \"role\": \"traveler\",\n      \"createdAt\": \"2024-01-01T00:00:00.000Z\",\n      \"lastActive\": \"2024-01-15T00:00:00.000Z\"\n    }\n  ],\n  \"pagination\": {\n    \"current\": 1,\n    \"pages\": 15,\n    \"total\": 150\n  }\n}\n```\n\n### GET /admin/trips  \nGet all trips with pagination and search.\n\n**Headers:** `Authorization: Bearer <admin-token>`\n\n**Query Parameters:**\n- `page` - Page number (default: 1)\n- `limit` - Items per page (default: 10)\n- `search` - Search by title or destination\n- `status` - Filter by status\n\n**Response (200):**\n```json\n{\n  \"trips\": [\n    {\n      \"_id\": \"647abc123def456789\",\n      \"title\": \"Himalayan Adventure Trek\",\n      \"destination\": \"Nepal\",\n      \"price\": 2500,\n      \"capacity\": 15,\n      \"participants\": [\"user-id"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "-1\", \"user-id-2\"],\n      \"status\": \"active\",\n      \"organizerId\": {\n        \"name\": \"Trek Organizer\",\n        \"email\": \"organizer@example.com\"\n      },\n      \"createdAt\": \"2024-01-01T00:00:00.000Z\"\n    }\n  ],\n  \"pagination\": {\n    \"current\": 1,\n    \"pages\": 3,\n    \"total\": 25\n  }\n}\n```\n\n### PATCH /admin/users/:id/role\nUpdate user role.\n\n**Headers:** `Authorization: Bearer <admin-token>`\n\n**Request Body:**\n```json\n{\n  \"role\": \"organizer\" // \"traveler\" | \"organizer\" | \"admin\" | \"agent\"\n}\n```\n\n**Response (200):**\n```json\n{\n  \"message\": \"User role updated successfully\",\n  \"user\": { /* Updated user object */ }\n}\n```\n\n### DELETE /admin/users/:id\nDelete user account and cleanup related data.\n\n**Headers:** `Authorization: Bearer <admin-token>`\n\n**Response (200):**\n```json\n{\n  \"message\": \"User deleted successfully\"\n}\n```\n\n### PATCH /admin/trips/:id/status\nUpdate trip status.\n\n**Headers:** `Authorization: Bearer <admin-token>`\n\n**Request Body:**\n```json\n{\n  \"status\": \"cancelled\" // \"active\" | \"c"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "ancelled\" | \"completed\"\n}\n```\n\n**Response (200):**\n```json\n{\n  \"message\": \"Trip status updated successfully\",\n  \"trip\": { /* Updated trip object */ }\n}\n```\n\n### DELETE /admin/trips/:id\nDelete trip and cleanup related data.\n\n**Headers:** `Authorization: Bearer <admin-token>`\n\n**Response (200):**\n```json\n{\n  \"message\": \"Trip deleted successfully\"\n}\n```\n\n### POST /admin/cleanup\nPerform system cleanup operations.\n\n**Headers:** `Authorization: Bearer <admin-token>`\n\n**Response (200):**\n```json\n{\n  \"message\": \"System cleanup completed successfully\",\n  \"results\": {\n    \"orphanedReviews\": 5,\n    \"orphanedWishlists\": 3,\n    \"expiredTrips\": 2\n  }\n}\n```\n\n---\n\n## üéß Agent Endpoints\n\n### GET /agent/stats\nGet agent dashboard statistics and performance metrics.\n\n**Headers:** `Authorization: Bearer <agent-token>`\n\n**Response (200):**\n```json\n{\n  \"tickets\": {\n    \"total\": 45,\n    \"open\": 12,\n    \"inProgress\": 8,\n    \"resolved\": 23,\n    \"unassigned\": 5\n  },\n  \"performance\": {\n    \"avgResolutionTimeHours\""
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": ": 6.5,\n    \"avgSatisfactionRating\": 4.2,\n    \"resolvedLast30Days\": 18\n  },\n  \"recentActivity\": [\n    {\n      \"_id\": \"ticket-id-1\",\n      \"ticketId\": \"TT-12345678-0001\",\n      \"subject\": \"Booking Issue\",\n      \"status\": \"in-progress\",\n      \"priority\": \"high\",\n      \"updatedAt\": \"2024-01-15T10:30:00.000Z\"\n    }\n  ]\n}\n```\n\n### GET /agent/tickets\nGet support tickets with filtering and pagination.\n\n**Headers:** `Authorization: Bearer <agent-token>`\n\n**Query Parameters:**\n- `page` - Page number (default: 1)\n- `limit` - Items per page (default: 20)\n- `status` - Filter by status\n- `priority` - Filter by priority\n- `category` - Filter by category\n- `assigned` - Filter by assignment (\"me\" | \"unassigned\" | \"all\")\n- `search` - Search tickets\n\n**Response (200):**\n```json\n{\n  \"tickets\": [\n    {\n      \"_id\": \"ticket-id-1\",\n      \"ticketId\": \"TT-12345678-0001\",\n      \"subject\": \"Payment Issue with Booking\",\n      \"status\": \"open\",\n      \"priority\": \"high\", \n      \"category\": \"payment\",\n      \"custome"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "rName\": \"John Doe\",\n      \"customerEmail\": \"john@example.com\",\n      \"customerPhone\": \"+1234567890\",\n      \"assignedAgentId\": null,\n      \"createdAt\": \"2024-01-15T09:00:00.000Z\",\n      \"updatedAt\": \"2024-01-15T09:00:00.000Z\"\n    }\n  ],\n  \"pagination\": {\n    \"current\": 1,\n    \"pages\": 5,\n    \"total\": 87\n  }\n}\n```\n\n### GET /agent/tickets/:ticketId\nGet detailed ticket information.\n\n**Headers:** `Authorization: Bearer <agent-token>`\n\n**Response (200):**\n```json\n{\n  \"ticket\": {\n    \"_id\": \"ticket-id-1\",\n    \"ticketId\": \"TT-12345678-0001\",\n    \"subject\": \"Payment Issue with Booking\",\n    \"description\": \"Unable to process payment for trip booking...\",\n    \"status\": \"open\",\n    \"priority\": \"high\",\n    \"category\": \"payment\",\n    \"customerName\": \"John Doe\",\n    \"customerEmail\": \"john@example.com\",\n    \"customerPhone\": \"+1234567890\",\n    \"userId\": {\n      \"_id\": \"user-id-1\",\n      \"name\": \"John Doe\",\n      \"email\": \"john@example.com\",\n      \"phone\": \"+1234567890\"\n    },\n    \"assignedAgentId\": {"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "\"_id\": \"agent-id-1\",\n      \"name\": \"Agent Smith\",\n      \"email\": \"agent@example.com\"\n    },\n    \"relatedTripId\": {\n      \"_id\": \"trip-id-1\",\n      \"title\": \"Himalayan Trek\",\n      \"destination\": \"Nepal\",\n      \"startDate\": \"2024-03-15T00:00:00.000Z\"\n    },\n    \"messages\": [\n      {\n        \"sender\": \"customer\",\n        \"senderName\": \"John Doe\",\n        \"message\": \"I'm having trouble with payment processing...\",\n        \"timestamp\": \"2024-01-15T09:00:00.000Z\"\n      },\n      {\n        \"sender\": \"agent\", \n        \"senderName\": \"Agent Smith\",\n        \"message\": \"I'll help you resolve this issue...\",\n        \"timestamp\": \"2024-01-15T09:15:00.000Z\"\n      }\n    ],\n    \"createdAt\": \"2024-01-15T09:00:00.000Z\"\n  }\n}\n```\n\n### POST /agent/tickets/:ticketId/assign\nAssign ticket to agent.\n\n**Headers:** `Authorization: Bearer <agent-token>`\n\n**Request Body:**\n```json\n{\n  \"assignedAgentId\": \"agent-id-1\" // Optional: if not provided, assigns to current agent\n}\n```\n\n**Response (200):**\n```json\n{"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "\"ticket\": { /* Updated ticket object */ },\n  \"message\": \"Ticket assigned successfully\"\n}\n```\n\n### PATCH /agent/tickets/:ticketId/status\nUpdate ticket status.\n\n**Headers:** `Authorization: Bearer <agent-token>`\n\n**Request Body:**\n```json\n{\n  \"status\": \"in-progress\" // \"open\" | \"in-progress\" | \"waiting-customer\" | \"resolved\" | \"closed\"\n}\n```\n\n**Response (200):**\n```json\n{\n  \"ticket\": { /* Updated ticket object */ },\n  \"message\": \"Ticket status updated successfully\"\n}\n```\n\n### POST /agent/tickets/:ticketId/messages\nAdd message to ticket conversation.\n\n**Headers:** `Authorization: Bearer <agent-token>`\n\n**Request Body:**\n```json\n{\n  \"message\": \"I've reviewed your case and here's the solution...\",\n  \"attachments\": [\"file1.jpg\", \"file2.pdf\"] // Optional\n}\n```\n\n**Response (200):**\n```json\n{\n  \"ticket\": { /* Updated ticket with new message */ },\n  \"message\": \"Message added successfully\"\n}\n```\n\n### POST /agent/tickets\nCreate new support ticket on behalf of customer.\n\n**Headers:** `Authorization"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": ": Bearer <agent-token>`\n\n**Request Body:**\n```json\n{\n  \"userId\": \"customer-user-id\",\n  \"subject\": \"Booking Assistance Required\",\n  \"description\": \"Customer needs help with trip booking process...\",\n  \"category\": \"booking\", // \"booking\" | \"payment\" | \"technical\" | \"general\" | \"complaint\" | \"refund\"\n  \"priority\": \"medium\", // \"low\" | \"medium\" | \"high\" | \"urgent\"\n  \"relatedTripId\": \"trip-id-1\", // Optional\n  \"relatedBookingId\": \"booking-id-1\" // Optional\n}\n```\n\n**Response (201):**\n```json\n{\n  \"ticket\": { /* Created ticket object */ },\n  \"message\": \"Ticket created successfully\"\n}\n```\n\n### GET /agent/customers/search\nSearch customers by name, email, or phone.\n\n**Headers:** `Authorization: Bearer <agent-token>`\n\n**Query Parameters:**\n- `q` - Search query (minimum 2 characters)\n\n**Response (200):**\n```json\n{\n  \"customers\": [\n    {\n      \"_id\": \"user-id-1\",\n      \"name\": \"John Doe\",\n      \"email\": \"john@example.com\",\n      \"phone\": \"+1234567890\",\n      \"role\": \"traveler\",\n      \"createdAt\": \"2"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "024-01-01T00:00:00.000Z\"\n    }\n  ]\n}\n```\n\n### GET /agent/customers/:userId\nGet customer details with booking and support history.\n\n**Headers:** `Authorization: Bearer <agent-token>`\n\n**Response (200):**\n```json\n{\n  \"customer\": {\n    \"_id\": \"user-id-1\",\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"phone\": \"+1234567890\",\n    \"role\": \"traveler\",\n    \"createdAt\": \"2024-01-01T00:00:00.000Z\"\n  },\n  \"bookingHistory\": [\n    {\n      \"_id\": \"trip-id-1\",\n      \"title\": \"Himalayan Trek\",\n      \"destination\": \"Nepal\",\n      \"startDate\": \"2024-03-15T00:00:00.000Z\",\n      \"organizerId\": {\n        \"name\": \"Trek Organizer\",\n        \"email\": \"organizer@example.com\",\n        \"phone\": \"+0987654321\"\n      }\n    }\n  ],\n  \"supportHistory\": [\n    {\n      \"_id\": \"ticket-id-1\",\n      \"ticketId\": \"TT-12345678-0001\",\n      \"subject\": \"Payment Issue\",\n      \"status\": \"resolved\",\n      \"createdAt\": \"2024-01-15T09:00:00.000Z\",\n      \"assignedAgentId\": {\n        \"name\": \"Agent Smith\",\n        \"email\""
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": ": \"agent@example.com\"\n      }\n    }\n  ]\n}\n```\n\n### POST /agent/whatsapp/send\nSend WhatsApp message to customer.\n\n**Headers:** `Authorization: Bearer <agent-token>`\n\n**Request Body:**\n```json\n{\n  \"phone\": \"+1234567890\",\n  \"message\": \"Hello! This is regarding your recent trip booking...\"\n}\n```\n\n**Response (200):**\n```json\n{\n  \"message\": \"WhatsApp message sent successfully\"\n}\n```\n\n**Errors:**\n- `503` - WhatsApp service not available\n\n### GET /agent/services/status\nGet status of email and WhatsApp services.\n\n**Headers:** `Authorization: Bearer <agent-token>`\n\n**Response (200):**\n```json\n{\n  \"email\": {\n    \"isReady\": true,\n    \"hasCredentials\": true,\n    \"lastTest\": true\n  },\n  \"whatsapp\": {\n    \"isReady\": true,\n    \"isInitializing\": false,\n    \"clientInfo\": \"connected\"\n  }\n}\n```\n\n---\n\n## üí¨ Review Endpoints\n\n### GET /reviews\nGet reviews with optional filtering.\n\n**Query Parameters:**\n- `tripId` - Filter reviews by trip\n- `organizerId` - Filter reviews by organizer\n- `reviewType` - Filter by"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "type (\"trip\" | \"organizer\")\n\n**Response (200):**\n```json\n[\n  {\n    \"_id\": \"review-id-1\",\n    \"title\": \"Amazing Experience!\",\n    \"comment\": \"This trip exceeded all my expectations...\",\n    \"rating\": 5,\n    \"reviewType\": \"trip\",\n    \"targetId\": \"trip-id-1\",\n    \"reviewerId\": {\n      \"_id\": \"user-id-1\",\n      \"name\": \"John Doe\"\n    },\n    \"createdAt\": \"2024-01-15T00:00:00.000Z\"\n  }\n]\n```\n\n### POST /reviews\nCreate a new review.\n\n**Headers:** `Authorization: Bearer <token>`\n\n**Request Body:**\n```json\n{\n  \"title\": \"Amazing Experience!\",\n  \"comment\": \"This trip exceeded all my expectations...\",\n  \"rating\": 5, // 1-5\n  \"reviewType\": \"trip\", // \"trip\" | \"organizer\"\n  \"targetId\": \"trip-id-1\" // Trip ID or Organizer ID\n}\n```\n\n**Response (201):**\n```json\n{\n  \"message\": \"Review created successfully\",\n  \"review\": { /* Created review object */ }\n}\n```\n\n---\n\n## üíù Wishlist Endpoints\n\n### GET /wishlist\nGet user's wishlist.\n\n**Headers:** `Authorization: Bearer <token>`\n\n**Response (200):**\n```json\n{"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "\"wishlist\": [\n    {\n      \"_id\": \"wishlist-id-1\",\n      \"tripId\": {\n        \"_id\": \"trip-id-1\",\n        \"title\": \"Himalayan Trek\",\n        \"destination\": \"Nepal\",\n        \"price\": 2500,\n        \"coverImage\": \"cover.jpg\"\n      },\n      \"addedAt\": \"2024-01-15T00:00:00.000Z\"\n    }\n  ]\n}\n```\n\n### POST /wishlist\nAdd trip to wishlist.\n\n**Headers:** `Authorization: Bearer <token>`\n\n**Request Body:**\n```json\n{\n  \"tripId\": \"trip-id-1\"\n}\n```\n\n**Response (201):**\n```json\n{\n  \"message\": \"Trip added to wishlist\",\n  \"wishlist\": { /* Updated wishlist */ }\n}\n```\n\n### DELETE /wishlist/:tripId\nRemove trip from wishlist.\n\n**Headers:** `Authorization: Bearer <token>`\n\n**Response (200):**\n```json\n{\n  \"message\": \"Trip removed from wishlist\"\n}\n```\n\n---\n\n## üñºÔ∏è File Upload Endpoints\n\n### POST /files/upload\nUpload files (images, PDFs, etc.).\n\n**Headers:** `Authorization: Bearer <token>`\n\n**Request:** Multipart form data with files\n\n**Response (200):**\n```json\n{\n  \"files\": [\n    {\n      \"filename\": \"image1.jpg\","
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "\"url\": \"https://your-domain.com/uploads/image1.jpg\",\n      \"size\": 1024000,\n      \"mimeType\": \"image/jpeg\"\n    }\n  ]\n}\n```\n\n**Errors:**\n- `400` - File too large / Invalid file type\n- `413` - Payload too large\n\n---\n\n## üìä System Endpoints\n\n### GET /health\nSystem health check (public endpoint).\n\n**Response (200):**\n```json\n{\n  \"status\": \"ok\",\n  \"timestamp\": \"2024-01-15T12:00:00.000Z\",\n  \"mongodb\": {\n    \"status\": \"connected\",\n    \"ping\": \"successful\"\n  },\n  \"uptime\": 86400,\n  \"memory\": {\n    \"used\": 134217728,\n    \"total\": 536870912\n  },\n  \"version\": \"v20.10.0\"\n}\n```\n\n---\n\n## üö® Error Responses\n\nAll API endpoints return consistent error responses:\n\n### 400 Bad Request\n```json\n{\n  \"error\": \"Invalid request data\",\n  \"details\": \"Validation error details\"\n}\n```\n\n### 401 Unauthorized\n```json\n{\n  \"error\": \"Unauthorized\"\n}\n```\n\n### 403 Forbidden\n```json\n{\n  \"error\": \"Forbidden\"\n}\n```\n\n### 404 Not Found\n```json\n{\n  \"error\": \"Resource not found\"\n}\n```\n\n### 409 Conflict\n```json\n{\n  \"error\": \""
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "Email already in use\"\n}\n```\n\n### 500 Internal Server Error\n```json\n{\n  \"error\": \"Internal server error\"\n}\n```\n\n---\n\n## üìù Notes\n\n### Rate Limiting\n- Default: 100 requests per minute per IP\n- Configurable via `RATE_LIMIT_MAX` environment variable\n\n### File Upload Limits\n- Maximum file size: 10MB (configurable)\n- Allowed types: Images (JPEG, PNG, GIF, WebP), PDFs\n- Multiple files supported in single request\n\n### Pagination\n- Default page size: 10 items\n- Maximum page size: 100 items\n- Always includes pagination metadata in response\n\n### Search\n- Full-text search available on indexed fields\n- Case-insensitive matching\n- Supports partial matches\n\n### Date Formats\n- All dates in ISO 8601 format (UTC)\n- Example: `2024-01-15T12:00:00.000Z`\n\n### Geographic Data\n- Location coordinates in [longitude, latitude] format\n- Uses GeoJSON Point format for storage\n- Supports geographic queries (proximity search)\n\n---\n\nThis API documentation covers all endpoints available in the Trek Tribe platform. For a"
  },
  {
    "source": "API_DOCUMENTATION.md",
    "text": "dditional support or questions, please refer to the main documentation or contact the development team."
  },
  {
    "source": "docs\\BACKUPS.md",
    "text": "# MongoDB Backups & Restore\n\nThis document describes how to take backups and restore the MongoDB used by the Trek Tribe API.\n\nPrerequisites\n- `mongodump` and `mongorestore` installed on the machine where you run the scripts.\n- The `MONGODB_URI` environment variable set.\n\nBackup\n\nRun the provided script (creates a gzip archive):\n\n```bash\ncd services/api\nexport MONGODB_URI=\"<your-mongo-uri>\"\n./scripts/backup_mongo.sh\n```\n\nRestore\n\nTo restore from an archive created by `backup_mongo.sh`:\n\n```bash\ncd services/api\nexport MONGODB_URI=\"<your-mongo-uri>\"\n./scripts/restore_mongo.sh /path/to/mongodump-20250101T120000Z\n```\n\nNotes\n- These scripts are minimal helpers. For production, store backups in an offsite location (S3, GCS), rotate and purge old backups, and test restores regularly."
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "# Trek Tribe Deployment Guide\n\nThis guide covers deploying Trek Tribe to production using Vercel (frontend) and Render (backend).\n\n## Architecture Overview\n\n- **Frontend (React)**: Deployed on Vercel\n- **Backend (Node.js/Express)**: Deployed on Render  \n- **Database**: MongoDB Atlas\n- **File Storage**: Cloudinary or AWS S3\n- **Domain**: Custom domain with SSL\n\n## Prerequisites\n\n1. **GitHub Repository**: Code should be pushed to GitHub\n2. **MongoDB Atlas**: Set up a cloud database\n3. **Vercel Account**: For frontend deployment\n4. **Render Account**: For backend deployment\n5. **Cloudinary Account**: For file storage (optional)\n6. **Custom Domain**: Optional but recommended\n\n## Step 1: MongoDB Atlas Setup\n\n### 1.1 Create MongoDB Atlas Cluster\n\n1. Go to [MongoDB Atlas](https://cloud.mongodb.com/)\n2. Sign up or log in\n3. Create a new project: \"Trek Tribe\"\n4. Build a new cluster:\n   - Choose AWS/GCP/Azure\n   - Select free tier (M0) or appropriate tier\n   - Choose region closest to your users"
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "- Name your cluster: \"trek-tribe-cluster\"\n\n### 1.2 Configure Database Access\n\n1. **Database Users**:\n   - Go to Database Access\n   - Add new user with username/password\n   - Grant \"Read and write to any database\" role\n   - Save username and password for connection string\n\n2. **Network Access**:\n   - Go to Network Access\n   - Add IP Address: `0.0.0.0/0` (allow from anywhere)\n   - Or add specific IPs for better security\n\n3. **Get Connection String**:\n   - Go to Clusters > Connect\n   - Choose \"Connect your application\"\n   - Copy connection string:\n     ```\n     mongodb+srv://<username>:<password>@trek-tribe-cluster.xxxxx.mongodb.net/trekktribe?retryWrites=true&w=majority\n     ```\n\n## Step 2: Environment Variables Setup\n\n### 2.1 Production Environment Variables\n\nCreate production values for all environment variables:\n\n```bash\n# Critical Production Variables\nNODE_ENV=production\nMONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/trekktribe\nJWT_SECRET=your-super-secure-64-cha"
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "racter-jwt-secret-for-production-use-only\nFRONTEND_URL=https://trek-tribe.vercel.app\nCORS_ORIGIN=https://trek-tribe.vercel.app\n\n# Google OAuth (if using)\nGOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com\nGOOGLE_CLIENT_SECRET=your-google-client-secret\n\n# Email (Gmail SMTP)\nGMAIL_USER=your-email@gmail.com\nGMAIL_APP_PASSWORD=your-16-char-app-password\n\n# Optional Services\nWHATSAPP_ENABLED=true\nEMAIL_ENABLED=true\n```\n\n### 2.2 Generate Secure Secrets\n\n```bash\n# Generate a secure JWT secret\nnode -e \"console.log(require('crypto').randomBytes(32).toString('hex'))\"\n\n# Or use OpenSSL\nopenssl rand -hex 32\n```\n\n## Step 3: Backend Deployment (Render)\n\n### 3.1 Prepare Backend for Deployment\n\n1. **Update package.json** (if needed):\n```json\n{\n  \"scripts\": {\n    \"build\": \"tsc\",\n    \"start\": \"node dist/index.js\",\n    \"start:render\": \"node dist/index.js\"\n  },\n  \"engines\": {\n    \"node\": \">=18.0.0\"\n  }\n}\n```\n\n2. **Create render.yaml** (optional):\n```yaml\nservices:\n  - type: web\n    name: tre"
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "k-tribe-api\n    env: node\n    buildCommand: npm install && npm run build\n    startCommand: npm run start:render\n    envVars:\n      - key: NODE_ENV\n        value: production\n      - key: PORT\n        fromService:\n          type: web\n          name: trek-tribe-api\n          property: port\n```\n\n### 3.2 Deploy to Render\n\n1. **Connect Repository**:\n   - Go to [Render Dashboard](https://dashboard.render.com/)\n   - Click \"New +\" > \"Web Service\"\n   - Connect your GitHub account\n   - Select `trek-tribe` repository\n   - Choose `services/api` as root directory\n\n2. **Configure Service**:\n   - **Name**: `trek-tribe-api`\n   - **Environment**: `Node`\n   - **Region**: Choose closest to your users\n   - **Branch**: `main` or `production`\n   - **Root Directory**: `services/api`\n   - **Build Command**: `npm install && npm run build`\n   - **Start Command**: `npm run start:render`\n\n3. **Set Environment Variables**:\n   - Add all production environment variables\n   - Render automatically sets `PORT` (usually"
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "10000)\n\n4. **Deploy**:\n   - Click \"Create Web Service\"\n   - Wait for deployment to complete\n   - Note the service URL: `https://trek-tribe-api.onrender.com`\n\n### 3.3 Verify Backend Deployment\n\nTest your API endpoints:\n```bash\n# Health check\ncurl https://trek-tribe-api.onrender.com/health\n\n# Test API\ncurl https://trek-tribe-api.onrender.com/api/trips\n```\n\n## Step 4: Frontend Deployment (Vercel)\n\n### 4.1 Prepare Frontend for Deployment\n\n1. **Update environment variables**:\n```bash\n# In web/.env.production\nREACT_APP_API_URL=https://trek-tribe-api.onrender.com\nREACT_APP_GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com\nGENERATE_SOURCEMAP=false\n```\n\n2. **Update API configuration** (if needed):\n```typescript\n// web/src/config/api.ts\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'https://trek-tribe-api.onrender.com';\n```\n\n### 4.2 Deploy to Vercel\n\n1. **Connect Repository**:\n   - Go to [Vercel Dashboard](https://vercel.com/dashboard)\n   - Click \"New Project\"\n   - Import"
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "from GitHub: `trek-tribe` repository\n   - **Root Directory**: `web`\n\n2. **Configure Project**:\n   - **Framework Preset**: `Create React App`\n   - **Root Directory**: `web`\n   - **Build Command**: `npm run build`\n   - **Output Directory**: `build`\n   - **Install Command**: `npm install`\n\n3. **Environment Variables**:\n   - Add all `REACT_APP_*` variables\n   - Set `GENERATE_SOURCEMAP=false`\n   - Set `TSC_COMPILE_ON_ERROR=true`\n\n4. **Deploy**:\n   - Click \"Deploy\"\n   - Wait for deployment\n   - Note the URL: `https://trek-tribe.vercel.app`\n\n### 4.3 Update Backend CORS\n\nUpdate your backend environment variables:\n```bash\nFRONTEND_URL=https://trek-tribe.vercel.app\nCORS_ORIGIN=https://trek-tribe.vercel.app\nALLOWED_ORIGINS=https://trek-tribe.vercel.app\n```\n\nRedeploy the backend service.\n\n## Step 5: Custom Domain Setup (Optional)\n\n### 5.1 Frontend Domain (Vercel)\n\n1. **Add Domain**:\n   - Go to Project Settings > Domains\n   - Add your domain: `trek-tribe.com`\n   - Add www subdomain: `www.trek-trib"
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "e.com`\n\n2. **Configure DNS**:\n   - Add CNAME record: `www.trek-tribe.com` ‚Üí `cname.vercel-dns.com`\n   - Add A record: `trek-tribe.com` ‚Üí `76.76.19.61`\n\n### 5.2 Backend Domain (Render)\n\n1. **Add Custom Domain**:\n   - Go to Service > Settings > Custom Domains\n   - Add domain: `api.trek-tribe.com`\n\n2. **Configure DNS**:\n   - Add CNAME record: `api.trek-tribe.com` ‚Üí `trek-tribe-api.onrender.com`\n\n### 5.3 Update Environment Variables\n\n```bash\n# Backend\nFRONTEND_URL=https://trek-tribe.com\nCORS_ORIGIN=https://trek-tribe.com\nALLOWED_ORIGINS=https://trek-tribe.com,https://www.trek-tribe.com\n\n# Frontend\nREACT_APP_API_URL=https://api.trek-tribe.com\n```\n\n## Step 6: SSL and Security\n\n### 6.1 SSL Certificates\n\nBoth Vercel and Render provide automatic SSL certificates:\n- **Vercel**: Automatic SSL for all domains\n- **Render**: Free SSL certificates for custom domains\n\n### 6.2 Security Headers\n\nUpdate your backend to include security headers:\n\n```typescript\n// Add to your Express app\napp.use((req, res,"
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "next) => {\n  res.setHeader('X-Content-Type-Options', 'nosniff');\n  res.setHeader('X-Frame-Options', 'DENY');\n  res.setHeader('X-XSS-Protection', '1; mode=block');\n  res.setHeader('Strict-Transport-Security', 'max-age=31536000; includeSubDomains');\n  next();\n});\n```\n\n## Step 7: Monitoring and Analytics\n\n### 7.1 Application Monitoring\n\n1. **Render Monitoring**:\n   - Built-in metrics and logs\n   - Set up log retention\n   - Monitor CPU and memory usage\n\n2. **Vercel Analytics**:\n   - Enable Vercel Analytics\n   - Monitor Core Web Vitals\n   - Track page performance\n\n### 7.2 Error Tracking\n\nConsider adding error tracking:\n- **Sentry**: For error monitoring\n- **LogRocket**: For session replay\n- **Datadog**: For comprehensive monitoring\n\n### 7.3 Uptime Monitoring\n\nSet up uptime monitoring:\n- **UptimeRobot**: Free uptime monitoring\n- **Pingdom**: Professional monitoring\n- **StatusPage**: Status page for users\n\n## Step 8: Continuous Deployment\n\n### 8.1 Auto-Deploy Setup\n\nBoth platforms support au"
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "to-deploy:\n\n1. **Vercel**:\n   - Automatically deploys on push to main branch\n   - Preview deployments for pull requests\n\n2. **Render**:\n   - Auto-deploy on push to specified branch\n   - Manual deploy option available\n\n### 8.2 Environment Management\n\nCreate separate environments:\n- **Development**: Local development\n- **Staging**: For testing before production\n- **Production**: Live application\n\n## Step 9: Database Migrations\n\n### 9.1 Initial Data Setup\n\nRun any necessary database setup scripts:\n\n```bash\n# If you have setup scripts\nnpm run setup:db:prod\nnpm run setup:users:prod\n```\n\n### 9.2 Data Migration\n\nIf migrating from existing data:\n1. Export data from old system\n2. Transform data to match new schema\n3. Import using migration scripts\n4. Verify data integrity\n\n## Step 10: Testing Production Deployment\n\n### 10.1 Functionality Testing\n\nTest all major features:\n- [ ] User registration and login\n- [ ] Google OAuth login\n- [ ] Trip browsing and search\n- [ ] Trip booking and payments\n- ["
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "] Profile management\n- [ ] Email notifications\n- [ ] File uploads\n- [ ] Real-time features\n\n### 10.2 Performance Testing\n\n1. **Load Testing**:\n   - Use tools like Artillery or k6\n   - Test API endpoints under load\n   - Monitor response times\n\n2. **Frontend Performance**:\n   - Check Lighthouse scores\n   - Optimize bundle size\n   - Monitor Core Web Vitals\n\n### 10.3 Security Testing\n\n- [ ] HTTPS enabled everywhere\n- [ ] CORS properly configured\n- [ ] Input validation working\n- [ ] File upload restrictions\n- [ ] Rate limiting active\n\n## Troubleshooting\n\n### Common Deployment Issues\n\n1. **Build Failures**:\n   ```bash\n   # Check build logs\n   # Verify all dependencies installed\n   # Check TypeScript compilation\n   npm run build\n   ```\n\n2. **Environment Variable Issues**:\n   - Verify all required variables set\n   - Check variable names (case-sensitive)\n   - Ensure no spaces in values\n\n3. **Database Connection Issues**:\n   ```bash\n   # Test MongoDB connection\n   # Check IP whitelist\n   # Veri"
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "fy connection string format\n   ```\n\n4. **CORS Errors**:\n   - Check `CORS_ORIGIN` matches frontend URL\n   - Verify protocol (http vs https)\n   - Check for trailing slashes\n\n5. **API Not Responding**:\n   - Check service logs in Render\n   - Verify build completed successfully\n   - Test endpoints directly\n\n### Recovery Procedures\n\n1. **Rollback Deployment**:\n   - Render: Use previous deployment\n   - Vercel: Revert to previous commit\n\n2. **Database Issues**:\n   - Keep regular backups\n   - Use MongoDB Atlas automated backups\n   - Test backup restoration\n\n3. **Service Downtime**:\n   - Check service status pages\n   - Monitor service logs\n   - Have maintenance page ready\n\n## Cost Optimization\n\n### Free Tier Limits\n\n1. **Vercel**:\n   - 100GB bandwidth/month\n   - 100 deployments/day\n   - 1000 serverless function invocations/day\n\n2. **Render**:\n   - Free services spin down after 15 minutes\n   - 750 hours/month (enough for 1 service)\n   - Slower startup times\n\n3. **MongoDB Atlas**:\n   - M0: 512MB s"
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "torage\n   - Shared cluster\n   - Basic monitoring\n\n### Scaling Considerations\n\nWhen you outgrow free tiers:\n- **Render**: Upgrade to paid plans for always-on services\n- **Vercel**: Pro plan for team features and higher limits\n- **MongoDB Atlas**: M10+ for dedicated clusters\n- **CDN**: Add CloudFlare for better performance\n\n## Backup and Disaster Recovery\n\n### Regular Backups\n\n1. **Database Backups**:\n   - MongoDB Atlas automatic backups\n   - Manual exports for critical data\n\n2. **Code Backups**:\n   - GitHub repository\n   - Backup environment variables separately\n\n3. **File Storage Backups**:\n   - If using file uploads, backup storage\n\n### Disaster Recovery Plan\n\n1. **Service Outage**:\n   - Switch DNS to maintenance page\n   - Restore from backups\n   - Communicate with users\n\n2. **Data Loss**:\n   - Restore from latest backup\n   - Check data integrity\n   - Update users on any data loss\n\n3. **Security Breach**:\n   - Rotate all secrets immediately\n   - Review access logs\n   - Update security"
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "measures\n\n## Support and Maintenance\n\n### Regular Maintenance Tasks\n\n1. **Weekly**:\n   - Check service logs\n   - Monitor performance metrics\n   - Review error rates\n\n2. **Monthly**:\n   - Update dependencies\n   - Review security alerts\n   - Backup verification\n\n3. **Quarterly**:\n   - Security audit\n   - Performance optimization\n   - Cost review\n\n### Getting Help\n\n- **Render Support**: [Render Docs](https://render.com/docs)\n- **Vercel Support**: [Vercel Docs](https://vercel.com/docs)\n- **MongoDB Atlas**: [Atlas Docs](https://docs.atlas.mongodb.com/)\n\n---\n\n## Quick Reference\n\n### Important URLs\n\n- Frontend: `https://trek-tribe.vercel.app`\n- Backend API: `https://trek-tribe-api.onrender.com`\n- Database: MongoDB Atlas cluster\n- Render Dashboard: `https://dashboard.render.com`\n- Vercel Dashboard: `https://vercel.com/dashboard`\n\n### Environment Variables Checklist\n\nBackend (Render):\n- [ ] `NODE_ENV=production`\n- [ ] `MONGODB_URI` (Atlas connection string)\n- [ ] `JWT_SECRET` (32+ character se"
  },
  {
    "source": "docs\\DEPLOYMENT.md",
    "text": "cret)\n- [ ] `FRONTEND_URL` (Vercel URL)\n- [ ] `CORS_ORIGIN` (Vercel URL)\n- [ ] `GMAIL_USER` and `GMAIL_APP_PASSWORD`\n- [ ] `GOOGLE_CLIENT_ID` and `GOOGLE_CLIENT_SECRET`\n\nFrontend (Vercel):\n- [ ] `REACT_APP_API_URL` (Render URL)\n- [ ] `REACT_APP_GOOGLE_CLIENT_ID`\n- [ ] `GENERATE_SOURCEMAP=false`\n- [ ] `TSC_COMPILE_ON_ERROR=true`\n\n### Deployment Commands\n\n```bash\n# Manual deployment (if needed)\n# Backend\nnpm run build\nnpm run start:render\n\n# Frontend\nnpm run build\n```\n\nThis completes the deployment guide for Trek Tribe! üöÄ"
  },
  {
    "source": "docs\\ENV.md",
    "text": "# Environment Variables Documentation\n\nThis document explains all environment variables used in the Trek Tribe application.\n\n## Setup Instructions\n\n1. **Root Directory**: Copy `.env.example` to `.env` in the root directory\n2. **API Directory**: Copy `services/api/.env.example` to `services/api/.env` (if it exists)\n3. **Web Directory**: Copy `web/.env.example` to `web/.env`\n\n```bash\n# In the trek-tribe root directory\ncp .env.example .env\ncp web/.env.example web/.env\n```\n\n## Root Environment Variables\n\n### Core Application Settings\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `NODE_ENV` | string | No | `development` | Application environment (development, production, test) |\n| `API_PORT` | number | No | `4000` | Port for the API server |\n| `PORT` | number | No | `4000` | Alternative port specification (used by some hosting services) |\n| `WEB_PORT` | number | No | `3000` | Port for the web development server |\n\n### Databa"
  },
  {
    "source": "docs\\ENV.md",
    "text": "se Configuration\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `MONGODB_URI` | string | Yes | - | MongoDB connection string for Docker setup |\n| `MONGODB_URI_LOCAL` | string | No | - | MongoDB connection string for local development |\n\n**Example MongoDB URIs:**\n- Local: `mongodb://127.0.0.1:27017/trekktribe`\n- Docker: `mongodb://mongo:27017/trekktribe`\n- Atlas: `mongodb+srv://username:password@cluster.mongodb.net/trekktribe`\n\n### Authentication & Security\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `JWT_SECRET` | string | Yes | - | Secret key for JWT token signing. **Must be at least 32 characters** |\n| `JWT_EXPIRES_IN` | string | No | `7d` | JWT token expiration time (e.g., '1h', '7d', '30d') |\n| `RESET_TOKEN_EXPIRES` | number | No | `3600000` | Password reset token expiration in milliseconds (1 hour) |\n\n**Generating JWT Secret:**\n```bash\n# Using Open"
  },
  {
    "source": "docs\\ENV.md",
    "text": "SSL\nopenssl rand -hex 32\n\n# Using Node.js\nnode -e \"console.log(require('crypto').randomBytes(32).toString('hex'))\"\n\n# Online generator\n# https://generate-secret.vercel.app/32\n```\n\n### Google OAuth Configuration\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `GOOGLE_CLIENT_ID` | string | No | - | Google OAuth 2.0 Client ID from Google Cloud Console |\n| `GOOGLE_CLIENT_SECRET` | string | No | - | Google OAuth 2.0 Client Secret from Google Cloud Console |\n\n**Setting up Google OAuth:**\n1. Go to [Google Cloud Console](https://console.cloud.google.com/)\n2. Create a new project or select existing\n3. Enable Google+ API\n4. Create OAuth 2.0 Client ID credentials\n5. Add authorized origins:\n   - Development: `http://localhost:3000`\n   - Production: `https://yourdomain.com`\n\n### CORS & Security Settings\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `ALLOWED_ORIGINS` |"
  },
  {
    "source": "docs\\ENV.md",
    "text": "string | No | `http://localhost:3000,...` | Comma-separated list of allowed CORS origins |\n| `FRONTEND_URL` | string | No | `http://localhost:3000` | Frontend URL for CORS and email links |\n| `CORS_ORIGIN` | string | No | - | Single CORS origin for production |\n\n### Email Service Configuration\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `GMAIL_USER` | string | No | - | Gmail email address for SMTP |\n| `GMAIL_APP_PASSWORD` | string | No | - | Gmail App Password (16 characters) |\n| `EMAIL_ENABLED` | boolean | No | `true` | Enable/disable email service |\n\n**Setting up Gmail SMTP:**\n1. Enable 2-factor authentication on Gmail\n2. Generate App Password: [Account Settings > Security > App passwords](https://support.google.com/accounts/answer/185833)\n3. Use Gmail address as `GMAIL_USER`\n4. Use 16-character App Password as `GMAIL_APP_PASSWORD`\n\n### WhatsApp Integration\n\n| Variable | Type | Required | Default | Description |\n|--"
  },
  {
    "source": "docs\\ENV.md",
    "text": "--------|------|----------|---------|-------------|\n| `WHATSAPP_ENABLED` | boolean | No | `true` | Enable/disable WhatsApp integration |\n| `DEFAULT_COUNTRY_CODE` | string | No | `91` | Default country code for phone formatting (without +) |\n| `WHATSAPP_SESSION_NAME` | string | No | `trek-tribe-bot` | WhatsApp session identifier |\n\n### File Upload & Storage\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `MAX_FILE_SIZE` | number | No | `10485760` | Maximum file size in bytes (10MB) |\n| `UPLOAD_DIR` | string | No | `uploads` | Directory for file uploads (relative to API root) |\n| `ALLOWED_FILE_TYPES` | string | No | `image/jpeg,image/png,...` | Comma-separated list of allowed MIME types |\n\n### Logging Configuration\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `LOG_LEVEL` | number | No | `2` | Log level: 0=ERROR, 1=WARN, 2=INFO, 3=DEBUG |\n| `LOG_DIR` | strin"
  },
  {
    "source": "docs\\ENV.md",
    "text": "g | No | `logs` | Directory for log files |\n| `LOG_RETENTION_DAYS` | number | No | `30` | Number of days to keep log files |\n\n### Rate Limiting & Performance\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `RATE_LIMIT_MAX` | number | No | `100` | Maximum requests per IP per window |\n| `RATE_LIMIT_WINDOW_MS` | number | No | `60000` | Rate limiting window in milliseconds (1 minute) |\n| `REQUEST_TIMEOUT` | number | No | `30000` | Request timeout in milliseconds |\n\n### Development & Debugging\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `DEBUG_MODE` | boolean | No | `true` | Enable detailed error messages in development |\n| `GENERATE_SOURCEMAP` | boolean | No | `true` | Generate source maps for debugging |\n| `MOCK_EXTERNAL_SERVICES` | boolean | No | `false` | Mock external services for testing |\n\n## Web Environment Variables (React)\n\n### API Configuration\n\n|"
  },
  {
    "source": "docs\\ENV.md",
    "text": "Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `REACT_APP_API_URL` | string | Yes | - | Backend API URL (with protocol) |\n| `REACT_APP_SOCKET_URL` | string | No | Same as API_URL | Socket.IO server URL |\n\n### Google OAuth (Frontend)\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `REACT_APP_GOOGLE_CLIENT_ID` | string | No | - | Google OAuth 2.0 Client ID (same as backend) |\n\n### App Configuration\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `REACT_APP_APP_NAME` | string | No | `Trek Tribe` | Application name displayed in UI |\n| `REACT_APP_VERSION` | string | No | `1.0.0` | Application version |\n\n### Build Configuration\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `GENERATE_SOURCEMAP` | boolean | No | `false` | Generate source"
  },
  {
    "source": "docs\\ENV.md",
    "text": "maps for production |\n| `TSC_COMPILE_ON_ERROR` | boolean | No | `true` | Continue build on TypeScript errors |\n| `ESLINT_NO_DEV_ERRORS` | boolean | No | `true` | Don't treat ESLint warnings as errors |\n\n### Feature Flags\n\n| Variable | Type | Required | Default | Description |\n|----------|------|----------|---------|-------------|\n| `REACT_APP_ENABLE_REAL_TIME_CHAT` | boolean | No | `true` | Enable real-time chat features |\n| `REACT_APP_ENABLE_AI_SUPPORT` | boolean | No | `true` | Enable AI assistant features |\n| `REACT_APP_ENABLE_QR_PAYMENTS` | boolean | No | `true` | Enable QR code payment features |\n\n## Deployment-Specific Settings\n\n### Vercel Deployment\n\n```bash\n# In Vercel dashboard or vercel.json\nREACT_APP_API_URL=https://your-api-domain.vercel.app\nGENERATE_SOURCEMAP=false\n```\n\n### Render Deployment\n\n```bash\n# Backend (Render.com)\nPORT=10000  # Automatically set by Render\nMONGODB_URI=mongodb+srv://...  # Use MongoDB Atlas\nFRONTEND_URL=https://your-frontend.onrender.com\n\n# Frontend"
  },
  {
    "source": "docs\\ENV.md",
    "text": "REACT_APP_API_URL=https://your-backend.onrender.com\n```\n\n### Railway Deployment\n\n```bash\n# Railway automatically provides PORT\nFRONTEND_URL=https://your-app.railway.app\nCORS_ORIGIN=https://your-app.railway.app\n```\n\n## Security Best Practices\n\n1. **Never commit `.env` files** to version control\n2. **Use strong, unique JWT secrets** (minimum 32 characters)\n3. **Rotate secrets regularly** in production\n4. **Use environment-specific configurations**\n5. **Validate all environment variables** on application startup\n6. **Use HTTPS** in production for all URLs\n7. **Restrict CORS origins** to known domains\n8. **Enable rate limiting** in production\n\n## Validation\n\nThe application validates environment variables on startup. Check the console output for any missing or invalid variables.\n\n```javascript\n// Example validation in code\nconst { MONGODB_URI, JWT_SECRET, GOOGLE_CLIENT_ID } = process.env;\n\nif (!MONGODB_URI) {\n  throw new Error('MONGODB_URI environment variable is required');\n}\n\nif (!JWT_S"
  },
  {
    "source": "docs\\ENV.md",
    "text": "ECRET || JWT_SECRET.length < 32) {\n  throw new Error('JWT_SECRET must be at least 32 characters long');\n}\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **MongoDB Connection Failed**\n   - Check `MONGODB_URI` format\n   - Verify network connectivity\n   - Check MongoDB service status\n\n2. **JWT Token Issues**\n   - Ensure `JWT_SECRET` is set and consistent across services\n   - Check token expiration settings\n\n3. **CORS Errors**\n   - Verify `FRONTEND_URL` and `CORS_ORIGIN` settings\n   - Check `ALLOWED_ORIGINS` includes your domain\n\n4. **Google OAuth Not Working**\n   - Verify `GOOGLE_CLIENT_ID` is set in both backend and frontend\n   - Check Google Cloud Console settings\n   - Ensure authorized origins are configured\n\n5. **Email Service Issues**\n   - Check Gmail SMTP credentials\n   - Verify App Password (not regular password)\n   - Ensure 2FA is enabled on Gmail account\n\n### Environment Variable Priority\n\n1. Process environment variables\n2. `.env` file in service directory\n3. `.env` file in root"
  },
  {
    "source": "docs\\ENV.md",
    "text": "directory\n4. Default values in code\n\n### Docker Considerations\n\nWhen using Docker, environment variables can be set in:\n- `docker-compose.yml`\n- Dockerfile `ENV` commands\n- Runtime with `-e` flag\n- External `.env` files with `env_file`\n\n```yaml\n# docker-compose.yml example\nenvironment:\n  - NODE_ENV=production\n  - MONGODB_URI=mongodb://mongo:27017/trekktribe\nenv_file:\n  - .env\n```"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "# TrekTribe Platform - Completion Status Report\n\n**Assessment Date:** January 13, 2025  \n**Version:** 1.0  \n**Overall Completion:** ~85%\n\n---\n\n## Executive Summary\n\nTrekTribe is a **comprehensive travel/trek booking platform** with most core features implemented. The backend API is **highly complete (~95%)**, while the frontend needs more work (~70%). The platform is functional but requires frontend completion, testing, and polish before production launch.\n\n---\n\n## üìä Component-by-Component Analysis\n\n### 1. Backend API - **95% Complete** ‚úÖ\n\n#### ‚úÖ Fully Implemented (100%)\n\n**Authentication & Authorization:**\n- ‚úÖ Email/password registration and login\n- ‚úÖ Google OAuth integration\n- ‚úÖ JWT-based authentication\n- ‚úÖ Role-based access control (traveler, organizer, agent, admin)\n- ‚úÖ Email verification with OTP\n- ‚úÖ Phone verification with OTP (SMS)\n- ‚úÖ Password reset flow\n- ‚úÖ Profile completion for Google users\n\n**User Management:**\n- ‚úÖ User profiles (basic & enhanced)\n- ‚úÖ Public profiles\n- ‚úÖ Pr"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "ofile search\n- ‚úÖ Social links management\n- ‚úÖ Profile photos\n- ‚úÖ Privacy settings\n- ‚úÖ Organizer profiles with business info\n\n**Trip Management:**\n- ‚úÖ Create, read, update, delete trips\n- ‚úÖ Trip search and filtering\n- ‚úÖ Trip categories and tags\n- ‚úÖ Image uploads for trips\n- ‚úÖ Itinerary management\n- ‚úÖ Pricing and capacity\n- ‚úÖ Trip status (draft, active, completed)\n- ‚úÖ Trip verification system\n\n**Booking System:**\n- ‚úÖ Group bookings\n- ‚úÖ Payment tracking\n- ‚úÖ Payment verification (manual by organizers)\n- ‚úÖ Booking status management\n- ‚úÖ Participant details\n- ‚úÖ Special requests handling\n\n**Payment & Subscriptions:**\n- ‚úÖ Razorpay integration\n- ‚úÖ Auto-pay system for organizers\n- ‚úÖ Subscription packages (5, 10, 20, 50 trips)\n- ‚úÖ CRM bundle subscription\n- ‚úÖ Trial period management\n- ‚úÖ Payment scheduling (60-day auto-pay)\n- ‚úÖ Receipt generation\n\n**CRM System:**\n- ‚úÖ Lead management\n- ‚úÖ Support tickets\n- ‚úÖ Chat support (Socket.IO)\n- ‚úÖ Knowledge base\n- ‚úÖ Customer insights\n- ‚úÖ Analytics dashboard\n\n**So"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "cial Features:**\n- ‚úÖ Follow system\n- ‚úÖ Posts/feed\n- ‚úÖ Comments\n- ‚úÖ Reviews and ratings\n- ‚úÖ Wishlist\n- ‚úÖ Trip views tracking\n\n**AI Features:**\n- ‚úÖ AI-powered trip recommendations\n- ‚úÖ AI chat support\n- ‚úÖ RAG (Retrieval-Augmented Generation)\n- ‚úÖ Embedding service\n- ‚úÖ Knowledge ingestion\n- ‚úÖ AI metrics tracking\n\n**Notifications:**\n- ‚úÖ Email notifications (Nodemailer)\n- ‚úÖ SMS notifications (Twilio)\n- ‚úÖ WhatsApp notifications\n- ‚úÖ Push notifications (Firebase)\n- ‚úÖ In-app notifications\n- ‚úÖ Telegram notifications\n\n**Admin & Agent Tools:**\n- ‚úÖ User management\n- ‚úÖ Trip moderation\n- ‚úÖ Payment verification\n- ‚úÖ Organizer verification\n- ‚úÖ Analytics and reports\n- ‚úÖ Audit logs\n- ‚úÖ System health monitoring\n\n**New Features (Just Added):**\n- ‚úÖ Auto-pay system with 60-day scheduling\n- ‚úÖ Comprehensive role-specific dashboards\n- ‚úÖ Cron job scheduler\n- ‚úÖ Profile access fixed\n\n**API Routes:** 34 route files\n**Data Models:** 22 models\n**Services:** 25 services\n\n#### ‚ö†Ô∏è Partially Implemented (60-80%)\n\n**Advanced"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "Analytics:**\n- ‚ö†Ô∏è Revenue analytics (basic done, advanced needed)\n- ‚ö†Ô∏è User behavior tracking (basic done)\n- ‚ö†Ô∏è Conversion funnels (not implemented)\n- ‚ö†Ô∏è A/B testing framework (not implemented)\n\n**Advanced Search:**\n- ‚ö†Ô∏è Full-text search (basic done)\n- ‚ö†Ô∏è Geo-spatial search (not implemented)\n- ‚ö†Ô∏è Filters optimization needed\n\n#### ‚ùå Not Implemented (0%)\n\n**None** - All planned backend features are at least partially implemented\n\n---\n\n### 2. Frontend (Web) - **70% Complete** ‚ö†Ô∏è\n\n#### ‚úÖ Fully Implemented (100%)\n\n**Core Pages:**\n- ‚úÖ Home page\n- ‚úÖ Login page\n- ‚úÖ Registration page\n- ‚úÖ Trip listing page\n- ‚úÖ Trip details page\n- ‚úÖ Profile page\n- ‚úÖ Search page\n- ‚úÖ Wishlist page\n- ‚úÖ My bookings page\n\n**Dashboards:**\n- ‚úÖ Admin dashboard\n- ‚úÖ Agent dashboard\n- ‚úÖ Organizer dashboard\n- ‚úÖ Organizer CRM dashboard\n\n**Trip Management:**\n- ‚úÖ Create trip page\n- ‚úÖ Edit trip page\n- ‚úÖ Enhanced edit features\n\n**Utilities:**\n- ‚úÖ Privacy policy\n- ‚úÖ Terms & conditions\n\n#### ‚ö†Ô∏è Partially Implemented (40-70%)\n\n**Mi"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "ssing/Incomplete Pages:**\n- ‚ùå **Phone verification screen** (critical - needed for new auto-pay flow)\n- ‚ùå **Auto-pay setup screen** (critical - needed for organizers)\n- ‚ùå **Complete profile screen** (for Google OAuth users)\n- ‚ö†Ô∏è **New role-specific dashboards** (need frontend for new API endpoints)\n- ‚ö†Ô∏è Payment integration UI (Razorpay checkout)\n- ‚ö†Ô∏è Subscription management page\n- ‚ö†Ô∏è Trip verification workflow\n- ‚ö†Ô∏è Review and rating forms\n- ‚ö†Ô∏è Social feed page\n- ‚ö†Ô∏è Notification center\n- ‚ö†Ô∏è Advanced search filters\n- ‚ö†Ô∏è Chat/support interface\n- ‚ö†Ô∏è AI recommendation showcase (basic done)\n\n**Components:**\n- ‚ö†Ô∏è Alert notification system (for dashboard alerts)\n- ‚ö†Ô∏è Quick action buttons with badges\n- ‚ö†Ô∏è Profile completeness widget\n- ‚ö†Ô∏è Auto-pay status card\n- ‚ö†Ô∏è Statistics cards for dashboards\n- ‚ö†Ô∏è Chart/graph components\n\n#### ‚ùå Not Implemented (0%)\n\n**Mobile App:**\n- ‚ùå React Native app (not started)\n- ‚ùå Mobile-specific features\n- ‚ùå Push notifications UI\n\n---\n\n### 3. Database & Infrastructure"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "- **90% Complete** ‚úÖ\n\n#### ‚úÖ Implemented\n- ‚úÖ MongoDB schema design\n- ‚úÖ User collection with all roles\n- ‚úÖ Trip collection\n- ‚úÖ Booking collection\n- ‚úÖ Subscription collection\n- ‚úÖ CRM collections (leads, tickets, chat)\n- ‚úÖ Social collections (posts, follows, reviews)\n- ‚úÖ Notification collection\n- ‚úÖ Audit log collection\n- ‚úÖ Indexes for performance\n\n#### ‚ö†Ô∏è Needs Improvement\n- ‚ö†Ô∏è Database backup strategy\n- ‚ö†Ô∏è Migration scripts\n- ‚ö†Ô∏è Seeding data for testing\n\n---\n\n### 4. DevOps & Deployment - **60% Complete** ‚ö†Ô∏è\n\n#### ‚úÖ Implemented\n- ‚úÖ Local development setup\n- ‚úÖ Environment variables\n- ‚úÖ API documentation (partial)\n- ‚úÖ Cron job scheduler\n- ‚úÖ Health check endpoint\n- ‚úÖ Error logging\n- ‚úÖ Graceful shutdown\n\n#### ‚ùå Missing\n- ‚ùå Production deployment config\n- ‚ùå CI/CD pipeline\n- ‚ùå Docker containerization\n- ‚ùå Load balancing setup\n- ‚ùå CDN integration\n- ‚ùå Monitoring & alerting (Sentry, etc.)\n- ‚ùå Automated backups\n\n---\n\n### 5. Testing - **30% Complete** ‚ùå\n\n#### ‚ö†Ô∏è Minimal Testing\n- ‚ö†Ô∏è Some manual testin"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "g done\n- ‚ö†Ô∏è Basic endpoint testing\n- ‚ùå No automated unit tests\n- ‚ùå No integration tests\n- ‚ùå No E2E tests\n- ‚ùå No load testing\n- ‚ùå No security testing\n\n---\n\n### 6. Documentation - **75% Complete** ‚ö†Ô∏è\n\n#### ‚úÖ Good Documentation\n- ‚úÖ Auto-pay implementation guide\n- ‚úÖ Organizer onboarding flow\n- ‚úÖ Dashboard implementation guide\n- ‚úÖ Implementation summaries\n- ‚úÖ API endpoint documentation (in code)\n\n#### ‚ö†Ô∏è Missing Documentation\n- ‚ö†Ô∏è API documentation (Swagger/OpenAPI)\n- ‚ö†Ô∏è Frontend component documentation\n- ‚ö†Ô∏è User guides\n- ‚ö†Ô∏è Admin manual\n- ‚ö†Ô∏è Deployment guide\n\n---\n\n## üéØ Feature Completion Breakdown\n\n### Core Features (Must-Have for Launch)\n\n| Feature | Backend | Frontend | Status |\n|---------|---------|----------|--------|\n| User Registration/Login | 100% | 90% | ‚úÖ Almost Done |\n| Phone Verification | 100% | 0% | ‚ùå **Critical** |\n| Profile Management | 100% | 80% | ‚ö†Ô∏è Good |\n| Trip Listing | 100% | 90% | ‚úÖ Almost Done |\n| Trip Search | 100% | 70% | ‚ö†Ô∏è Good |\n| Trip Booking | 100% | 80% | ‚ö†Ô∏è"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "Good |\n| Payment Processing | 95% | 40% | ‚ö†Ô∏è Needs Work |\n| Auto-Pay Setup | 100% | 0% | ‚ùå **Critical** |\n| Subscription Management | 100% | 30% | ‚ö†Ô∏è Needs Work |\n| Organizer Dashboard | 100% | 60% | ‚ö†Ô∏è Needs Update |\n| Admin Dashboard | 100% | 70% | ‚ö†Ô∏è Good |\n\n### Advanced Features (Nice-to-Have)\n\n| Feature | Backend | Frontend | Status |\n|---------|---------|----------|--------|\n| Social Feed | 100% | 30% | ‚ö†Ô∏è Low Priority |\n| AI Recommendations | 100% | 40% | ‚ö†Ô∏è Low Priority |\n| CRM System | 100% | 50% | ‚ö†Ô∏è Medium Priority |\n| Chat Support | 100% | 40% | ‚ö†Ô∏è Medium Priority |\n| Analytics | 90% | 40% | ‚ö†Ô∏è Low Priority |\n| Reviews & Ratings | 100% | 60% | ‚ö†Ô∏è Medium Priority |\n\n---\n\n## üö® Critical Missing Components (Blockers for Launch)\n\n### 1. **Phone Verification Screen** ‚ùå CRITICAL\n**Impact:** High  \n**Effort:** 2-3 days  \n**Why Critical:** New mandatory requirement for all organizers. Without this, organizers cannot complete onboarding.\n\n**Required:**\n- Phone input with validation"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "- OTP input screen\n- Resend OTP functionality\n- Error handling\n- Success feedback\n\n### 2. **Auto-Pay Setup Screen** ‚ùå CRITICAL\n**Impact:** High  \n**Effort:** 3-4 days  \n**Why Critical:** Mandatory for organizers. Without this, they cannot use the platform after 60 days.\n\n**Required:**\n- Razorpay payment method integration\n- Auto-pay explanation\n- Payment schedule display\n- Terms acceptance\n- Success confirmation\n\n### 3. **Complete Profile Screen** ‚ùå CRITICAL\n**Impact:** High  \n**Effort:** 2-3 days  \n**Why Critical:** Required for Google OAuth users to select role and complete onboarding.\n\n**Required:**\n- Role selection (traveler/organizer)\n- Phone verification integration\n- Profile details form\n- Organizer-specific fields\n- Progress indicator\n\n### 4. **Updated Dashboards** ‚ö†Ô∏è HIGH PRIORITY\n**Impact:** Medium  \n**Effort:** 5-7 days  \n**Why Important:** New comprehensive dashboard APIs are ready but no frontend yet.\n\n**Required:**\n- Fetch and display new dashboard data\n- Alert notificati"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "on components\n- Quick action buttons with badges\n- Statistics cards\n- Profile completeness widget\n- Auto-pay status display\n\n### 5. **Payment Integration UI** ‚ö†Ô∏è HIGH PRIORITY\n**Impact:** High  \n**Effort:** 3-4 days  \n**Why Important:** Users need UI to actually make payments.\n\n**Required:**\n- Razorpay checkout integration\n- Payment success/failure handling\n- Receipt display\n- Payment history\n\n---\n\n## üìã Recommended Development Roadmap\n\n### Phase 1: Critical Fixes (2 weeks) - **Must Complete Before Launch**\n\n**Week 1:**\n1. Phone verification screen (2-3 days)\n2. Complete profile screen for Google OAuth (2-3 days)\n3. Auto-pay setup screen with Razorpay (3-4 days)\n\n**Week 2:**\n4. Payment integration UI throughout app (3-4 days)\n5. Update all dashboards with new data (3-4 days)\n6. Testing and bug fixes (ongoing)\n\n### Phase 2: Polish & Testing (2 weeks) - **Pre-Launch**\n\n**Week 3:**\n1. Comprehensive testing (E2E, integration)\n2. UI/UX polish and responsive design\n3. Error handling improveme"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "nts\n4. Performance optimization\n\n**Week 4:**\n5. Security audit\n6. Load testing\n7. Documentation completion\n8. User acceptance testing (UAT)\n\n### Phase 3: Launch Preparation (1 week)\n\n**Week 5:**\n1. Production deployment setup\n2. Monitoring and alerting\n3. Backup strategies\n4. Final testing in staging\n5. Soft launch\n\n### Phase 4: Post-Launch (Ongoing)\n\n1. Bug fixes and improvements\n2. User feedback incorporation\n3. Advanced features (social, AI, etc.)\n4. Mobile app development\n5. Scaling and optimization\n\n---\n\n## üí™ Platform Strengths\n\n1. **Robust Backend:** Comprehensive API with 34+ route endpoints\n2. **Advanced Features:** AI, CRM, auto-pay, subscriptions all working\n3. **Security:** Proper authentication, authorization, OTP verification\n4. **Scalability:** Well-structured code, proper separation of concerns\n5. **Modern Tech Stack:** Node.js, TypeScript, MongoDB, React\n6. **Payment Ready:** Razorpay fully integrated\n7. **Notifications:** Multiple channels (email, SMS, WhatsApp, push)"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "8. **Admin Tools:** Comprehensive moderation and management\n\n---\n\n## ‚ö†Ô∏è Platform Weaknesses\n\n1. **Frontend Gaps:** Critical onboarding screens missing\n2. **Testing:** Minimal automated testing\n3. **Documentation:** Missing API docs (Swagger)\n4. **DevOps:** No CI/CD or containerization\n5. **Mobile:** No mobile app yet\n6. **Analytics UI:** Backend ready, frontend minimal\n7. **Social Features:** Backend complete, frontend basic\n\n---\n\n## üìà Estimated Time to Launch\n\n### Minimum Viable Product (MVP):\n**4-6 weeks** (with 1 full-time frontend developer + backend support)\n\n### Polished Product:\n**8-12 weeks** (with full team: 2 frontend, 1 backend, 1 QA)\n\n### Full-Featured Platform:\n**16-20 weeks** (including mobile app, advanced analytics, etc.)\n\n---\n\n## üí∞ Estimated Costs\n\n### Development:\n- **MVP Launch:** $15,000 - $25,000 (freelancers/small team)\n- **Polished Product:** $40,000 - $60,000 (small team)\n- **Full Platform:** $80,000 - $120,000 (full team + mobile)\n\n### Infrastructure (Monthly):"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "- **Staging + Production:** $200 - $500/month\n  - Hosting (Render/AWS): $50-150\n  - Database (MongoDB Atlas): $50-100\n  - CDN (Cloudinary): $50-100\n  - Email (SendGrid): $15-30\n  - SMS (Twilio): $20-50\n  - Monitoring (Sentry): $25-50\n\n---\n\n## üéØ Recommendations\n\n### Immediate Actions (This Week):\n\n1. **Hire/Assign Frontend Developer** for critical screens\n2. **Prioritize phone verification screen** (most critical)\n3. **Create auto-pay setup flow** (second most critical)\n4. **Test existing features thoroughly**\n5. **Fix any critical bugs**\n\n### Short-Term (2-4 Weeks):\n\n1. Complete all critical frontend components\n2. Implement comprehensive testing\n3. Set up proper error monitoring\n4. Complete API documentation\n5. Prepare production environment\n\n### Medium-Term (1-3 Months):\n\n1. Launch MVP to limited users (beta)\n2. Gather feedback and iterate\n3. Polish UI/UX\n4. Add advanced analytics UI\n5. Improve performance\n\n### Long-Term (3-6 Months):\n\n1. Full public launch\n2. Mobile app development"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "3. Advanced social features\n4. Scaling and optimization\n5. International expansion prep\n\n---\n\n## ‚úÖ Current Status Summary\n\n**What's Working:**\n- Complete backend API ‚úÖ\n- Core booking flow ‚úÖ\n- Payment processing ‚úÖ\n- Admin/agent tools ‚úÖ\n- Basic frontend ‚úÖ\n\n**What's Missing:**\n- Critical onboarding screens ‚ùå\n- Payment UI components ‚ùå\n- Updated dashboards ‚ùå\n- Comprehensive testing ‚ùå\n- Production deployment ‚ùå\n\n**Bottom Line:**\nThe platform is **85% complete** with a very strong backend (~95%) but needs frontend work (~70%). With focused effort on the critical missing components, you could launch an MVP in **4-6 weeks**.\n\n---\n\n## üìä Visual Completion Chart\n\n```\nBackend API:          ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë 95%\nFrontend Web:         ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 70%\nDatabase:             ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë 90%\nDevOps:               ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 60%\nTesting:              ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 30%\nDocumentation:        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 75%\n\nOverall Platform:     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 85%"
  },
  {
    "source": "docs\\PROJECT_COMPLETION_STATUS.md",
    "text": "```\n\n---\n\n**Conclusion:** TrekTribe is a **highly functional platform** with excellent backend infrastructure. The main gap is frontend completion for new critical features (phone verification, auto-pay setup, profile completion). With 4-6 weeks of focused frontend development and testing, the platform is **ready for MVP launch**."
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport api from '../config/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport { Navigate } from 'react-router-dom';\n\ninterface PlatformAnalytics {\n  trips: { total: number; verified: number; active: number; pending: number };\n  users: { total: number; organizers: number; travelers: number; growth: number };\n  revenue: { total: number; thisMonth: number; subscriptions: number; growth: number };\n  subscriptions: { active: number; trials: number; expired: number; premium: number };\n  leads: { total: number; conversionRate: number };\n  performance: { avgResponseTime: string; supportLoad: number };\n}\n\ninterface Subscription {\n  _id: string;\n  organizerId: { name: string; email: string };\n  plan: string;\n  status: string;\n  subscriptionEndDate: string;\n  tripsUsed: number;\n  tripsPerCycle: number;\n  totalPaid: number;\n}\n\ninterface TripVerification {\n  _id: string;\n  tripId: { title: string; destination: string };\n  organizerId:"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "{ name: string };\n  status: string;\n  createdAt: string;\n}\n\nconst AdminCRMDashboard: React.FC = () => {\n  const { user } = useAuth();\n  const [activeTab, setActiveTab] = useState('overview');\n  const [analytics, setAnalytics] = useState<PlatformAnalytics | null>(null);\n  const [subscriptions, setSubscriptions] = useState<Subscription[]>([]);\n  const [verifications, setVerifications] = useState<TripVerification[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [revenueData, setRevenueData] = useState<any[]>([]);\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, [activeTab]);\n\n  const fetchDashboardData = async () => {\n    setLoading(true);\n    try {\n      if (activeTab === 'overview' || activeTab === 'analytics') {\n        const response = await api.get('/analytics/dashboard');\n        setAnalytics(response.data);\n      }\n      if (activeTab === 'revenue') {\n        const response = await api.get('/analytics/revenue');\n        setRevenueData(response.data.monthlyRevenue"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "|| []);\n      }\n      if (activeTab === 'subscriptions') {\n        const response = await api.get('/admin/subscriptions');\n        setSubscriptions(response.data.subscriptions || []);\n      }\n      if (activeTab === 'verifications') {\n        const response = await api.get('/admin/trip-verifications');\n        setVerifications(response.data.verifications || []);\n      }\n    } catch (error) {\n      console.error('Error fetching dashboard data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const tabs = [\n    { id: 'overview', name: 'Overview', icon: 'üìä' },\n    { id: 'analytics', name: 'Analytics', icon: 'üìà' },\n    { id: 'revenue', name: 'Revenue', icon: 'üí∞' },\n    { id: 'subscriptions', name: 'Subscriptions', icon: 'üí≥' },\n    { id: 'verifications', name: 'Verifications', icon: '‚úÖ' },\n    { id: 'users', name: 'Users', icon: 'üë•' },\n    { id: 'audit', name: 'Audit Logs', icon: 'üìã' },\n  ];\n\n  if (!user || user.role !== 'admin') {\n    return <Navigate to=\"/login\" replace /"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": ">;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-purple-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-20\">\n            <div>\n              <h1 className=\"text-3xl font-bold bg-gradient-to-r from-red-600 to-purple-600 bg-clip-text text-transparent\">\n                üõ†Ô∏è Admin Control Panel\n              </h1>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                Platform Management & Analytics\n              </p>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-3 h-3 rounded-full bg-green-400 animate-pulse\"></div>\n                <span className=\"text-sm text-gray-600\">System Online</span>\n              </div>\n            </div>\n          </div>\n        </div>"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "</div>\n\n      {/* Navigation Tabs */}\n      <div className=\"bg-white border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex space-x-8 overflow-x-auto\">\n            {tabs.map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`flex items-center gap-2 py-4 px-2 border-b-2 font-medium text-sm whitespace-nowrap transition-all ${\n                  activeTab === tab.id\n                    ? 'border-red-500 text-red-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                <span>{tab.icon}</span>\n                {tab.name}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {activeTab === 'overview' && (\n          <div>"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "{/* Key Metrics */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n              <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-gray-600\">Total Trips</p>\n                    <p className=\"text-3xl font-bold text-gray-900 mt-1\">\n                      {analytics?.trips.total || 0}\n                    </p>\n                    <p className=\"text-xs text-blue-600 mt-1\">\n                      {analytics?.trips.active || 0} active\n                    </p>\n                  </div>\n                  <div className=\"p-4 bg-blue-100 rounded-full\">\n                    <span className=\"text-3xl\">üó∫Ô∏è</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500\">\n                <d"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "iv className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-gray-600\">Total Users</p>\n                    <p className=\"text-3xl font-bold text-gray-900 mt-1\">\n                      {analytics?.users.total || 0}\n                    </p>\n                    <p className=\"text-xs text-green-600 mt-1\">\n                      ‚Üë {analytics?.users.growth || 0}% growth\n                    </p>\n                  </div>\n                  <div className=\"p-4 bg-green-100 rounded-full\">\n                    <span className=\"text-3xl\">üë•</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-gray-600\">Monthly Revenue</p>\n                    <p className=\"text-3xl font-bold text-gray-900 mt"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "-1\">\n                      ‚Çπ{(analytics?.revenue.thisMonth || 0).toLocaleString()}\n                    </p>\n                    <p className=\"text-xs text-purple-600 mt-1\">\n                      ‚Üë {analytics?.revenue.growth || 0}% MoM\n                    </p>\n                  </div>\n                  <div className=\"p-4 bg-purple-100 rounded-full\">\n                    <span className=\"text-3xl\">üí∞</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6 border-l-4 border-amber-500\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-gray-600\">Active Subscriptions</p>\n                    <p className=\"text-3xl font-bold text-gray-900 mt-1\">\n                      {analytics?.subscriptions.active || 0}\n                    </p>\n                    <p className=\"text-xs text-amber-600 mt-1\">\n                      {analyti"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "cs?.subscriptions.premium || 0} premium\n                    </p>\n                  </div>\n                  <div className=\"p-4 bg-amber-100 rounded-full\">\n                    <span className=\"text-3xl\">üí≥</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Quick Stats Grid */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <h3 className=\"text-xl font-bold text-gray-900 mb-4\">üìä Platform Health</h3>\n                <div className=\"space-y-4\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sm text-gray-600\">Verified Trips</span>\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"w-32 bg-gray-200 rounded-full h-2\">\n                        <div \n                          className=\"bg-green-600 h-2 rounded-full\""
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "style={{ width: `${((analytics?.trips.verified || 0) / (analytics?.trips.total || 1)) * 100}%` }}\n                        ></div>\n                      </div>\n                      <span className=\"text-sm font-semibold text-gray-900\">\n                        {((analytics?.trips.verified || 0) / (analytics?.trips.total || 1) * 100).toFixed(0)}%\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sm text-gray-600\">Premium Subscriptions</span>\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"w-32 bg-gray-200 rounded-full h-2\">\n                        <div \n                          className=\"bg-amber-600 h-2 rounded-full\"\n                          style={{ width: `${((analytics?.subscriptions.premium || 0) / (analytics?.subscriptions.active || 1)) * 100}%` }}"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "></div>\n                      </div>\n                      <span className=\"text-sm font-semibold text-gray-900\">\n                        {((analytics?.subscriptions.premium || 0) / (analytics?.subscriptions.active || 1) * 100).toFixed(0)}%\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sm text-gray-600\">Lead Conversion</span>\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"w-32 bg-gray-200 rounded-full h-2\">\n                        <div \n                          className=\"bg-blue-600 h-2 rounded-full\"\n                          style={{ width: `${analytics?.leads.conversionRate || 0}%` }}\n                        ></div>\n                      </div>\n                      <span className=\"text-sm font-semibold text-gray-900\">\n                        {analytics?.leads.conversionRate?"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": ".toFixed(1) || 0}%\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <h3 className=\"text-xl font-bold text-gray-900 mb-4\">‚ö° Quick Actions</h3>\n                <div className=\"space-y-3\">\n                  <button className=\"w-full text-left px-4 py-3 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors\">\n                    <div className=\"flex items-center gap-3\">\n                      <span className=\"text-2xl\">‚úÖ</span>\n                      <div>\n                        <p className=\"font-semibold text-gray-900 text-sm\">Verify Pending Trips</p>\n                        <p className=\"text-xs text-gray-600\">{analytics?.trips.pending || 0} pending</p>\n                      </div>\n                    </div>\n                  </button>\n\n                  <button className=\"w-full text-left px-4 py-3 bg-purple-50 hover:bg-purple"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "-100 rounded-lg transition-colors\">\n                    <div className=\"flex items-center gap-3\">\n                      <span className=\"text-2xl\">üìä</span>\n                      <div>\n                        <p className=\"font-semibold text-gray-900 text-sm\">View Revenue Report</p>\n                        <p className=\"text-xs text-gray-600\">12-month analysis</p>\n                      </div>\n                    </div>\n                  </button>\n\n                  <button className=\"w-full text-left px-4 py-3 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors\">\n                    <div className=\"flex items-center gap-3\">\n                      <span className=\"text-2xl\">üí≥</span>\n                      <div>\n                        <p className=\"font-semibold text-gray-900 text-sm\">Manage Subscriptions</p>\n                        <p className=\"text-xs text-gray-600\">{analytics?.subscriptions.active || 0} active</p>\n                      </div>\n                    </div>"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'analytics' && (\n          <div className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <p className=\"text-sm text-gray-600\">Total Revenue</p>\n                <p className=\"text-3xl font-bold text-gray-900 mt-2\">\n                  ‚Çπ{(analytics?.revenue.total || 0).toLocaleString()}\n                </p>\n                <p className=\"text-xs text-green-600 mt-1\">All-time earnings</p>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <p className=\"text-sm text-gray-600\">Organizers</p>\n                <p className=\"text-3xl font-bold text-blue-600 mt-2\">\n                  {analytics?.users.organizers || 0}\n                </p>\n                <p className=\"text-xs text-gray-500 mt-1\">"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "{((analytics?.users.organizers || 0) / (analytics?.users.total || 1) * 100).toFixed(0)}% of users\n                </p>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <p className=\"text-sm text-gray-600\">Travelers</p>\n                <p className=\"text-3xl font-bold text-green-600 mt-2\">\n                  {analytics?.users.travelers || 0}\n                </p>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  {((analytics?.users.travelers || 0) / (analytics?.users.total || 1) * 100).toFixed(0)}% of users\n                </p>\n              </div>\n            </div>\n\n            {/* Charts Placeholder */}\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-bold text-gray-900 mb-4\">üìà Growth Trends</h3>\n              <div className=\"h-80 flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg\">"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "<div className=\"text-center\">\n                  <p className=\"text-gray-500 text-lg mb-2\">Advanced Analytics Dashboard</p>\n                  <p className=\"text-gray-400 text-sm\">User growth, revenue trends, and conversion metrics</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'revenue' && (\n          <div className=\"space-y-6\">\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-bold text-gray-900 mb-4\">üí∞ Revenue Dashboard</h3>\n              \n              {loading ? (\n                <div className=\"text-center py-12\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto\"></div>\n                </div>\n              ) : revenueData.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <span className=\"text-4xl\">üìä</span>\n                  <p className=\"text-gray-500 mt-4\">No reve"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "nue data available</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {revenueData.slice(0, 12).map((month, index) => (\n                    <div key={index} className=\"flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg\">\n                      <div>\n                        <p className=\"font-semibold text-gray-900\">{month.month}</p>\n                        <p className=\"text-xs text-gray-600\">{month.subscriptions} subscriptions</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-2xl font-bold text-purple-600\">\n                          ‚Çπ{month.revenue.toLocaleString()}\n                        </p>\n                        {month.growth && (\n                          <p className={`text-xs ${month.growth > 0 ? 'text-green-600' : 'text-red-600'}`}>\n                            {month.growth > 0 ? '‚Üë' : '‚Üì'} {Math.abs(mo"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "nth.growth).toFixed(1)}%\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'subscriptions' && (\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">üí≥ Subscription Management</h3>\n              <select className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\">\n                <option>All Plans</option>\n                <option>Basic</option>\n                <option>Premium</option>\n                <option>Trial</option>\n              </select>\n            </div>\n\n            {loading ? (\n              <div className=\"text-center py-12\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto\"></div>"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "</div>\n            ) : subscriptions.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <span className=\"text-4xl\">üí≥</span>\n                <p className=\"text-gray-500 mt-4\">No subscriptions found</p>\n              </div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Organizer</th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Plan</th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Trips</th>\n                      <th className=\"px-6 py-3 text-left text-xs fon"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "t-medium text-gray-500 uppercase\">Revenue</th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Expires</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {subscriptions.map((sub) => (\n                      <tr key={sub._id} className=\"hover:bg-gray-50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div>\n                            <p className=\"text-sm font-medium text-gray-900\">{sub.organizerId.name}</p>\n                            <p className=\"text-xs text-gray-500\">{sub.organizerId.email}</p>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <span className={`px-2 py-1 text-xs font-semibold rounded-full ${\n                            sub.plan === 'premium' ? 'bg-amber-100 text"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "-amber-800' : 'bg-blue-100 text-blue-800'\n                          }`}>\n                            {sub.plan.toUpperCase()}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <span className={`px-2 py-1 text-xs font-semibold rounded-full ${\n                            sub.status === 'active' ? 'bg-green-100 text-green-800' :\n                            sub.status === 'trial' ? 'bg-purple-100 text-purple-800' :\n                            'bg-red-100 text-red-800'\n                          }`}>\n                            {sub.status.toUpperCase()}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                          {sub.tripsUsed} / {sub.tripsPerCycle}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-semibol"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "d text-gray-900\">\n                          ‚Çπ{sub.totalPaid.toLocaleString()}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-xs text-gray-500\">\n                          {new Date(sub.subscriptionEndDate).toLocaleDateString()}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'verifications' && (\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">‚úÖ Trip Verifications</h3>\n              <select className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\">\n                <option>All Status</option>\n                <option>Pending</option>\n                <option>Approved</option>\n                <option>Rejected</option>"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "</select>\n            </div>\n\n            {loading ? (\n              <div className=\"text-center py-12\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n              </div>\n            ) : verifications.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <span className=\"text-4xl\">‚úÖ</span>\n                <p className=\"text-gray-500 mt-4\">No pending verifications</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {verifications.map((verification) => (\n                  <div key={verification._id} className=\"p-4 bg-gray-50 rounded-lg border border-gray-200\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <p className=\"font-semibold text-gray-900\">{verification.tripId.title}</p>\n                        <p className=\"text-sm text-gray-600\">üìç"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "{verification.tripId.destination}</p>\n                        <p className=\"text-xs text-gray-500 mt-1\">\n                          By: {verification.organizerId.name}\n                        </p>\n                      </div>\n                      <div className=\"flex flex-col items-end gap-2\">\n                        <span className={`px-2 py-1 text-xs font-semibold rounded-full ${\n                          verification.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                          verification.status === 'approved' ? 'bg-green-100 text-green-800' :\n                          'bg-red-100 text-red-800'\n                        }`}>\n                          {verification.status.toUpperCase()}\n                        </span>\n                        <p className=\"text-xs text-gray-500\">\n                          {new Date(verification.createdAt).toLocaleDateString()}\n                        </p>\n                        {verification.status === 'pending' && ("
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "<div className=\"flex gap-2 mt-2\">\n                            <button className=\"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700\">\n                              Approve\n                            </button>\n                            <button className=\"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700\">\n                              Reject\n                            </button>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'users' && (\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <h3 className=\"text-xl font-bold text-gray-900 mb-4\">üë• User Management</h3>\n            <div className=\"text-center py-12\">\n              <span className=\"text-4xl\">üë•</span>\n              <p className=\"text-gray-500 mt-4\">User manag"
  },
  {
    "source": "web\\src\\pages\\AdminCRMDashboard.tsx",
    "text": "ement features coming soon...</p>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'audit' && (\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <h3 className=\"text-xl font-bold text-gray-900 mb-4\">üìã Audit Logs</h3>\n            <div className=\"text-center py-12\">\n              <span className=\"text-4xl\">üìã</span>\n              <p className=\"text-gray-500 mt-4\">Audit log viewer coming soon...</p>\n              <p className=\"text-xs text-gray-400 mt-2\">Track all admin actions, payment operations, and user authentication events</p>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminCRMDashboard;"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { io, Socket } from 'socket.io-client';\nimport api from '../config/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport { Navigate } from 'react-router-dom';\n\ninterface UserContact {\n  _id: string;\n  name: string;\n  email: string;\n  phone?: string;\n  role: string;\n  isVerified: boolean;\n  location?: string;\n  dateOfBirth?: string;\n  emergencyContact?: {\n    name: string;\n    relationship: string;\n    phone: string;\n    email?: string;\n  };\n  createdAt: string;\n  lastActive?: string;\n}\n\ninterface Trip {\n  _id: string;\n  title: string;\n  destination: string;\n  price: number;\n  status: 'active' | 'cancelled' | 'completed';\n  participants: string[];\n  organizerId: {\n    _id: string;\n    name: string;\n    email: string;\n  };\n  startDate: string;\n  endDate: string;\n  createdAt: string;\n  categories: string[];\n}\n\ninterface DashboardStats {\n  users: {\n    total: number;\n    byRole: { role: string; count: number }[];\n    rece"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "ntUsers: any[];\n  };\n  trips: {\n    total: number;\n    byStatus: { status: string; count: number }[];\n    recentTrips: any[];\n  };\n  bookings: {\n    total: number;\n    revenue: number;\n    recentBookings: any[];\n  };\n  system: {\n    uptime: number;\n    memoryUsage: any;\n    dbStatus: string;\n    whatsappStatus: boolean;\n  };\n}\n\nconst AdminDashboard: React.FC = () => {\n  const { user } = useAuth();\n  const [stats, setStats] = useState<DashboardStats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [activeTab, setActiveTab] = useState('overview');\n  const [userContacts, setUserContacts] = useState<UserContact[]>([]);\n  const [contactsLoading, setContactsLoading] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [roleFilter, setRoleFilter] = useState('all');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [socket, setSocket] = useState<Socket | null>(null);\n  const [notifications, s"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "etNotifications] = useState<Array<{ id: string; message: string; type: 'success' | 'info' | 'error'; timestamp: Date }>>([]);\n  \n  // Trips management state\n  const [trips, setTrips] = useState<Trip[]>([]);\n  const [tripsLoading, setTripsLoading] = useState(false);\n  const [tripSearchQuery, setTripSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [tripCurrentPage, setTripCurrentPage] = useState(1);\n\n  useEffect(() => {\n    if (user && user.role === 'admin') {\n      fetchDashboardStats();\n      initializeSocket();\n    }\n    \n    return () => {\n      if (socket) {\n        socket.disconnect();\n      }\n    };\n  }, [user]);\n  \n  const initializeSocket = () => {\n    const token = localStorage.getItem('token');\n    if (!token) return;\n\n    const newSocket = io(process.env.REACT_APP_API_URL || 'https://trek-tribe-38in.onrender.com', {\n      auth: { token },\n      path: '/socket.io/'\n    });\n\n    newSocket.on('connect', () => {\n      console.log('üîå"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "Admin dashboard connected to real-time updates');\n    });\n\n    newSocket.on('admin_update', (data) => {\n      console.log('üìà Admin update received:', data);\n      addNotification(`System Update: ${data.type}`, 'info');\n      fetchDashboardStats(); // Refresh stats\n    });\n\n    newSocket.on('trip_update', (data) => {\n      if (data.type === 'created') {\n        addNotification(`New trip created: ${data.trip.title}`, 'success');\n        fetchDashboardStats();\n      }\n    });\n\n    newSocket.on('error', (error) => {\n      console.error('Admin socket error:', error);\n    });\n\n    setSocket(newSocket);\n  };\n  \n  const addNotification = (message: string, type: 'success' | 'info' | 'error') => {\n    const notification = {\n      id: Date.now().toString(),\n      message,\n      type,\n      timestamp: new Date()\n    };\n    \n    setNotifications(prev => [notification, ...prev.slice(0, 4)]); // Keep only 5 most recent\n    \n    // Auto-remove after 5 seconds\n    setTimeout(() => {\n      setNotificati"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "ons(prev => prev.filter(n => n.id !== notification.id));\n    }, 5000);\n  };\n\n  const fetchDashboardStats = async () => {\n    try {\n      const [statsRes] = await Promise.all([\n        api.get('/admin/stats')\n      ]);\n\n      const data = statsRes.data as {\n        users: { total: number; byRole: any[]; recentUsers: any[] };\n        trips: { total: number; byStatus: any[]; recentTrips: any[]; totalBookings?: number; totalRevenue?: number; recentBookings?: any[] };\n      };\n      setStats({\n        users: data.users,\n        trips: data.trips,\n        bookings: {\n          total: data.trips.totalBookings || 0,\n          revenue: data.trips.totalRevenue || 0,\n          recentBookings: data.trips.recentBookings || []\n        },\n        system: {\n          uptime: 0,\n          memoryUsage: {},\n          dbStatus: 'connected',\n          whatsappStatus: false\n        }\n      });\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to fetch dashboard stats');\n    } fina"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "lly {\n      setLoading(false);\n    }\n  };\n\n  const fetchUserContacts = async () => {\n    setContactsLoading(true);\n    try {\n      const params = new URLSearchParams();\n      params.append('page', currentPage.toString());\n      params.append('limit', '50');\n      if (searchQuery) params.append('search', searchQuery);\n      if (roleFilter !== 'all') params.append('role', roleFilter);\n\n      const response = await api.get(`/admin/users/contacts?${params.toString()}`);\n      const responseData = response.data as { users: any[] };\n      setUserContacts(responseData.users);\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to fetch user contacts');\n    } finally {\n      setContactsLoading(false);\n    }\n  };\n\n  const exportUserContacts = async () => {\n    try {\n      const params = new URLSearchParams();\n      if (roleFilter !== 'all') params.append('role', roleFilter);\n\n      const response = await api.get(`/admin/users/export-contacts?${params.toString()}`, {"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "responseType: 'blob'\n      });\n\n      const blob = new Blob([response.data as BlobPart], { type: 'text/csv' });\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `trek-tribe-users-${new Date().toISOString().split('T')[0]}.csv`;\n      link.click();\n      window.URL.revokeObjectURL(url);\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to export user contacts');\n    }\n  };\n\n  const fetchTrips = async () => {\n    setTripsLoading(true);\n    try {\n      const params = new URLSearchParams();\n      params.append('page', tripCurrentPage.toString());\n      params.append('limit', '20');\n      if (tripSearchQuery) params.append('search', tripSearchQuery);\n      if (statusFilter !== 'all') params.append('status', statusFilter);\n\n      const response = await api.get(`/admin/trips?${params.toString()}`);\n      const responseData = response.data as { trips: Trip[] };\n      s"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "etTrips(responseData.trips);\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to fetch trips');\n    } finally {\n      setTripsLoading(false);\n    }\n  };\n\n  const updateTripStatus = async (tripId: string, newStatus: string) => {\n    try {\n      await api.patch(`/admin/trips/${tripId}/status`, { status: newStatus });\n      addNotification(`Trip status updated to ${newStatus}`, 'success');\n      fetchTrips(); // Refresh trips list\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to update trip status');\n    }\n  };\n\n  // Fetch contacts when users tab is active\n  React.useEffect(() => {\n    if (activeTab === 'users') {\n      fetchUserContacts();\n    }\n  }, [activeTab, currentPage, searchQuery, roleFilter]);\n\n  // Fetch trips when trips tab is active\n  React.useEffect(() => {\n    if (activeTab === 'trips') {\n      fetchTrips();\n    }\n  }, [activeTab, tripCurrentPage, tripSearchQuery, statusFilter]);\n\n  const formatBytes = (bytes: number"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": ") => {\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    if (bytes === 0) return '0 Bytes';\n    const i = Math.floor(Math.log(bytes) / Math.log(1024));\n    return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];\n  };\n\n  const formatUptime = (seconds: number) => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    return `${hours}h ${minutes}m`;\n  };\n\n  const TripsManagement = () => (\n    <div className=\"space-y-6\">\n      {/* Trips Header */}\n      <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n        <div className=\"flex justify-between items-start mb-4\">\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900\">üó∫Ô∏è Trips Management</h3>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Manage all trips across the platform, update status, and view organizer details.\n            </p>\n          </div>\n        </div>\n\n        {/* Search and Filters */}\n        <di"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "v className=\"flex gap-4 mb-4\">\n          <div className=\"flex-1\">\n            <input\n              type=\"text\"\n              placeholder=\"Search trips by title or destination...\"\n              value={tripSearchQuery}\n              onChange={(e) => setTripSearchQuery(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-forest-500 focus:border-forest-500\"\n            />\n          </div>\n          <select\n            value={statusFilter}\n            onChange={(e) => setStatusFilter(e.target.value)}\n            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-forest-500 focus:border-forest-500\"\n          >\n            <option value=\"all\">All Status</option>\n            <option value=\"active\">Active</option>\n            <option value=\"cancelled\">Cancelled</option>\n            <option value=\"completed\">Completed</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Trips Table */}"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "<div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\n        {tripsLoading ? (\n          <div className=\"flex items-center justify-center py-12\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-forest-600\"></div>\n            <span className=\"ml-3 text-gray-600\">Loading trips...</span>\n          </div>\n        ) : trips.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <span className=\"text-gray-500\">No trips found matching your criteria.</span>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Trip Details\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 upperca"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "se tracking-wider\">\n                    Organizer\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Status & Price\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Participants\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {trips.map((trip) => (\n                  <tr key={trip._id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-start\">\n                        <div>\n                          <div className=\"text-sm font-medium t"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "ext-gray-900\">{trip.title}</div>\n                          <div className=\"text-sm text-gray-500\">üìç {trip.destination}</div>\n                          <div className=\"text-xs text-gray-400 mt-1\">\n                            {new Date(trip.startDate).toLocaleDateString()} - {new Date(trip.endDate).toLocaleDateString()}\n                          </div>\n                          {trip.categories && trip.categories.length > 0 && (\n                            <div className=\"flex flex-wrap gap-1 mt-1\">\n                              {trip.categories.slice(0, 3).map((category, idx) => (\n                                <span key={idx} className=\"inline-flex px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full\">\n                                  {category}\n                                </span>\n                              ))}\n                              {trip.categories.length > 3 && (\n                                <span className=\"text-xs text-gray-400\">+{trip.categories.length - 3}"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "more</span>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 h-8 w-8\">\n                          <div className=\"h-8 w-8 rounded-full bg-gradient-to-br from-forest-400 to-nature-500 flex items-center justify-center text-white text-sm font-bold\">\n                            {trip.organizerId.name.charAt(0).toUpperCase()}\n                          </div>\n                        </div>\n                        <div className=\"ml-3\">\n                          <div className=\"text-sm font-medium text-gray-900\">{trip.organizerId.name}</div>\n                          <div className=\"text-sm text-gray-500\">{trip.organizerId.email}</div>\n                        </div>\n                      </div>"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "</td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"space-y-2\">\n                        <div className={`inline-flex px-2 py-1 text-xs rounded-full ${\n                          trip.status === 'active' ? 'bg-green-100 text-green-800' :\n                          trip.status === 'cancelled' ? 'bg-red-100 text-red-800' :\n                          'bg-blue-100 text-blue-800'\n                        }`}>\n                          {trip.status.toUpperCase()}\n                        </div>\n                        <div className=\"text-sm font-medium text-gray-900\">\n                          ‚Çπ{trip.price.toLocaleString()}\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"text-sm text-gray-900\">\n                        <span className=\"font-medium\">{trip.participants.length}</span> participants\n                      </div>"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "<div className=\"text-xs text-gray-500\">\n                        Revenue: ‚Çπ{(trip.participants.length * trip.price).toLocaleString()}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        {trip.status === 'active' && (\n                          <>\n                            <button\n                              onClick={() => updateTripStatus(trip._id, 'completed')}\n                              className=\"text-blue-600 hover:text-blue-900 text-sm font-medium\"\n                            >\n                              Complete\n                            </button>\n                            <span className=\"text-gray-300\">|</span>\n                            <button\n                              onClick={() => updateTripStatus(trip._id, 'cancelled')}\n                              className=\"text-red-600 hover:text-red-900 text-sm"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "font-medium\"\n                            >\n                              Cancel\n                            </button>\n                          </>\n                        )}\n                        {trip.status === 'cancelled' && (\n                          <button\n                            onClick={() => updateTripStatus(trip._id, 'active')}\n                            className=\"text-green-600 hover:text-green-900 text-sm font-medium\"\n                          >\n                            Reactivate\n                          </button>\n                        )}\n                        {trip.status === 'completed' && (\n                          <span className=\"text-sm text-gray-400\">No actions</span>\n                        )}\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  // Redirect if not admin (after all hooks)\n  if (!use"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "r || user.role !== 'admin') {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-forest-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading admin dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-red-500 text-xl mb-4\">‚ö†Ô∏è Error</div>\n          <p className=\"text-gray-600\">{error}</p>\n          <button \n            onClick={fetchDashboardStats}\n            className=\"mt-4 bg-forest-600 text-white px-4 py-2 rounded-lg hover:bg-forest-700\"\n          >\n            Retry\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <h1 className=\"text-2xl font-bold text-gray-900\">\n              üõ†Ô∏è Admin Dashboard\n            </h1>\n            <div className=\"flex items-center gap-4\">\n              <span className=\"text-sm text-gray-500\">\n                Welcome back, {user.name}\n              </span>\n              <div className=\"flex items-center gap-2\">\n                <div className={`w-3 h-3 rounded-full ${stats?.system.whatsappStatus ? 'bg-green-400' : 'bg-red-400'}`}></div>\n                <span className=\"text-sm text-gray-600\">\n                  WhatsApp {stats?.system.whatsappStatus ? 'Connected' : 'Disconnected'}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Navigation Tabs */}\n      <div className"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6\">\n        <div className=\"flex space-x-8 border-b border-gray-200\">\n          {[\n            { id: 'overview', name: 'Overview', icon: 'üìä' },\n            { id: 'users', name: 'Users', icon: 'üë•' },\n            { id: 'trips', name: 'Trips', icon: 'üó∫Ô∏è' },\n            { id: 'system', name: 'System', icon: '‚öôÔ∏è' }\n          ].map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === tab.id\n                  ? 'border-forest-500 text-forest-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <span>{tab.icon}</span>\n              {tab.name}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "lg:px-8 py-6\">\n        {activeTab === 'overview' && (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {/* Stats Cards */}\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n              <div className=\"flex items-center\">\n                <div className=\"p-3 rounded-full bg-blue-100\">\n                  <span className=\"text-2xl\">üë•</span>\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-500\">Total Users</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats?.users.total || 0}</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n              <div className=\"flex items-center\">\n                <div className=\"p-3 rounded-full bg-green-100\">\n                  <span className=\"text-2xl\">üó∫Ô∏è</span>\n                </div>\n                <div classN"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "ame=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-500\">Total Trips</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats?.trips.total || 0}</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n              <div className=\"flex items-center\">\n                <div className=\"p-3 rounded-full bg-purple-100\">\n                  <span className=\"text-2xl\">üìÖ</span>\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-500\">Total Bookings</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats?.bookings.total || 0}</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n              <div className=\"flex items-center\">\n                <div className=\"p-3 rounded-full bg-yellow-100\">"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "<span className=\"text-2xl\">üí∞</span>\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-500\">Total Revenue</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">‚Çπ{stats?.bookings.revenue?.toLocaleString() || 0}</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Charts Section */}\n            <div className=\"col-span-full grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6\">\n              {/* Users by Role */}\n              <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">üë• Users by Role</h3>\n                <div className=\"space-y-3\">\n                  {stats?.users.byRole?.map((item) => (\n                    <div key={item.role} className=\"flex justify-between items-center\">\n                      <span className=\"text-sm text-gray-600 capitalize\">{item.role}</span>"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "<div className=\"flex items-center gap-2\">\n                        <div className=\"w-16 bg-gray-200 rounded-full h-2\">\n                          <div \n                            className=\"bg-forest-600 h-2 rounded-full\" \n                            style={{width: `${(item.count / (stats?.users.total || 1)) * 100}%`}}\n                          ></div>\n                        </div>\n                        <span className=\"text-sm font-medium text-gray-900\">{item.count}</span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Trips by Status */}\n              <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">üó∫Ô∏è Trips by Status</h3>\n                <div className=\"space-y-3\">\n                  {stats?.trips.byStatus?.map((item) => (\n                    <div key={item.status} className=\"flex justify-between items-c"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "enter\">\n                      <span className=\"text-sm text-gray-600 capitalize\">{item.status}</span>\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"w-16 bg-gray-200 rounded-full h-2\">\n                          <div \n                            className={`h-2 rounded-full ${\n                              item.status === 'active' ? 'bg-green-600' : \n                              item.status === 'cancelled' ? 'bg-red-600' : 'bg-blue-600'\n                            }`}\n                            style={{width: `${(item.count / (stats?.trips.total || 1)) * 100}%`}}\n                          ></div>\n                        </div>\n                        <span className=\"text-sm font-medium text-gray-900\">{item.count}</span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'users' && ("
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "<div className=\"space-y-6\">\n            {/* User Contacts Header */}\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n              <div className=\"flex justify-between items-start mb-4\">\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900\">üë• User Contact Information</h3>\n                  <p className=\"text-sm text-red-600 font-medium mt-1\">\n                    ‚ö†Ô∏è This section contains sensitive user data. All access is logged and monitored.\n                  </p>\n                </div>\n                <button\n                  onClick={exportUserContacts}\n                  className=\"bg-forest-600 text-white px-4 py-2 rounded-lg hover:bg-forest-700 transition-colors\"\n                >\n                  üìÑ Export CSV\n                </button>\n              </div>\n\n              {/* Search and Filters */}\n              <div className=\"flex gap-4 mb-4\">\n                <div className=\"flex-1\">\n                  <input"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "type=\"text\"\n                    placeholder=\"Search users by name, email, or phone...\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-forest-500 focus:border-forest-500\"\n                  />\n                </div>\n                <select\n                  value={roleFilter}\n                  onChange={(e) => setRoleFilter(e.target.value)}\n                  className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-forest-500 focus:border-forest-500\"\n                >\n                  <option value=\"all\">All Roles</option>\n                  <option value=\"traveler\">Travelers</option>\n                  <option value=\"organizer\">Organizers</option>\n                  <option value=\"agent\">Agents</option>\n                  <option value=\"admin\">Admins</option>\n                </select>"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "</div>\n            </div>\n\n            {/* User Contacts Table */}\n            <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\n              {contactsLoading ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-forest-600\"></div>\n                  <span className=\"ml-3 text-gray-600\">Loading user contacts...</span>\n                </div>\n              ) : userContacts.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <span className=\"text-gray-500\">No users found matching your criteria.</span>\n                </div>\n              ) : (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-med"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "ium text-gray-500 uppercase tracking-wider\">\n                          User Details\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Contact Information\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Emergency Contact\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Status\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                      {userContacts.map((contact) => (\n                        <tr key={contact._id} className=\"hover:bg-gray-50\">\n                          <td className=\"px-6 py-4"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "whitespace-nowrap\">\n                            <div className=\"flex items-center\">\n                              <div className=\"flex-shrink-0 h-10 w-10\">\n                                <div className=\"h-10 w-10 rounded-full bg-gradient-to-br from-forest-400 to-nature-500 flex items-center justify-center text-white font-bold\">\n                                  {contact.name.charAt(0).toUpperCase()}\n                                </div>\n                              </div>\n                              <div className=\"ml-4\">\n                                <div className=\"text-sm font-medium text-gray-900\">{contact.name}</div>\n                                <div className=\"text-sm text-gray-500 capitalize\">\n                                  <span className={`inline-flex px-2 py-1 text-xs rounded-full ${\n                                    contact.role === 'admin' ? 'bg-red-100 text-red-800' :\n                                    contact.role === 'organizer' ? 'bg-blue-100 text-blue-8"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "00' :\n                                    contact.role === 'agent' ? 'bg-purple-100 text-purple-800' :\n                                    'bg-gray-100 text-gray-800'\n                                  }`}>\n                                    {contact.role}\n                                  </span>\n                                </div>\n                              </div>\n                            </div>\n                          </td>\n                          <td className=\"px-6 py-4\">\n                            <div className=\"space-y-1\">\n                              <div className=\"text-sm text-gray-900\">\n                                üìß {contact.email}\n                              </div>\n                              {contact.phone && (\n                                <div className=\"text-sm text-gray-900\">\n                                  üì± {contact.phone}\n                                </div>\n                              )}\n                              {contact.locatio"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "n && (\n                                <div className=\"text-sm text-gray-500\">\n                                  üìç {contact.location}\n                                </div>\n                              )}\n                            </div>\n                          </td>\n                          <td className=\"px-6 py-4\">\n                            {contact.emergencyContact ? (\n                              <div className=\"space-y-1\">\n                                <div className=\"text-sm text-gray-900\">\n                                  {contact.emergencyContact.name}\n                                </div>\n                                <div className=\"text-sm text-gray-500\">\n                                  ({contact.emergencyContact.relationship})\n                                </div>\n                                <div className=\"text-sm text-gray-900\">\n                                  üìû {contact.emergencyContact.phone}\n                                </div>"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "{contact.emergencyContact.email && (\n                                  <div className=\"text-sm text-gray-500\">\n                                    üìß {contact.emergencyContact.email}\n                                  </div>\n                                )}\n                              </div>\n                            ) : (\n                              <span className=\"text-sm text-gray-400\">Not provided</span>\n                            )}\n                          </td>\n                          <td className=\"px-6 py-4\">\n                            <div className=\"space-y-2\">\n                              <div className={`inline-flex px-2 py-1 text-xs rounded-full ${\n                                contact.isVerified ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'\n                              }`}>\n                                {contact.isVerified ? '‚úÖ Verified' : '‚è≥ Unverified'}\n                              </div>"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "<div className=\"text-xs text-gray-500\">\n                                Joined: {new Date(contact.createdAt).toLocaleDateString()}\n                              </div>\n                              {contact.lastActive && (\n                                <div className=\"text-xs text-gray-500\">\n                                  Last active: {new Date(contact.lastActive).toLocaleDateString()}\n                                </div>\n                              )}\n                            </div>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </div>\n\n            {/* Security Notice */}\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n              <div className=\"flex\">\n                <div className=\"flex-shrink-0\">\n                  <span className=\"text-red-400 text-xl\">‚ö†Ô∏è</span>\n                </div>"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "<div className=\"ml-3\">\n                  <h3 className=\"text-sm font-medium text-red-800\">\n                    Data Privacy Notice\n                  </h3>\n                  <div className=\"mt-2 text-sm text-red-700\">\n                    <p>\n                      This page contains sensitive personal information including phone numbers, email addresses, and emergency contacts. \n                      Access to this data is restricted to administrators only and all activity is logged for security purposes.\n                    </p>\n                    <p className=\"mt-2\">\n                      Please ensure you comply with data protection regulations and only use this information for legitimate business purposes.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'trips' && (\n          <TripsManagement />\n        )}\n\n        {activeTab === 'system' && ("
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "<div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* System Status */}\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">‚öôÔ∏è System Status</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-600\">Uptime</span>\n                  <span className=\"text-sm font-medium text-gray-900\">\n                    {formatUptime(stats?.system.uptime || 0)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-600\">Database Status</span>\n                  <span className={`text-sm font-medium ${\n                    stats?.system.dbStatus === 'connected' ? 'text-green-600' : 'text-red-600'\n                  }`}>\n                    {stats?.system.dbStatus || 'unknown"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-600\">WhatsApp Service</span>\n                  <span className={`text-sm font-medium ${\n                    stats?.system.whatsappStatus ? 'text-green-600' : 'text-red-600'\n                  }`}>\n                    {stats?.system.whatsappStatus ? 'Connected' : 'Disconnected'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-600\">Memory Usage</span>\n                  <span className=\"text-sm font-medium text-gray-900\">\n                    {formatBytes(stats?.system.memoryUsage?.used || 0)} / {formatBytes(stats?.system.memoryUsage?.total || 0)}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            {/* Quick Actions */}\n            <div className=\"bg-w"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "hite p-6 rounded-lg shadow-sm border\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">üöÄ Quick Actions</h3>\n              <div className=\"space-y-3\">\n                <button \n                  onClick={fetchDashboardStats}\n                  className=\"w-full text-left px-4 py-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors\"\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <span className=\"text-xl\">üîÑ</span>\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">Refresh Statistics</div>\n                      <div className=\"text-xs text-gray-500\">Update all dashboard data</div>\n                    </div>\n                  </div>\n                </button>\n                \n                <button className=\"w-full text-left px-4 py-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors\">\n                  <div className=\"flex items-cente"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "r gap-3\">\n                    <span className=\"text-xl\">üìä</span>\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">Export Data</div>\n                      <div className=\"text-xs text-gray-500\">Download system reports</div>\n                    </div>\n                  </div>\n                </button>\n\n                <button className=\"w-full text-left px-4 py-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors\">\n                  <div className=\"flex items-center gap-3\">\n                    <span className=\"text-xl\">üßπ</span>\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">System Cleanup</div>\n                      <div className=\"text-xs text-gray-500\">Clean temporary files and logs</div>\n                    </div>\n                  </div>\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexp"
  },
  {
    "source": "web\\src\\pages\\AdminDashboard.tsx",
    "text": "ort default AdminDashboard;"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport api from '../config/api';\nimport {\n  MessageSquare, \n  User, \n  Clock, \n  CheckCircle, \n  AlertTriangle, \n  Phone,\n  Mail,\n  Search,\n  Send,\n  Star,\n  Loader,\n  RefreshCw,\n  BarChart3,\n  Headphones,\n  TrendingUp\n} from 'lucide-react';\n\ninterface AgentStats {\n  tickets: {\n    total: number;\n    open: number;\n    inProgress: number;\n    resolved: number;\n    unassigned: number;\n  };\n  performance: {\n    avgResolutionTimeHours: number;\n    avgSatisfactionRating: number;\n    resolvedLast30Days: number;\n  };\n  recentActivity: any[];\n}\n\ninterface Ticket {\n  _id: string;\n  ticketId: string;\n  subject: string;\n  status: string;\n  priority: string;\n  category: string;\n  customerName: string;\n  customerEmail: string;\n  customerPhone?: string;\n  assignedAgentId?: any;\n  createdAt: string;\n  updatedAt: string;\n  messages: any[];\n  relatedTripId?: any;\n}\n\ninterface Customer {\n  _id: string;\n  name: string;\n  email: string;\n  phone?: string;"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "role: string;\n  createdAt: string;\n}\n\nconst AgentDashboard: React.FC = () => {\n  const [activeTab, setActiveTab] = useState('dashboard');\n  const [stats, setStats] = useState<AgentStats | null>(null);\n  const [tickets, setTickets] = useState<Ticket[]>([]);\n  const [selectedTicket, setSelectedTicket] = useState<Ticket | null>(null);\n  const [customers, setCustomers] = useState<Customer[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  \n  // Filters and search\n  const [filters, setFilters] = useState({\n    status: 'all',\n    priority: 'all',\n    category: 'all',\n    assigned: 'me',\n    search: ''\n  });\n  \n  // Pagination\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  \n  // Message form\n  const [newMessage, setNewMessage] = useState('');\n  const [sendingMessage, setSendingMessage] = useState(false);\n\n  // Communication tools\n  const [whatsappMessage, setWhatsappMessage] = useSta"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "te({ phone: '', message: '' });\n  const [searchCustomers, setSearchCustomers] = useState('');\n  const [customerSearchResults, setCustomerSearchResults] = useState<Customer[]>([]);\n\n  // Service status\n  const [serviceStatus, setServiceStatus] = useState<any>(null);\n\n  const fetchAgentStats = async () => {\n    try {\n      const response = await api.get('/agent/stats');\n      const statsData = response.data as AgentStats;\n      setStats(statsData);\n    } catch (error: any) {\n      console.error('Error fetching agent stats:', error);\n      setError('Failed to load agent dashboard. Please check your authentication.');\n    }\n  };\n\n  const fetchTickets = async (page = 1) => {\n    try {\n      setLoading(true);\n      const params = new URLSearchParams({\n        page: page.toString(),\n        limit: '20',\n        ...filters\n      });\n      \n      const response = await api.get(`/agent/tickets?${params}`);\n      const ticketData = response.data as { tickets: Ticket[]; pagination: { current: numb"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "er; pages: number } };\n      setTickets(ticketData.tickets);\n      setCurrentPage(ticketData.pagination.current);\n      setTotalPages(ticketData.pagination.pages);\n    } catch (error: any) {\n      setError(error.response?.data?.error || 'Failed to fetch tickets');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchTicketDetails = async (ticketId: string) => {\n    try {\n      const response = await api.get(`/agent/tickets/${ticketId}`);\n      const ticketData = response.data as { ticket: Ticket };\n      setSelectedTicket(ticketData.ticket);\n    } catch (error: any) {\n      setError(error.response?.data?.error || 'Failed to fetch ticket details');\n    }\n  };\n\n  const assignTicket = async (ticketId: string) => {\n    try {\n      await api.post(`/agent/tickets/${ticketId}/assign`);\n      fetchTickets(currentPage);\n      if (selectedTicket?.ticketId === ticketId) {\n        fetchTicketDetails(ticketId);\n      }\n    } catch (error: any) {\n      setError(error.response?.data?.err"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "or || 'Failed to assign ticket');\n    }\n  };\n\n  const updateTicketStatus = async (ticketId: string, status: string) => {\n    try {\n      await api.patch(`/agent/tickets/${ticketId}/status`, { status });\n      fetchTickets(currentPage);\n      if (selectedTicket?.ticketId === ticketId) {\n        fetchTicketDetails(ticketId);\n      }\n    } catch (error: any) {\n      setError(error.response?.data?.error || 'Failed to update ticket status');\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!selectedTicket || !newMessage.trim()) return;\n    \n    try {\n      setSendingMessage(true);\n      await api.post(`/agent/tickets/${selectedTicket.ticketId}/messages`, {\n        message: newMessage\n      });\n      setNewMessage('');\n      fetchTicketDetails(selectedTicket.ticketId);\n    } catch (error: any) {\n      setError(error.response?.data?.error || 'Failed to send message');\n    } finally {\n      setSendingMessage(false);\n    }\n  };\n\n  const searchCustomer = async (query: string) => {\n    if"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "(query.length < 2) {\n      setCustomerSearchResults([]);\n      return;\n    }\n    \n    try {\n      const response = await api.get(`/agent/customers/search?q=${encodeURIComponent(query)}`);\n      const customerData = response.data as { customers: Customer[] };\n      setCustomerSearchResults(customerData.customers);\n    } catch (error: any) {\n      console.error('Error searching customers:', error);\n    }\n  };\n\n  const sendWhatsAppMessage = async () => {\n    if (!whatsappMessage.phone || !whatsappMessage.message) return;\n    \n    try {\n      await api.post('/agent/whatsapp/send', whatsappMessage);\n      setWhatsappMessage({ phone: '', message: '' });\n      alert('WhatsApp message sent successfully!');\n    } catch (error: any) {\n      setError(error.response?.data?.error || 'Failed to send WhatsApp message');\n    }\n  };\n\n  const fetchServiceStatus = async () => {\n    try {\n      const response = await api.get('/agent/services/status');\n      const statusData = response.data as any;\n      s"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "etServiceStatus(statusData);\n    } catch (error: any) {\n      console.error('Error fetching service status:', error);\n    }\n  };\n\n  useEffect(() => {\n    const initializeDashboard = async () => {\n      try {\n        await fetchAgentStats();\n        await fetchTickets();\n        await fetchServiceStatus();\n      } catch (error) {\n        console.error('Failed to initialize agent dashboard:', error);\n        setError('Failed to load agent dashboard. Please try refreshing the page.');\n        setLoading(false);\n      }\n    };\n    \n    initializeDashboard();\n  }, []);\n\n  useEffect(() => {\n    fetchTickets(1);\n  }, [filters]);\n\n  useEffect(() => {\n    if (searchCustomers) {\n      const debounce = setTimeout(() => searchCustomer(searchCustomers), 300);\n      return () => clearTimeout(debounce);\n    } else {\n      setCustomerSearchResults([]);\n    }\n  }, [searchCustomers]);\n\n  const getStatusColor = (status: string) => {\n    const colors = {\n      open: 'bg-red-100 text-red-800',\n      'in-pr"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "ogress': 'bg-yellow-100 text-yellow-800',\n      'waiting-customer': 'bg-blue-100 text-blue-800',\n      resolved: 'bg-green-100 text-green-800',\n      closed: 'bg-gray-100 text-gray-800'\n    };\n    return colors[status as keyof typeof colors] || 'bg-gray-100 text-gray-800';\n  };\n\n  const getPriorityColor = (priority: string) => {\n    const colors = {\n      low: 'bg-blue-100 text-blue-800',\n      medium: 'bg-yellow-100 text-yellow-800',\n      high: 'bg-orange-100 text-orange-800',\n      urgent: 'bg-red-100 text-red-800'\n    };\n    return colors[priority as keyof typeof colors] || 'bg-gray-100 text-gray-800';\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleString();\n  };\n\n  // Add early return if there's an error to prevent white screen\n  if (error && !stats) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center\">"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "<div className=\"text-red-500 mb-4\">\n            <AlertTriangle className=\"mx-auto\" size={48} />\n          </div>\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Agent Dashboard Error</h2>\n          <p className=\"text-gray-600 mb-6\">{error}</p>\n          <div className=\"space-y-3\">\n            <button\n              onClick={() => {\n                setError('');\n                setLoading(true);\n                fetchAgentStats();\n                fetchTickets();\n                fetchServiceStatus();\n              }}\n              className=\"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              <RefreshCw className=\"inline mr-2\" size={16} />\n              Retry Loading Dashboard\n            </button>\n            <p className=\"text-sm text-gray-500\">\n              Make sure you're logged in as an agent or admin.\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const renderDashbo"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "ard = () => (\n    <div className=\"space-y-6\">\n      {/* Statistics Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <div className=\"bg-white p-6 rounded-lg shadow border-l-4 border-blue-500\">\n          <div className=\"flex items-center\">\n            <MessageSquare className=\"text-blue-500\" size={24} />\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">Total Tickets</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats?.tickets.total || 0}</p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white p-6 rounded-lg shadow border-l-4 border-yellow-500\">\n          <div className=\"flex items-center\">\n            <Clock className=\"text-yellow-500\" size={24} />\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">In Progress</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats?.tick"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "ets.inProgress || 0}</p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white p-6 rounded-lg shadow border-l-4 border-green-500\">\n          <div className=\"flex items-center\">\n            <CheckCircle className=\"text-green-500\" size={24} />\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">Resolved</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats?.tickets.resolved || 0}</p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white p-6 rounded-lg shadow border-l-4 border-red-500\">\n          <div className=\"flex items-center\">\n            <AlertTriangle className=\"text-red-500\" size={24} />\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">Unassigned</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats?.tickets.unassigned || 0}</p>\n            </div>\n          </div>\n        <"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "/div>\n      </div>\n\n      {/* Performance Metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <div className=\"flex items-center\">\n            <BarChart3 className=\"text-purple-500\" size={24} />\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">Avg Resolution Time</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {stats?.performance.avgResolutionTimeHours?.toFixed(1) || '0'} hrs\n              </p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <div className=\"flex items-center\">\n            <Star className=\"text-yellow-500\" size={24} />\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">Satisfaction Rating</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {stats?"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": ".performance.avgSatisfactionRating?.toFixed(1) || 'N/A'}/5\n              </p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <div className=\"flex items-center\">\n            <TrendingUp className=\"text-green-500\" size={24} />\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">Resolved (30 days)</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {stats?.performance.resolvedLast30Days || 0}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Recent Activity */}\n      <div className=\"bg-white p-6 rounded-lg shadow\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Recent Activity</h3>\n        <div className=\"space-y-3\">\n          {stats?.recentActivity?.map((ticket) => (\n            <div key={ticket._id} className=\"flex items-center justify-between py-3 border-b\">"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "<div>\n                <p className=\"font-medium text-gray-900\">{ticket.ticketId}</p>\n                <p className=\"text-sm text-gray-600\">{ticket.subject}</p>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <span className={`px-2 py-1 text-xs rounded ${getStatusColor(ticket.status)}`}>\n                  {ticket.status}\n                </span>\n                <span className={`px-2 py-1 text-xs rounded ${getPriorityColor(ticket.priority)}`}>\n                  {ticket.priority}\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Service Status */}\n      {serviceStatus && (\n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Service Status</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "gray-600\">Email Service</span>\n              <span className={`px-2 py-1 text-xs rounded ${\n                serviceStatus.email?.isReady ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n              }`}>\n                {serviceStatus.email?.isReady ? 'Online' : 'Offline'}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-600\">WhatsApp Service</span>\n              <span className={`px-2 py-1 text-xs rounded ${\n                serviceStatus.whatsapp?.isReady ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n              }`}>\n                {serviceStatus.whatsapp?.isReady ? 'Online' : 'Offline'}\n              </span>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  const renderTickets = () => (\n    <div className=\"space-y-6\">\n      {/* Filters */}\n      <div className=\"bg-white p-6 rounded-lg shadow\">\n        <div className=\"grid grid-cols"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "-1 md:grid-cols-6 gap-4\">\n          <div className=\"md:col-span-2\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={16} />\n              <input\n                type=\"text\"\n                placeholder=\"Search tickets...\"\n                value={filters.search}\n                onChange={(e) => setFilters({ ...filters, search: e.target.value })}\n                className=\"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n              />\n            </div>\n          </div>\n          \n          <select\n            value={filters.status}\n            onChange={(e) => setFilters({ ...filters, status: e.target.value })}\n            className=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n          >\n            <option value=\"all\">All Status</option>\n            <option value=\"open\">Open</"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "option>\n            <option value=\"in-progress\">In Progress</option>\n            <option value=\"waiting-customer\">Waiting Customer</option>\n            <option value=\"resolved\">Resolved</option>\n            <option value=\"closed\">Closed</option>\n          </select>\n          \n          <select\n            value={filters.priority}\n            onChange={(e) => setFilters({ ...filters, priority: e.target.value })}\n            className=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n          >\n            <option value=\"all\">All Priority</option>\n            <option value=\"urgent\">Urgent</option>\n            <option value=\"high\">High</option>\n            <option value=\"medium\">Medium</option>\n            <option value=\"low\">Low</option>\n          </select>\n          \n          <select\n            value={filters.assigned}\n            onChange={(e) => setFilters({ ...filters, assigned: e.target.value })}\n            className=\"px-3 py-2 bo"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "rder border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n          >\n            <option value=\"all\">All Tickets</option>\n            <option value=\"me\">My Tickets</option>\n            <option value=\"unassigned\">Unassigned</option>\n          </select>\n          \n          <button\n            onClick={() => fetchTickets(currentPage)}\n            className=\"flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700\"\n          >\n            <RefreshCw size={16} className=\"mr-2\" />\n            Refresh\n          </button>\n        </div>\n      </div>\n\n      {/* Tickets List */}\n      <div className=\"bg-white rounded-lg shadow\">\n        {loading ? (\n          <div className=\"p-8 text-center\">\n            <Loader className=\"animate-spin mx-auto mb-4\" size={32} />\n            <p>Loading tickets...</p>\n          </div>\n        ) : (\n          <>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\""
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": ">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Ticket ID\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Subject\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Customer\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Status\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Priority\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs fo"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "nt-medium text-gray-500 uppercase tracking-wider\">\n                      Created\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {tickets.map((ticket) => (\n                    <tr key={ticket._id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <button\n                          onClick={() => fetchTicketDetails(ticket.ticketId)}\n                          className=\"text-green-600 hover:text-green-800 font-medium\"\n                        >\n                          {ticket.ticketId}\n                        </button>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"te"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "xt-sm font-medium text-gray-900 truncate max-w-xs\">\n                          {ticket.subject}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-900\">{ticket.customerName}</div>\n                        <div className=\"text-sm text-gray-500\">{ticket.customerEmail}</div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span className={`px-2 py-1 text-xs rounded ${getStatusColor(ticket.status)}`}>\n                          {ticket.status}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span className={`px-2 py-1 text-xs rounded ${getPriorityColor(ticket.priority)}`}>\n                          {ticket.priority}\n                        </span>\n                      </td>"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "<td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                        {formatDate(ticket.createdAt)}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm space-x-2\">\n                        {!ticket.assignedAgentId && (\n                          <button\n                            onClick={() => assignTicket(ticket.ticketId)}\n                            className=\"text-blue-600 hover:text-blue-800\"\n                          >\n                            Assign\n                          </button>\n                        )}\n                        <button\n                          onClick={() => fetchTicketDetails(ticket.ticketId)}\n                          className=\"text-green-600 hover:text-green-800\"\n                        >\n                          View\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": ">\n            </div>\n\n            {/* Pagination */}\n            {totalPages > 1 && (\n              <div className=\"px-6 py-3 border-t border-gray-200\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"text-sm text-gray-500\">\n                    Page {currentPage} of {totalPages}\n                  </div>\n                  <div className=\"space-x-2\">\n                    <button\n                      onClick={() => fetchTickets(currentPage - 1)}\n                      disabled={currentPage <= 1}\n                      className=\"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50\"\n                    >\n                      Previous\n                    </button>\n                    <button\n                      onClick={() => fetchTickets(currentPage + 1)}\n                      disabled={currentPage >= totalPages}\n                      className=\"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50\""
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": ">\n                      Next\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderTicketDetails = () => {\n    if (!selectedTicket) {\n      return (\n        <div className=\"bg-white p-8 rounded-lg shadow text-center\">\n          <MessageSquare className=\"mx-auto mb-4 text-gray-400\" size={48} />\n          <p className=\"text-gray-500\">Select a ticket to view details</p>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"space-y-6\">\n        {/* Ticket Header */}\n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <div className=\"flex items-start justify-between mb-4\">\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-900\">{selectedTicket.ticketId}</h2>\n              <p className=\"text-gray-600 mt-1\">{selectedTicket.subject}</p>\n            </div>\n            <div className=\"flex space-x-2\">"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "<span className={`px-2 py-1 text-xs rounded ${getStatusColor(selectedTicket.status)}`}>\n                {selectedTicket.status}\n              </span>\n              <span className={`px-2 py-1 text-xs rounded ${getPriorityColor(selectedTicket.priority)}`}>\n                {selectedTicket.priority}\n              </span>\n            </div>\n          </div>\n\n          {/* Customer Info */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Customer Information</h3>\n              <div className=\"space-y-2\">\n                <p><strong>Name:</strong> {selectedTicket.customerName}</p>\n                <p><strong>Email:</strong> {selectedTicket.customerEmail}</p>\n                {selectedTicket.customerPhone && (\n                  <p><strong>Phone:</strong> {selectedTicket.customerPhone}</p>\n                )}\n                <p><strong>Category:</strong> {selectedTicket.category}</p"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": ">\n              </div>\n            </div>\n            \n            <div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Ticket Information</h3>\n              <div className=\"space-y-2\">\n                <p><strong>Created:</strong> {formatDate(selectedTicket.createdAt)}</p>\n                <p><strong>Updated:</strong> {formatDate(selectedTicket.updatedAt)}</p>\n                {selectedTicket.assignedAgentId && (\n                  <p><strong>Assigned to:</strong> {selectedTicket.assignedAgentId.name}</p>\n                )}\n                {selectedTicket.relatedTripId && (\n                  <p><strong>Related Trip:</strong> {selectedTicket.relatedTripId.title}</p>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Status Actions */}\n          <div className=\"mt-6 flex space-x-2\">\n            {!selectedTicket.assignedAgentId && (\n              <button\n                onClick={() => assignTicket(selectedTicket.ticketId)}"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n              >\n                Assign to Me\n              </button>\n            )}\n            <select\n              value={selectedTicket.status}\n              onChange={(e) => updateTicketStatus(selectedTicket.ticketId, e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 rounded\"\n            >\n              <option value=\"open\">Open</option>\n              <option value=\"in-progress\">In Progress</option>\n              <option value=\"waiting-customer\">Waiting Customer</option>\n              <option value=\"resolved\">Resolved</option>\n              <option value=\"closed\">Closed</option>\n            </select>\n          </div>\n        </div>\n\n        {/* Messages */}\n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Conversation</h3>\n          \n          <div className=\"space-y-4 max-h-96 overflow-y-auto mb-4\">"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "{selectedTicket.messages.map((message, index) => (\n              <div\n                key={index}\n                className={`flex ${message.sender === 'agent' ? 'justify-end' : 'justify-start'}`}\n              >\n                <div\n                  className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\n                    message.sender === 'agent'\n                      ? 'bg-green-600 text-white'\n                      : 'bg-gray-200 text-gray-900'\n                  }`}\n                >\n                  <p className=\"text-sm font-medium mb-1\">{message.senderName}</p>\n                  <p className=\"text-sm\">{message.message}</p>\n                  <p className=\"text-xs opacity-75 mt-1\">\n                    {formatDate(message.timestamp)}\n                  </p>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* Message Input */}\n          <div className=\"flex space-x-2\">\n            <input\n              type=\"text\"\n              valu"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "e={newMessage}\n              onChange={(e) => setNewMessage(e.target.value)}\n              placeholder=\"Type your message...\"\n              className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n              onKeyPress={(e) => e.key === 'Enter' && sendMessage()}\n            />\n            <button\n              onClick={sendMessage}\n              disabled={sendingMessage || !newMessage.trim()}\n              className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50\"\n            >\n              {sendingMessage ? <Loader className=\"animate-spin\" size={16} /> : <Send size={16} />}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const renderCommunication = () => (\n    <div className=\"space-y-6\">\n      {/* Customer Search */}\n      <div className=\"bg-white p-6 rounded-lg shadow\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Customer Search</h3>"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "<div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={16} />\n          <input\n            type=\"text\"\n            placeholder=\"Search customers by name, email, or phone...\"\n            value={searchCustomers}\n            onChange={(e) => setSearchCustomers(e.target.value)}\n            className=\"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n          />\n        </div>\n        \n        {customerSearchResults.length > 0 && (\n          <div className=\"mt-4 space-y-2\">\n            {customerSearchResults.map((customer) => (\n              <div key={customer._id} className=\"flex items-center justify-between p-3 border rounded-lg\">\n                <div>\n                  <p className=\"font-medium\">{customer.name}</p>\n                  <p className=\"text-sm text-gray-600\">{customer.email}</p>\n                  {customer.phone && <p className=\"text-sm t"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "ext-gray-600\">{customer.phone}</p>}\n                </div>\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={() => setWhatsappMessage({ ...whatsappMessage, phone: customer.phone || '' })}\n                    className=\"text-green-600 hover:text-green-800\"\n                  >\n                    <Phone size={16} />\n                  </button>\n                  <button\n                    onClick={() => window.location.href = `mailto:${customer.email}`}\n                    className=\"text-blue-600 hover:text-blue-800\"\n                  >\n                    <Mail size={16} />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* WhatsApp Messaging */}\n      <div className=\"bg-white p-6 rounded-lg shadow\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">WhatsApp Messaging</h3>\n        <div className=\"space-y-4\">\n          <input"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "type=\"text\"\n            placeholder=\"Customer phone number\"\n            value={whatsappMessage.phone}\n            onChange={(e) => setWhatsappMessage({ ...whatsappMessage, phone: e.target.value })}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n          />\n          <textarea\n            placeholder=\"Message content...\"\n            value={whatsappMessage.message}\n            onChange={(e) => setWhatsappMessage({ ...whatsappMessage, message: e.target.value })}\n            rows={4}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n          />\n          <button\n            onClick={sendWhatsAppMessage}\n            disabled={!whatsappMessage.phone || !whatsappMessage.message}\n            className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50\"\n          >\n            Send WhatsApp Message"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "</button>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      {/* Header */}\n      <div className=\"bg-white shadow\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center\">\n              <Headphones className=\"text-green-600 mr-3\" size={24} />\n              <h1 className=\"text-xl font-semibold text-gray-900\">Agent Dashboard</h1>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <span className=\"text-sm text-gray-500\">Customer Support Portal</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Navigation */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6\">\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"-mb-px flex space-x-8\">\n            {[\n              { key: 'dashboard', label: 'Da"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "shboard', icon: BarChart3 },\n              { key: 'tickets', label: 'Tickets', icon: MessageSquare },\n              { key: 'ticket-details', label: 'Ticket Details', icon: User },\n              { key: 'communication', label: 'Communication', icon: Phone }\n            ].map((tab) => {\n              const Icon = tab.icon;\n              return (\n                <button\n                  key={tab.key}\n                  onClick={() => setActiveTab(tab.key)}\n                  className={`${\n                    activeTab === tab.key\n                      ? 'border-green-500 text-green-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center`}\n                >\n                  <Icon className=\"mr-2\" size={16} />\n                  {tab.label}\n                </button>\n              );\n            })}\n          </nav>\n        </div>\n      </div>"
  },
  {
    "source": "web\\src\\pages\\AgentDashboard.tsx",
    "text": "{/* Content */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 pb-6\">\n        {error && (\n          <div className=\"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\">\n            {error}\n            <button\n              onClick={() => setError('')}\n              className=\"float-right text-red-700 hover:text-red-900\"\n            >\n              √ó\n            </button>\n          </div>\n        )}\n\n        {activeTab === 'dashboard' && renderDashboard()}\n        {activeTab === 'tickets' && renderTickets()}\n        {activeTab === 'ticket-details' && renderTicketDetails()}\n        {activeTab === 'communication' && renderCommunication()}\n      </div>\n    </div>\n  );\n};\n\nexport default AgentDashboard;"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "import React, { useState } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport AIRecommendations from '../components/AIRecommendations';\nimport AIAnalyticsDashboard from '../components/AIAnalyticsDashboard';\nimport AISmartSearch from '../components/AISmartSearch';\nimport AIChatWidget from '../components/AIChatWidgetClean';\nimport api from '../config/api';\n\ninterface ShowcaseSection {\n  id: string;\n  title: string;\n  description: string;\n  component: React.ReactNode;\n  features: string[];\n}\n\nconst AIShowcase: React.FC = () => {\n  const { user } = useAuth();\n  const [activeSection, setActiveSection] = useState<string>('smart-search');\n  const [searchResults, setSearchResults] = useState<any[]>([]);\n\n  const handleSmartSearch = async (query: string, filters: any) => {\n    console.log('Smart search executed:', { query, filters });\n    \n    try {\n      // Use real AI-powered smart search\n      const response = await api.post('/chat/smart-search', {\n        query,"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "context: {\n          userPreferences: filters,\n          currentFilters: filters\n        }\n      });\n      \n      if ((response.data as any).success) {\n        const searchData = (response.data as any).data;\n        \n        // Fetch actual trip data based on AI-extracted filters\n        const tripResponse = await api.get('/trips', {\n          params: {\n            search: searchData.filters.destination || '',\n            category: searchData.filters.category || '',\n            difficultyLevel: searchData.filters.difficultyLevel || '',\n            minPrice: searchData.filters.priceRange?.min || '',\n            maxPrice: searchData.filters.priceRange?.max || '',\n            limit: 6\n          }\n        });\n        \n        const trips = Array.isArray(tripResponse.data) ? tripResponse.data : (tripResponse.data as any).data || [];\n        \n        const searchResults = trips.map((trip: any, index: number) => ({\n          id: trip._id,\n          title: trip.title,\n          destination: t"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "rip.destination,\n          price: trip.price,\n          match: `${Math.max(85 - (index * 5), 70)}%`,\n          categories: trip.categories,\n          difficultyLevel: trip.difficultyLevel\n        }));\n        \n        setSearchResults(searchResults);\n      }\n    } catch (error: any) {\n      console.error('Smart search error:', error);\n      \n      // Fallback to basic search\n      try {\n        const fallbackResponse = await api.get('/trips', {\n          params: {\n            search: query,\n            limit: 6\n          }\n        });\n        \n        const trips = Array.isArray(fallbackResponse.data) ? fallbackResponse.data : (fallbackResponse.data as any).data || [];\n        \n        const fallbackResults = trips.map((trip: any, index: number) => ({\n          id: trip._id,\n          title: trip.title,\n          destination: trip.destination,\n          price: trip.price,\n          match: `${Math.max(80 - (index * 5), 60)}%`,\n          categories: trip.categories,\n          difficultyL"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "evel: trip.difficultyLevel\n        }));\n        \n        setSearchResults(fallbackResults);\n      } catch (fallbackError: any) {\n        console.error('Fallback search also failed:', fallbackError);\n        setSearchResults([]);\n      }\n    }\n  };\n\n  const showcaseSections: ShowcaseSection[] = [\n    {\n      id: 'smart-search',\n      title: 'ü§ñ AI Smart Search',\n      description: 'Natural language search that understands what you\\'re looking for',\n      features: [\n        'Natural language understanding',\n        'Smart filter extraction',\n        'Intent recognition',\n        'Contextual suggestions'\n      ],\n      component: (\n        <div className=\"space-y-4\">\n          <AISmartSearch \n            onSearch={handleSmartSearch}\n            className=\"w-full\"\n          />\n          {searchResults.length > 0 && (\n            <div className=\"bg-white rounded-lg border border-gray-200 p-4\">\n              <h4 className=\"font-semibold text-gray-800 mb-3\">Search Results:</h4>"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "<div className=\"space-y-2\">\n                {searchResults.map((result) => (\n                  <div key={result.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                    <div>\n                      <h5 className=\"font-medium\">{result.title}</h5>\n                      <p className=\"text-sm text-gray-600\">üìç {result.destination} ‚Ä¢ ‚Çπ{result.price}</p>\n                    </div>\n                    <div className=\"text-sm font-semibold text-green-600\">\n                      {result.match} match\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )\n    },\n    {\n      id: 'recommendations',\n      title: 'üéØ AI Recommendations',\n      description: 'Personalized trip suggestions powered by machine learning',\n      features: [\n        'Personalized recommendations',\n        'Smart matching algorithm',\n        'Real-time updates',\n        'Confidence scoring'\n      ]"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": ",\n      component: <AIRecommendations className=\"w-full\" maxRecommendations={4} />\n    },\n    {\n      id: 'analytics',\n      title: 'üìä Travel Analytics',\n      description: 'AI-powered insights into your travel patterns and preferences',\n      features: [\n        'Travel pattern analysis',\n        'Spending insights',\n        'Preference tracking',\n        'Predictive recommendations'\n      ],\n      component: <AIAnalyticsDashboard className=\"w-full\" />\n    },\n    {\n      id: 'chat-support',\n      title: 'üí¨ AI Chat Support',\n      description: 'Intelligent chatbot that can help with bookings and questions',\n      features: [\n        '24/7 availability',\n        'Context-aware responses',\n        'Human handoff capability',\n        'Multi-language support'\n      ],\n      component: (\n        <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\n          <div className=\"mb-4\">\n            <h4 className=\"font-semibold text-gray-800 mb-2\">Try the AI Chat Assistant</h4>"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "<p className=\"text-gray-600 text-sm\">\n              The chat widget is available on all pages. Try asking questions like:\n            </p>\n          </div>\n          <div className=\"space-y-2\">\n            {[\n              \"What are the best trips for beginners?\",\n              \"Help me find adventures under ‚Çπ10,000\",\n              \"What's included in the Himachal trek?\",\n              \"Show me my booking history\"\n            ].map((question, index) => (\n              <div key={index} className=\"p-3 bg-blue-50 rounded-lg border border-blue-200\">\n                <p className=\"text-blue-800 text-sm\">\"{question}\"</p>\n              </div>\n            ))}\n          </div>\n          <div className=\"mt-4 p-3 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg\">\n            <p className=\"text-sm text-purple-800\">\n              üí° The AI chat widget is always available in the bottom-right corner\n            </p>\n          </div>\n        </div>\n      )\n    }\n  ];\n\n  const activeShowcase = s"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "howcaseSections.find(section => section.id === activeSection)!;\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 text-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16\">\n          <div className=\"text-center\">\n            <div className=\"flex justify-center items-center space-x-4 mb-6\">\n              <span className=\"text-6xl\">üß†</span>\n              <h1 className=\"text-5xl font-bold\">AI-Powered Trek Tribe</h1>\n              <span className=\"text-6xl\">‚ú®</span>\n            </div>\n            <p className=\"text-xl text-blue-100 max-w-3xl mx-auto\">\n              Experience the future of travel planning with our advanced AI features. \n              From smart search to personalized recommendations, our AI makes trip planning effortless.\n            </p>\n            {user ? (\n              <div className=\"mt-6 flex items-center justify-center space-x-2\">"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "<span className=\"text-lg\">üëã Welcome back, {user.name}!</span>\n                <span className=\"px-3 py-1 bg-green-400 text-green-900 rounded-full text-sm font-medium\">\n                  ü§ñ Personalized AI Active\n                </span>\n              </div>\n            ) : (\n              <div className=\"mt-6\">\n                <a \n                  href=\"/login\"\n                  className=\"inline-block px-6 py-3 bg-white text-purple-600 rounded-lg font-semibold hover:bg-gray-100 transition-colors\"\n                >\n                  Sign In to Unlock Full AI Experience\n                </a>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\n          {/* Navigation Sidebar */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"bg-white rounded-xl shadow-lg p-6 sticky top-8\">\n              <h3"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "className=\"text-lg font-semibold text-gray-800 mb-4\">AI Features</h3>\n              <nav className=\"space-y-2\">\n                {showcaseSections.map((section) => (\n                  <button\n                    key={section.id}\n                    onClick={() => setActiveSection(section.id)}\n                    className={`w-full text-left p-3 rounded-lg transition-all duration-200 ${\n                      activeSection === section.id\n                        ? 'bg-gradient-to-r from-purple-100 to-blue-100 text-purple-800 border-l-4 border-purple-500'\n                        : 'hover:bg-gray-100 text-gray-700'\n                    }`}\n                  >\n                    <div className=\"font-medium\">{section.title}</div>\n                    <div className=\"text-sm text-gray-500 mt-1\">{section.description}</div>\n                  </button>\n                ))}\n              </nav>\n\n              {/* AI Status */}\n              <div className=\"mt-6 pt-6 border-t border-gray-200\">"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "<div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm font-medium text-gray-700\">AI Status</span>\n                  <span className=\"flex items-center text-green-600 text-sm\">\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse mr-2\"></div>\n                    Online\n                  </span>\n                </div>\n                <div className=\"space-y-1 text-xs text-gray-500\">\n                  <div className=\"flex justify-between\">\n                    <span>Smart Search</span>\n                    <span className=\"text-green-600\">‚úì Active</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Recommendations</span>\n                    <span className=\"text-green-600\">‚úì Active</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Chat Support</span>\n                    <span clas"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "sName=\"text-green-600\">‚úì Active</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Analytics</span>\n                    <span className=\"text-green-600\">‚úì Active</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Main Content */}\n          <div className=\"lg:col-span-3\">\n            <div className=\"bg-white rounded-xl shadow-lg p-8\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <div>\n                  <h2 className=\"text-3xl font-bold text-gray-800\">{activeShowcase.title}</h2>\n                  <p className=\"text-gray-600 mt-2\">{activeShowcase.description}</p>\n                </div>\n                <div className=\"text-4xl\">üöÄ</div>\n              </div>\n\n              {/* Feature List */}\n              <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 mb-8\">\n                <h4 classN"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "ame=\"font-semibold text-gray-800 mb-3\">Key Features:</h4>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {activeShowcase.features.map((feature, index) => (\n                    <div key={index} className=\"flex items-center space-x-2\">\n                      <span className=\"text-green-500\">‚úì</span>\n                      <span className=\"text-sm text-gray-700\">{feature}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Component Demo */}\n              <div className=\"border border-gray-200 rounded-lg p-6\">\n                <div className=\"flex items-center space-x-2 mb-4\">\n                  <span className=\"text-2xl\">üéÆ</span>\n                  <h4 className=\"font-semibold text-gray-800\">Interactive Demo</h4>\n                </div>\n                {activeShowcase.component}\n              </div>\n\n              {/* Technical Details */}\n              <div className=\"mt-8 bg-gray-50 rounded-lg p-6\""
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": ">\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\n                  <span className=\"mr-2\">‚öôÔ∏è</span>\n                  Technical Implementation\n                </h4>\n                <div className=\"space-y-3 text-sm text-gray-700\">\n                  {activeSection === 'smart-search' && (\n                    <div className=\"space-y-2\">\n                      <p>‚Ä¢ Natural Language Processing for query understanding</p>\n                      <p>‚Ä¢ Real-time filter extraction and intent recognition</p>\n                      <p>‚Ä¢ Context-aware search suggestions</p>\n                      <p>‚Ä¢ Debounced API calls for optimal performance</p>\n                    </div>\n                  )}\n                  {activeSection === 'recommendations' && (\n                    <div className=\"space-y-2\">\n                      <p>‚Ä¢ Machine learning-based recommendation engine</p>\n                      <p>‚Ä¢ User behavior analysis and preference learning</p>"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "<p>‚Ä¢ Collaborative filtering with confidence scoring</p>\n                      <p>‚Ä¢ Real-time data integration</p>\n                    </div>\n                  )}\n                  {activeSection === 'analytics' && (\n                    <div className=\"space-y-2\">\n                      <p>‚Ä¢ Advanced data analytics and pattern recognition</p>\n                      <p>‚Ä¢ Predictive modeling for travel preferences</p>\n                      <p>‚Ä¢ Real-time dashboard updates</p>\n                      <p>‚Ä¢ Privacy-compliant data processing</p>\n                    </div>\n                  )}\n                  {activeSection === 'chat-support' && (\n                    <div className=\"space-y-2\">\n                      <p>‚Ä¢ Conversational AI with context awareness</p>\n                      <p>‚Ä¢ Socket.IO for real-time communication</p>\n                      <p>‚Ä¢ Intelligent human handoff triggers</p>\n                      <p>‚Ä¢ Multi-turn conversation handling</p>\n                    </div"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": ">\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* AI Performance Metrics */}\n        <div className=\"mt-12 bg-white rounded-xl shadow-lg p-8\">\n          <h3 className=\"text-2xl font-bold text-gray-800 mb-6 text-center\">\n            üèÜ AI Performance Metrics\n          </h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n            <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n              <div className=\"text-3xl font-bold text-green-600\">97%</div>\n              <div className=\"text-sm text-gray-600\">Search Accuracy</div>\n            </div>\n            <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n              <div className=\"text-3xl font-bold text-blue-600\">1.2s</div>\n              <div className=\"text-sm text-gray-600\">Avg Response Time</div>\n            </div>\n            <div className=\"text-center p-4 bg-purple-50 rounded-lg\">\n              <div className=\"tex"
  },
  {
    "source": "web\\src\\pages\\AIShowcase.tsx",
    "text": "t-3xl font-bold text-purple-600\">89%</div>\n              <div className=\"text-sm text-gray-600\">User Satisfaction</div>\n            </div>\n            <div className=\"text-center p-4 bg-orange-50 rounded-lg\">\n              <div className=\"text-3xl font-bold text-orange-600\">24/7</div>\n              <div className=\"text-sm text-gray-600\">Availability</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* AI Chat Widget - Always available */}\n      <AIChatWidget />\n    </div>\n  );\n};\n\nexport default AIShowcase;"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../config/api';\nimport { useToast, ToastContainer } from '../components/Toast';\n\ninterface AutoPayStatus {\n  isSetup: boolean;\n  scheduledPaymentDate?: string;\n  daysUntilPayment?: number;\n  subscriptionActive?: boolean;\n  amount: number;\n  listingsIncluded: number;\n}\n\nconst AutoPaySetup: React.FC = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user, refreshUser } = useAuth();\n  const { toasts, success, error: showErrorToast, removeToast } = useToast();\n  \n  const [loading, setLoading] = useState(false);\n  const [fetchingStatus, setFetchingStatus] = useState(true);\n  const [autoPayStatus, setAutoPayStatus] = useState<AutoPayStatus | null>(null);\n  const [paymentMethod, setPaymentMethod] = useState('');\n  const [acceptTerms, setAcceptTerms] = useState(false);\n\n  // Redi"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "rect non-organizers\n  useEffect(() => {\n    if (user && user.role !== 'organizer') {\n      navigate('/');\n    }\n  }, [user, navigate]);\n\n  // Fetch auto-pay status\n  useEffect(() => {\n    fetchAutoPayStatus();\n  }, []);\n\n  const fetchAutoPayStatus = async () => {\n    try {\n      const response = await api.get('/api/auto-pay/status');\n      setAutoPayStatus(response.data);\n      \n      // If already setup, redirect to dashboard\n      if (response.data.isSetup) {\n        navigate('/organizer-dashboard', { replace: true });\n      }\n    } catch (error: any) {\n      console.error('Failed to fetch auto-pay status:', error);\n    } finally {\n      setFetchingStatus(false);\n    }\n  };\n\n  const handleSetupAutoPay = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!acceptTerms) {\n      showErrorToast('Please accept the terms and conditions');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      // In production, integrate with Razorpay for payment method setup\n      const r"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "esponse = await api.post('/api/auto-pay/setup', {\n        paymentMethod: paymentMethod || 'razorpay'\n      });\n\n      success('Auto-pay setup successful!');\n      \n      // Refresh user data\n      if (refreshUser) {\n        await refreshUser();\n      }\n\n      // Redirect to dashboard after short delay\n      setTimeout(() => {\n        navigate('/organizer-dashboard', { replace: true });\n      }, 1500);\n    } catch (error: any) {\n      const errorMsg = error.response?.data?.error || 'Failed to setup auto-pay';\n      showErrorToast(errorMsg);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSkipForNow = () => {\n    // Allow skip but warn user\n    if (window.confirm('Auto-pay is required to keep your listings active. You can set it up later from your dashboard. Continue?')) {\n      navigate('/organizer-dashboard');\n    }\n  };\n\n  if (fetchingStatus) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-forest-50 via-natur"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "e-50 to-forest-100\">\n        <div className=\"text-center\">\n          <svg className=\"animate-spin h-12 w-12 text-forest-600 mx-auto\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n          </svg>\n          <p className=\"mt-4 text-forest-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <ToastContainer toasts={toasts} onRemove={removeToast} />\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-forest-50 via-nature-50 to-forest-100 py-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-2xl w-full space-y-8\">\n          {/* Header */}\n          <div className=\"text-center\">\n            <div className=\"mx-auto h-20 w-20 bg-gradient-to-br from-fo"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "rest-600 to-nature-600 rounded-2xl flex items-center justify-center shadow-lg\">\n              <svg className=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\" />\n              </svg>\n            </div>\n            <h2 className=\"mt-6 text-3xl font-extrabold text-forest-900\">\n              Setup Auto-Pay Subscription\n            </h2>\n            <p className=\"mt-2 text-sm text-forest-600\">\n              Keep your trek listings active with our hassle-free auto-pay system\n            </p>\n          </div>\n\n          {/* Info Cards */}\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <div className=\"bg-white rounded-xl shadow-md p-6 border-2 border-forest-200\">\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"w-10 h-10 bg-nature-1"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "00 rounded-lg flex items-center justify-center\">\n                  <svg className=\"w-6 h-6 text-nature-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-forest-900\">Subscription Cost</h3>\n                  <p className=\"text-2xl font-bold text-nature-600\">‚Çπ1,499</p>\n                </div>\n              </div>\n              <p className=\"text-sm text-forest-600\">Per 60 days ‚Ä¢ 5 trip listings included</p>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-md p-6 border-2 border-forest-200\">\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div cl"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "assName=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center\">\n                  <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-forest-900\">First Payment</h3>\n                  <p className=\"text-2xl font-bold text-blue-600\">60 Days</p>\n                </div>\n              </div>\n              <p className=\"text-sm text-forest-600\">From your first login ‚Ä¢ Then auto-renews</p>\n            </div>\n          </div>\n\n          {/* Benefits Section */}\n          <div className=\"bg-white rounded-2xl shadow-xl p-8\">\n            <h3 className=\"text-lg font-bold text-forest-900 mb-4 flex items-center gap-2\">\n              <svg className=\"w-5 h-5 text-nature-600\" fill=\"currentColor"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n              </svg>\n              What's Included\n            </h3>\n            \n            <ul className=\"space-y-3\">\n              {[\n                'List up to 5 active trek trips simultaneously',\n                'Automatic billing every 60 days - no manual renewals',\n                'Email reminders 7 & 3 days before payment',\n                'Cancel anytime with no penalties',\n                'Access to organizer dashboard and analytics',\n                'Priority customer support'\n              ].map((benefit, index) => (\n                <li key={index} className=\"flex items-start gap-3\">\n                  <svg className=\"w-5 h-5 text-nature-600 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M1"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "6.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                  </svg>\n                  <span className=\"text-sm text-forest-700\">{benefit}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Setup Form */}\n          <form onSubmit={handleSetupAutoPay} className=\"bg-white rounded-2xl shadow-xl p-8 space-y-6\">\n            <h3 className=\"text-lg font-bold text-forest-900 mb-4\">Setup Payment Method</h3>\n\n            {/* Payment Method Selection */}\n            <div>\n              <label className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                Select Payment Method\n              </label>\n              <div className=\"space-y-3\">\n                <label className=\"flex items-center gap-3 p-4 border-2 border-forest-300 rounded-xl cursor-pointer hover:border-nature-500 transition-colors\">\n                  <input\n                    type=\""
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "radio\"\n                    name=\"paymentMethod\"\n                    value=\"razorpay\"\n                    checked={paymentMethod === 'razorpay' || !paymentMethod}\n                    onChange={(e) => setPaymentMethod(e.target.value)}\n                    className=\"w-5 h-5 text-nature-600\"\n                  />\n                  <div className=\"flex-1\">\n                    <div className=\"font-semibold text-forest-900\">Razorpay</div>\n                    <div className=\"text-xs text-forest-600\">Credit/Debit Card, UPI, Net Banking</div>\n                  </div>\n                  <img src=\"https://razorpay.com/assets/razorpay-glyph.svg\" alt=\"Razorpay\" className=\"h-8\" />\n                </label>\n              </div>\n            </div>\n\n            {/* Info Box */}\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 flex gap-3\">\n              <svg className=\"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillR"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "ule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n              </svg>\n              <div className=\"text-sm text-blue-800\">\n                <p className=\"font-medium mb-1\">How it works:</p>\n                <p>After clicking \"Setup Auto-Pay\", you'll be redirected to our secure payment partner to add your payment method. Your first payment will be automatically charged 60 days from today.</p>\n              </div>\n            </div>\n\n            {/* Terms & Conditions */}\n            <div className=\"space-y-3\">\n              <label className=\"flex items-start gap-3 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={acceptTerms}\n                  onChange={(e) => setAcceptTerms(e.target.checked)}\n                  className=\"w-5 h-5 text-nature-600 mt-0.5 rounded\"\n                  required\n                />"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "<span className=\"text-sm text-forest-700\">\n                  I agree to the{' '}\n                  <a href=\"/terms\" target=\"_blank\" className=\"text-nature-600 hover:text-nature-700 font-medium underline\">\n                    Terms & Conditions\n                  </a>\n                  {' '}and authorize TrekTribe to charge ‚Çπ1,499 every 60 days starting from 60 days after signup. I understand I can cancel anytime.\n                </span>\n              </label>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"flex flex-col sm:flex-row gap-3\">\n              <button\n                type=\"submit\"\n                disabled={loading || !acceptTerms}\n                className=\"flex-1 py-3.5 px-4 bg-gradient-to-r from-forest-600 to-nature-600 text-white font-semibold rounded-xl hover:from-forest-700 hover:to-nature-700 focus:outline-none focus:ring-2 focus:ring-forest-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all durati"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "on-300 shadow-lg hover:shadow-xl\"\n              >\n                {loading ? (\n                  <span className=\"flex items-center justify-center gap-2\">\n                    <svg className=\"animate-spin h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n                    </svg>\n                    Setting up...\n                  </span>\n                ) : (\n                  'Setup Auto-Pay'\n                )}\n              </button>\n              \n              <button\n                type=\"button\"\n                onClick={handleSkipForNow}\n                className=\"sm:w-32 py-3.5 px-4 bg-white text-forest-700 font-semibold rounded-xl border-2 border-forest-300 hover:bg-forest-50 focus:o"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "utline-none focus:ring-2 focus:ring-forest-500 focus:ring-offset-2 transition-all\"\n              >\n                Skip for Now\n              </button>\n            </div>\n\n            {/* Warning */}\n            <div className=\"bg-yellow-50 border-l-4 border-yellow-400 p-4\">\n              <div className=\"flex gap-3\">\n                <svg className=\"w-5 h-5 text-yellow-600 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                </svg>\n                <p className=\"text-sm text-yellow-800\">\n                  <span className=\"font-semibold\">Important:</span> Your trip listings will be automatically deactivated if auto-pay is not set up before your 60-day trial ends.\n                </p>"
  },
  {
    "source": "web\\src\\pages\\AutoPaySetup.tsx",
    "text": "</div>\n            </div>\n          </form>\n\n          {/* Support Link */}\n          <div className=\"text-center\">\n            <p className=\"text-xs text-forest-500\">\n              Questions about billing?{' '}\n              <a href=\"/support\" className=\"text-nature-600 hover:text-nature-700 font-medium\">\n                Contact Support\n              </a>\n            </p>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default AutoPaySetup;"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../config/api';\nimport { useToast, ToastContainer } from '../components/Toast';\n\ninterface ProfileData {\n  name: string;\n  phone?: string;\n  bio?: string;\n  location?: string;\n}\n\nconst CompleteProfile: React.FC = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user, refreshUser } = useAuth();\n  const { toasts, success, error: showErrorToast, removeToast } = useToast();\n  \n  const [loading, setLoading] = useState(false);\n  const [step, setStep] = useState<'profile' | 'verify'>('profile');\n  const [verificationCode, setVerificationCode] = useState('');\n  const [formData, setFormData] = useState<ProfileData>({\n    name: user?.name || '',\n    phone: '',\n    bio: '',\n    location: ''\n  });\n  const [errors, setErrors] = useState<Partial<ProfileData>>({});\n\n  // Pre-fill with u"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "ser data if available\n  useEffect(() => {\n    if (user) {\n      setFormData(prev => ({\n        ...prev,\n        name: user.name || prev.name,\n        phone: user.phone || prev.phone\n      }));\n    }\n  }, [user]);\n\n  const validateForm = (): boolean => {\n    const newErrors: Partial<ProfileData> = {};\n\n    if (!formData.name.trim()) {\n      newErrors.name = 'Name is required';\n    } else if (formData.name.trim().length < 2) {\n      newErrors.name = 'Name must be at least 2 characters';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSendVerificationCode = async () => {\n    if (!validateForm()) {\n      showErrorToast('Please fix the errors in the form');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      // Send verification email\n      await api.post('/auth/send-verification-email');\n      success('Verification code sent to your email!');\n      setStep('verify');\n    } catch (error: any) {\n      const errorMsg = error.response"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "?.data?.error || 'Failed to send verification code';\n      showErrorToast(errorMsg);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    \n    // Clear error for this field\n    if (errors[name as keyof ProfileData]) {\n      setErrors(prev => ({ ...prev, [name]: undefined }));\n    }\n  };\n\n  const handleVerifyAndComplete = async () => {\n    if (!verificationCode || verificationCode.length !== 6) {\n      showErrorToast('Please enter the 6-digit verification code');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      // Verify email code\n      await api.post('/auth/verify-email-code', {\n        code: verificationCode\n      });\n\n      // Complete profile\n      await api.post('/auth/complete-profile', {\n        name: formData.name.trim(),\n        phone: formData.phone?.trim() || undefined,\n        b"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "io: formData.bio?.trim() || undefined,\n        location: formData.location?.trim() || undefined\n      });\n\n      success('Profile completed successfully!');\n      \n      // Refresh user data\n      if (refreshUser) {\n        await refreshUser();\n      }\n\n      // Redirect based on role and next step\n      setTimeout(() => {\n        if (user?.role === 'organizer') {\n          const requiresAutoPay = (location.state as any)?.requiresAutoPay;\n          if (requiresAutoPay) {\n            navigate('/setup-auto-pay', { replace: true });\n          } else {\n            navigate('/organizer-dashboard', { replace: true });\n          }\n        } else {\n          navigate('/', { replace: true });\n        }\n      }, 1000);\n    } catch (error: any) {\n      const errorMsg = error.response?.data?.error || 'Verification failed';\n      showErrorToast(errorMsg);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <ToastContainer toasts={toasts} onRemove={removeToast} />\n      <div"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-forest-50 via-nature-50 to-forest-100 py-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-2xl w-full space-y-8\">\n          {/* Header */}\n          <div className=\"text-center\">\n            <div className=\"mx-auto h-20 w-20 bg-gradient-to-br from-forest-600 to-nature-600 rounded-2xl flex items-center justify-center shadow-lg\">\n              <svg className=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n              </svg>\n            </div>\n            <h2 className=\"mt-6 text-3xl font-extrabold text-forest-900\">\n              Complete Your Profile\n            </h2>\n            <p className=\"mt-2 text-sm text-forest-600\">\n              Help us personalize your TrekTribe experience\n            </p>\n          </div>"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "{/* Progress Indicator */}\n          <div className=\"bg-white rounded-xl shadow-md p-4\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <div className=\"flex items-center gap-2\">\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center font-semibold ${\n                  step === 'verify' ? 'bg-nature-600 text-white' : 'bg-forest-600 text-white'\n                }`}>\n                  1\n                </div>\n                <span className={step === 'verify' ? 'text-forest-700 font-medium' : 'text-forest-900 font-semibold'}>Role</span>\n              </div>\n              <div className={`flex-1 h-1 mx-3 ${\n                step === 'verify' ? 'bg-nature-200' : 'bg-forest-200'\n              }`} />\n              <div className=\"flex items-center gap-2\">\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center font-semibold ${\n                  step === 'verify' ? 'bg-forest-600 text"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "-white' : 'bg-forest-200 text-forest-600'\n                }`}>\n                  2\n                </div>\n                <span className={step === 'verify' ? 'text-forest-900 font-semibold' : 'text-forest-500'}>Phone</span>\n              </div>\n              <div className=\"flex-1 h-1 bg-forest-200 mx-3\" />\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-8 h-8 bg-forest-200 text-forest-600 rounded-full flex items-center justify-center font-semibold\">\n                  3\n                </div>\n                <span className=\"text-forest-500\">Verify</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Form Card */}\n          <div className=\"bg-white rounded-2xl shadow-xl p-8 space-y-6\">\n            {/* Name Field */}\n            <div>\n              <label htmlFor=\"name\" className=\"block text-sm font-semibold text-forest-700 mb-2\">\n                Full Name <span className=\"text-red-500\">*</span>\n              </label>"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "<div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\n                  <svg className=\"w-5 h-5 text-forest-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                  </svg>\n                </div>\n                <input\n                  id=\"name\"\n                  name=\"name\"\n                  type=\"text\"\n                  placeholder=\"Enter your full name\"\n                  value={formData.name}\n                  onChange={handleChange}\n                  className={`w-full pl-12 pr-4 py-3.5 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-forest-500 focus:border-transparent transition-all ${\n                    errors.name ? 'border-red-500' : 'border-forest-300'\n                  }`}\n                  d"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "isabled={loading}\n                  required\n                />\n              </div>\n              {errors.name && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.name}</p>\n              )}\n            </div>\n\n            {step === 'profile' ? (\n              /* Phone Number Field */\n              <div>\n                <label htmlFor=\"phone\" className=\"block text-sm font-semibold text-forest-700 mb-2\">\n                  üì± Phone Number\n                </label>\n                <div className=\"relative\">\n                  <input\n                    id=\"phone\"\n                    name=\"phone\"\n                    type=\"tel\"\n                    placeholder=\"+1234567890\"\n                    value={formData.phone || ''}\n                    onChange={handleChange}\n                    className=\"w-full px-4 py-3.5 border-2 border-forest-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-forest-500 focus:border-transparent transition-all\"\n                    disabled={lo"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "ading}\n                  />\n                </div>\n                <p className=\"mt-1 text-xs text-forest-500\">\n                  Include country code (e.g., +91 for India)\n                </p>\n              </div>\n            ) : (\n              /* Verification Code Field */\n              <div>\n                <label className=\"block text-sm font-semibold text-forest-700 mb-3 text-center\">\n                  Enter Verification Code\n                </label>\n                <p className=\"text-sm text-forest-600 text-center mb-4\">\n                  We've sent a 6-digit code to <span className=\"font-semibold\">{user?.email}</span>\n                </p>\n                <input\n                  type=\"text\"\n                  inputMode=\"numeric\"\n                  maxLength={6}\n                  value={verificationCode}\n                  onChange={(e) => setVerificationCode(e.target.value.replace(/\\D/g, ''))}\n                  placeholder=\"000000\"\n                  className=\"w-full text-center t"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "ext-2xl font-bold tracking-widest px-4 py-4 border-2 border-forest-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-forest-500 focus:border-transparent transition-all\"\n                  disabled={loading}\n                />\n              </div>\n            )}\n\n            {/* Location Field (Optional) */}\n            <div>\n              <label htmlFor=\"location\" className=\"block text-sm font-semibold text-forest-700 mb-2\">\n                Location <span className=\"text-forest-400 text-xs\">(Optional)</span>\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\n                  <svg className=\"w-5 h-5 text-forest-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\n                    <"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\n                  </svg>\n                </div>\n                <input\n                  id=\"location\"\n                  name=\"location\"\n                  type=\"text\"\n                  placeholder=\"e.g., Mumbai, India\"\n                  value={formData.location}\n                  onChange={handleChange}\n                  className=\"w-full pl-12 pr-4 py-3.5 border-2 border-forest-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-forest-500 focus:border-transparent transition-all\"\n                  disabled={loading}\n                />\n              </div>\n            </div>\n\n            {/* Bio Field (Optional) */}\n            <div>\n              <label htmlFor=\"bio\" className=\"block text-sm font-semibold text-forest-700 mb-2\">\n                About You <span className=\"text-forest-400 text-xs\">(Optional)</span>\n              </label>\n              <textarea"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "id=\"bio\"\n                name=\"bio\"\n                rows={4}\n                placeholder=\"Tell us a little about yourself and your interests...\"\n                value={formData.bio}\n                onChange={handleChange}\n                className=\"w-full px-4 py-3.5 border-2 border-forest-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-forest-500 focus:border-transparent transition-all resize-none\"\n                disabled={loading}\n              />\n              <p className=\"mt-1 text-xs text-forest-500 text-right\">\n                {formData.bio?.length || 0}/500 characters\n              </p>\n            </div>\n\n            {/* Action Buttons */}\n            {step === 'profile' ? (\n              <button\n                onClick={handleSendVerificationCode}\n                disabled={loading}\n                className=\"w-full py-3.5 px-4 bg-gradient-to-r from-forest-600 to-nature-600 text-white font-semibold rounded-xl hover:from-forest-700 hover:to-nature-700 focus:outline-n"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "one focus:ring-2 focus:ring-forest-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl\"\n              >\n                {loading ? (\n                  <span className=\"flex items-center justify-center gap-2\">\n                    <svg className=\"animate-spin h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n                    </svg>\n                    Sending...\n                  </span>\n                ) : (\n                  'Send Verification Code'\n                )}\n              </button>\n            ) : (\n              <div className=\"space-y-4\">\n                <button\n                  onClick={handleVerifyAndC"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "omplete}\n                  disabled={loading || verificationCode.length !== 6}\n                  className=\"w-full py-3.5 px-4 bg-gradient-to-r from-forest-600 to-nature-600 text-white font-semibold rounded-xl hover:from-forest-700 hover:to-nature-700 focus:outline-none focus:ring-2 focus:ring-forest-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl\"\n                >\n                  {loading ? (\n                    <span className=\"flex items-center justify-center gap-2\">\n                      <svg className=\"animate-spin h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n                      </svg>"
  },
  {
    "source": "web\\src\\pages\\CompleteProfile.tsx",
    "text": "Verifying...\n                    </span>\n                  ) : (\n                    'Verify & Complete Profile'\n                  )}\n                </button>\n                \n                <button\n                  onClick={() => setStep('profile')}\n                  className=\"w-full text-forest-700 hover:text-forest-900 font-medium\"\n                >\n                  ‚Üê Back\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Privacy Note */}\n          <div className=\"text-center\">\n            <p className=\"text-xs text-forest-500\">\n              Your information is secure and will only be used to enhance your experience.{' '}\n              <a href=\"/privacy\" className=\"text-nature-600 hover:text-nature-700 font-medium\">\n                Privacy Policy\n              </a>\n            </p>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CompleteProfile;"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "import React, { useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../config/api';\nimport { User } from '../types';\n\n\ninterface CreateTripProps {\n  user: User;\n}\n\n// Enhanced interfaces for advanced features\ninterface ScheduleDay {\n  day: number;\n  title: string;\n  activities: string[];\n}\n\ninterface LocationCoordinates {\n  latitude: number;\n  longitude: number;\n}\n\ninterface PickupDropPoint {\n  name: string;\n  address: string;\n  coordinates?: [number, number];\n  time?: string;\n  contactPerson?: string;\n  contactPhone?: string;\n  landmarks?: string;\n  instructions?: string;\n}\n\ninterface PackageOption {\n  id: string;\n  name: string;\n  description: string;\n  price: number;\n  capacity?: number;\n  inclusions: string[];\n  exclusions: string[];\n  isActive: boolean;\n  sortOrder: number;\n}\n\ninterface PaymentConfig {\n  paymentType: 'full' | 'advance';\n  advanceAmount?: number;\n  dueDate?: Date;\n  refundPolicy: string;\n  paymentMethods: string[];\n  in"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "structions?: string;\n}\n\nconst CreateTrip: React.FC<CreateTripProps> = ({ user }) => {\n  const navigate = useNavigate();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [currentStep, setCurrentStep] = useState(1);\n  const totalSteps = 7;\n  \n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    destination: '',\n    price: '',\n    capacity: '',\n    minimumAge: '',\n    categories: [] as string[],\n    startDate: '',\n    endDate: '',\n    itinerary: '',\n    location: null as LocationCoordinates | null,\n    difficultyLevel: 'intermediate' as 'beginner' | 'intermediate' | 'advanced',\n    includedItems: [] as string[],\n    excludedItems: [] as string[],\n    requirements: [] as string[],\n    cancellationPolicy: 'moderate',\n    whatsappGroup: {\n      enabled: false,\n      groupName: '',\n      description: '',\n      joinLink: ''\n    }\n  });\n  \n  const [schedule, setSchedule] = useState<ScheduleDay[]>([]);\n  const [pickupPoints, setPickupPoints] = useSta"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "te<PickupDropPoint[]>([]);\n  const [dropOffPoints, setDropOffPoints] = useState<PickupDropPoint[]>([]);\n  const [packages, setPackages] = useState<PackageOption[]>([]);\n  const [paymentConfig, setPaymentConfig] = useState<PaymentConfig>({\n    paymentType: 'advance',\n    advanceAmount: 1000,\n    refundPolicy: 'moderate',\n    paymentMethods: ['card', 'upi'],\n    instructions: ''\n  });\n  const [images, setImages] = useState<File[]>([]);\n  const [coverImageIndex, setCoverImageIndex] = useState(0);\n  const [itineraryPdf, setItineraryPdf] = useState<File | null>(null);\n  const [paymentQR, setPaymentQR] = useState<File | null>(null);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n\n  const categories = ['Adventure', 'Cultural', 'Beach', 'Mountain', 'City', 'Nature', 'Wildlife', 'Desert', 'Arctic', 'Botanical', 'Photography', 'Spiritual', 'Culinary', 'Historical', 'Sports'];\n  \n  const include"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "dItemsOptions = [\n    'Accommodation', 'Meals', 'Transportation', 'Guide', 'Equipment', \n    'Permits', 'Insurance', 'First Aid', 'Photography', 'Activities'\n  ];\n  \n  const requirementsOptions = [\n    'Good Physical Fitness', 'Swimming Ability', 'Previous Experience',\n    'Medical Certificate', 'Valid ID/Passport', 'Special Equipment',\n    'Age Restrictions', 'No Health Conditions'\n  ];\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  \n  const handleArrayChange = (field: keyof typeof formData, value: string) => {\n    const currentArray = formData[field] as string[];\n    setFormData({\n      ...formData,\n      [field]: currentArray.includes(value)\n        ? currentArray.filter(item => item !== value)\n        : [...currentArray, value]\n    });\n  };\n  \n  // Enhanced file upload with progress tracking\n  const uploadFileToServer = async (fi"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "le: File): Promise<string> => {\n    \n    // Convert file to base64 for our API\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = async () => {\n        try {\n          const base64Data = (reader.result as string).split(',')[1];\n          const response = await api.post('/files/upload/base64', {\n            data: base64Data,\n            filename: file.name,\n            mimeType: file.type\n          });\n          const responseData = response.data as { file: { url: string } };\n          resolve(responseData.file.url);\n        } catch (error) {\n          reject(error);\n        }\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(file);\n    });\n  };\n\n  const handleCategoryChange = (category: string) => {\n    handleArrayChange('categories', category);\n  };\n  \n  // Schedule management\n  const addScheduleDay = () => {\n    const newDay = {\n      day: schedule.length + 1,\n      title: '',\n      activities: ['']\n    };\n    s"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "etSchedule([...schedule, newDay]);\n  };\n  \n  const updateScheduleDay = (dayIndex: number, field: keyof ScheduleDay, value: any) => {\n    const updatedSchedule = [...schedule];\n    if (field === 'activities') {\n      updatedSchedule[dayIndex].activities = value;\n    } else {\n      (updatedSchedule[dayIndex] as any)[field] = value;\n    }\n    setSchedule(updatedSchedule);\n  };\n  \n  const addActivity = (dayIndex: number) => {\n    const updatedSchedule = [...schedule];\n    updatedSchedule[dayIndex].activities.push('');\n    setSchedule(updatedSchedule);\n  };\n  \n  const removeActivity = (dayIndex: number, activityIndex: number) => {\n    const updatedSchedule = [...schedule];\n    updatedSchedule[dayIndex].activities.splice(activityIndex, 1);\n    setSchedule(updatedSchedule);\n  };\n  \n  const removeScheduleDay = (dayIndex: number) => {\n    const updatedSchedule = schedule.filter((_, index) => index !== dayIndex)\n      .map((day, index) => ({ ...day, day: index + 1 }));\n    setSchedule(updatedSch"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "edule);\n  };\n  \n  // Pickup and drop-off point management\n  const addPickupPoint = () => {\n    setPickupPoints([...pickupPoints, {\n      name: '',\n      address: '',\n      time: '',\n      contactPerson: '',\n      contactPhone: '',\n      landmarks: '',\n      instructions: ''\n    }]);\n  };\n  \n  const updatePickupPoint = (index: number, field: keyof PickupDropPoint, value: string) => {\n    const updated = [...pickupPoints];\n    (updated[index] as any)[field] = value;\n    setPickupPoints(updated);\n  };\n  \n  const removePickupPoint = (index: number) => {\n    setPickupPoints(pickupPoints.filter((_, i) => i !== index));\n  };\n  \n  const addDropOffPoint = () => {\n    setDropOffPoints([...dropOffPoints, {\n      name: '',\n      address: '',\n      time: '',\n      contactPerson: '',\n      contactPhone: '',\n      landmarks: '',\n      instructions: ''\n    }]);\n  };\n  \n  const updateDropOffPoint = (index: number, field: keyof PickupDropPoint, value: string) => {\n    const updated = [...dropOffPoints];"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "(updated[index] as any)[field] = value;\n    setDropOffPoints(updated);\n  };\n  \n  const removeDropOffPoint = (index: number) => {\n    setDropOffPoints(dropOffPoints.filter((_, i) => i !== index));\n  };\n\n  // Package management\n  const addPackage = () => {\n    const newPackage: PackageOption = {\n      id: `pkg_${Date.now()}`,\n      name: '',\n      description: '',\n      price: 0,\n      capacity: formData.capacity ? parseInt(formData.capacity) : 10,\n      inclusions: [],\n      exclusions: [],\n      isActive: true,\n      sortOrder: packages.length + 1\n    };\n    setPackages([...packages, newPackage]);\n  };\n\n  const updatePackage = (packageId: string, field: keyof PackageOption, value: any) => {\n    setPackages(packages.map(pkg => \n      pkg.id === packageId ? { ...pkg, [field]: value } : pkg\n    ));\n  };\n\n  const removePackage = (packageId: string) => {\n    setPackages(packages.filter(pkg => pkg.id !== packageId));\n  };\n\n  const updatePackageInclusions = (packageId: string, inclusions"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": ": string[]) => {\n    updatePackage(packageId, 'inclusions', inclusions);\n  };\n\n  const updatePackageExclusions = (packageId: string, exclusions: string[]) => {\n    updatePackage(packageId, 'exclusions', exclusions);\n  };\n\n  const handleMultipleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    const validImages = files.filter(file => file.type.startsWith('image/'));\n    \n    if (validImages.length !== files.length) {\n      setError('Some files were not valid images and were skipped');\n    }\n    \n    if (validImages.length > 10) {\n      setError('Maximum 10 images allowed');\n      return;\n    }\n    \n    setImages([...images, ...validImages].slice(0, 10));\n    setError('');\n  };\n  \n  const removeImage = (index: number) => {\n    const newImages = images.filter((_, i) => i !== index);\n    setImages(newImages);\n    if (coverImageIndex >= newImages.length) {\n      setCoverImageIndex(Math.max(0, newImages.length - 1));\n    }\n  }"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": ";\n  \n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>, type: 'itinerary' | 'paymentQR') => {\n    const file = e.target.files?.[0];\n    if (file && type === 'itinerary') {\n      if (file.type === 'application/pdf') {\n        setItineraryPdf(file);\n        setError('');\n      } else {\n        setError('Please select a valid PDF file for itinerary');\n      }\n    } else if (file && type === 'paymentQR') {\n      if (file.type.startsWith('image/')) {\n        setPaymentQR(file);\n        setError('');\n      } else {\n        setError('Please select a valid image file for payment QR code');\n      }\n    }\n  };\n  \n  // Step navigation\n  const nextStep = () => {\n    if (currentStep < totalSteps) {\n      setCurrentStep(currentStep + 1);\n    }\n  };\n  \n  const prevStep = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n  \n  const isStepValid = (step: number): boolean => {\n    switch (step) {\n      case 1:\n        return formData.title.trim() !== ''"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "&& formData.description.trim() !== '' && formData.destination.trim() !== '';\n      case 2:\n        return formData.price !== '' && formData.capacity !== '' && formData.startDate !== '' && formData.endDate !== '';\n      case 3:\n        return formData.categories.length > 0;\n      case 4:\n        return true; // Optional step (schedule/itinerary)\n      case 5:\n        return true; // Package configuration is optional\n      case 6:\n        return true; // Pickup/dropoff points are optional\n      case 7:\n        return true; // WhatsApp group is optional\n      default:\n        return false;\n    }\n  };\n\n  const handleSubmit = async (e?: React.FormEvent | React.MouseEvent) => {\n    if (e) {\n      e.preventDefault();\n    }\n    setLoading(true);\n    setError('');\n    setUploadProgress(0);\n    \n    let tripData: any = null;\n\n    try {\n      // Enhanced validation\n      if (!formData.title.trim()) throw new Error('Title is required');\n      if (!formData.description.trim()) throw new Error('Des"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "cription is required');\n      if (!formData.destination.trim()) throw new Error('Destination is required');\n      if (!formData.price || parseFloat(formData.price) <= 0) throw new Error('Valid price is required');\n      if (!formData.capacity || parseInt(formData.capacity) < 2) throw new Error('Capacity must be at least 2');\n      if (formData.categories.length === 0) throw new Error('At least one category is required');\n      \n      const startDate = new Date(formData.startDate);\n      const endDate = new Date(formData.endDate);\n      const today = new Date();\n      today.setHours(0, 0, 0, 0);\n      \n      if (startDate < today) throw new Error('Start date cannot be in the past');\n      if (startDate >= endDate) throw new Error('End date must be after start date');\n\n      // Upload files with progress tracking\n      let uploadedImageUrls: string[] = [];\n      let uploadedPdfUrl: string | undefined;\n      \n      setUploadProgress(10);\n      \n      if (images.length > 0) {\n        setUp"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "loadProgress(20);\n        const imageUploadPromises = images.map(image => uploadFileToServer(image));\n        uploadedImageUrls = await Promise.all(imageUploadPromises);\n        setUploadProgress(50);\n      }\n      \n      if (itineraryPdf) {\n        setUploadProgress(70);\n        uploadedPdfUrl = await uploadFileToServer(itineraryPdf);\n        setUploadProgress(75);\n      }\n      \n      let uploadedQRUrl: string | undefined;\n      if (paymentQR) {\n        setUploadProgress(80);\n        uploadedQRUrl = await uploadFileToServer(paymentQR);\n        setUploadProgress(85);\n      }\n\n      // Prepare enhanced trip data\n      tripData = {\n        title: formData.title.trim(),\n        description: formData.description.trim(),\n        destination: formData.destination.trim(),\n        price: parseFloat(formData.price),\n        capacity: parseInt(formData.capacity),\n        minimumAge: formData.minimumAge ? parseInt(formData.minimumAge) : undefined,\n        categories: formData.categories,"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "startDate: formData.startDate,\n        endDate: formData.endDate,\n        itinerary: formData.itinerary.trim() || 'Detailed itinerary will be provided upon booking.',\n        schedule: schedule.filter(day => day.title.trim() && day.activities.some(a => a.trim())),\n        images: uploadedImageUrls,\n        coverImage: uploadedImageUrls[coverImageIndex] || uploadedImageUrls[0],\n        itineraryPdf: uploadedPdfUrl,\n        paymentQR: uploadedQRUrl,\n        location: formData.location,\n        difficultyLevel: formData.difficultyLevel,\n        includedItems: formData.includedItems,\n        excludedItems: formData.excludedItems,\n        requirements: formData.requirements,\n        cancellationPolicy: formData.cancellationPolicy,\n        pickupPoints: pickupPoints.filter(point => point.name.trim() && point.address.trim()),\n        dropOffPoints: dropOffPoints.filter(point => point.name.trim() && point.address.trim()),\n        packages: packages.filter(pkg => pkg.name.trim() && pkg.descrip"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "tion.trim() && pkg.price > 0),\n        paymentConfig: {\n          ...paymentConfig,\n          dueDate: paymentConfig.dueDate || new Date(new Date(formData.startDate).getTime() - 3 * 24 * 60 * 60 * 1000) // 3 days before trip\n        },\n        whatsappGroup: formData.whatsappGroup.enabled ? formData.whatsappGroup : null\n      };\n\n      setUploadProgress(90);\n      \n      // Submit with timeout (increased for Render)\n      const response = await Promise.race([\n        api.post('/trips', tripData),\n        new Promise((_, reject) => \n          setTimeout(() => reject(new Error('Request timeout - please try again')), 30000)\n        )\n      ]) as any;\n      \n      setUploadProgress(100);\n      console.log('Trip created successfully:', response?.data);\n      \n      // Success notification\n      // const tripId = response?.data?.trip?._id; // For future use\n      alert(`üéâ Trip \"${formData.title}\" created successfully! Redirecting...`);\n      \n      setTimeout(() => {\n        navigate('/trips"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "');\n      }, 1000);\n      \n    } catch (error: any) {\n      // Enhanced error logging for debugging\n      console.error('‚ùå Error creating trip:', error);\n      console.error('üìã Full error object:', JSON.stringify(error, null, 2));\n      console.error('üî¢ Status code:', error.response?.status);\n      console.error('üîç Error message:', error.message);\n      console.error('üì¶ Response data:', error.response?.data);\n      console.error('üì§ Trip data being sent:', JSON.stringify(tripData, null, 2));\n      \n      // Enhanced error handling\n      let errorMessage = 'Failed to create trip';\n      \n      // Handle QR code requirement error specifically\n      if (error.response?.data?.actionRequired === 'upload_qr_code' || \n          error.response?.data?.error === 'Payment QR code required' ||\n          error.response?.data?.message?.toLowerCase().includes('qr code')) {\n        errorMessage = error.response.data.message || 'Please upload at least one payment QR code before creating a trip. You can"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "upload QR codes from your profile settings.';\n        // Optionally redirect to profile settings\n        setTimeout(() => {\n          if (window.confirm('Would you like to go to your profile settings to upload a QR code?')) {\n            navigate('/profile');\n          }\n        }, 2000);\n      } else if (error.message) {\n        errorMessage = error.message;\n      } else if (error.response?.data?.message) {\n        errorMessage = error.response.data.message;\n      } else if (error.response?.data?.error) {\n        if (typeof error.response.data.error === 'string') {\n          errorMessage = error.response.data.error;\n        } else if (error.response.data.error.fieldErrors) {\n          const fieldErrors = error.response.data.error.fieldErrors;\n          const firstError = Object.values(fieldErrors)[0];\n          errorMessage = Array.isArray(firstError) ? firstError[0] : String(firstError);\n        } else {\n          errorMessage = JSON.stringify(error.response.data.error);\n        }"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "} else if (error.response?.status === 401) {\n        errorMessage = 'Authentication required. Please log in again.';\n      } else if (error.response?.status === 403) {\n        errorMessage = 'You do not have permission to create trips. Please ensure you have organizer role.';\n      } else if (error.response?.status === 400) {\n        errorMessage = 'Invalid data provided. Please check all required fields and try again.';\n      } else if (error.response?.status >= 500) {\n        errorMessage = 'Server error. Please try again later.';\n      } else if (error.code === 'NETWORK_ERROR') {\n        errorMessage = 'Network error. Please check your connection.';\n      }\n      \n      // Add debug info for development\n      if (process.env.NODE_ENV === 'development') {\n        errorMessage += ` (Debug: ${error.response?.status} - ${JSON.stringify(error.response?.data).substring(0, 200)})`;\n      }\n      \n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n      setUploadProg"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "ress(0);\n    }\n  };\n\n  const renderStepContent = () => {\n    switch (currentStep) {\n      case 1:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-2xl font-bold text-forest-800 mb-2\">‚ú® Basic Information</h2>\n              <p className=\"text-forest-600\">Tell us about your amazing adventure</p>\n            </div>\n            \n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div className=\"md:col-span-2\">\n                <label htmlFor=\"title\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üéØ Adventure Title\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"title\"\n                  name=\"title\"\n                  required\n                  value={formData.title}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-no"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "ne focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Epic Himalayan Trek, Bali Cultural Journey, etc.\"\n                />\n              </div>\n              \n              <div className=\"md:col-span-2\">\n                <label htmlFor=\"description\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üìù Adventure Description\n                </label>\n                <textarea\n                  id=\"description\"\n                  name=\"description\"\n                  required\n                  rows={5}\n                  value={formData.description}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50 resize-none\"\n                  placeholder=\"Describe what makes this adventure special, wh"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "at participants can expect, and what makes it unique...\"\n                />\n              </div>\n              \n              <div>\n                <label htmlFor=\"destination\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üìç Destination\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"destination\"\n                  name=\"destination\"\n                  required\n                  value={formData.destination}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Manali, Himachal Pradesh, India\"\n                />\n              </div>\n              \n              <div>\n                <label htmlFor=\"difficultyLevel\" className=\"block text-sm font-semibold text-forest-700 mb-3\">"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "‚ö° Difficulty Level\n                </label>\n                <select\n                  id=\"difficultyLevel\"\n                  name=\"difficultyLevel\"\n                  value={formData.difficultyLevel}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                >\n                  <option value=\"beginner\">üü¢ Beginner - Easy for everyone</option>\n                  <option value=\"intermediate\">üü° Intermediate - Moderate fitness required</option>\n                  <option value=\"advanced\">üî¥ Advanced - High fitness & experience needed</option>\n                </select>\n              </div>\n            </div>\n          </div>\n        );\n        \n      case 2:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8\">\n              <h2 class"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "Name=\"text-2xl font-bold text-forest-800 mb-2\">üí∞ Pricing & Schedule</h2>\n              <p className=\"text-forest-600\">Set your dates and pricing details</p>\n            </div>\n            \n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <label htmlFor=\"price\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üí∞ Price per Person (‚Çπ)\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"price\"\n                  name=\"price\"\n                  required\n                  min=\"1\"\n                  step=\"1\"\n                  value={formData.price}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Enter price\"\n                />\n              </div>"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "<div>\n                <label htmlFor=\"capacity\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üë• Group Size (Max Participants)\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"capacity\"\n                  name=\"capacity\"\n                  required\n                  min=\"2\"\n                  max=\"50\"\n                  value={formData.capacity}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Enter capacity\"\n                />\n              </div>\n              \n              <div>\n                <label htmlFor=\"minimumAge\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üéÇ Minimum Age Requirement\n                </l"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "abel>\n                <input\n                  type=\"number\"\n                  id=\"minimumAge\"\n                  name=\"minimumAge\"\n                  min=\"1\"\n                  max=\"100\"\n                  value={formData.minimumAge}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Enter minimum age\"\n                />\n                <p className=\"mt-1 text-sm text-forest-600\">\n                  Leave empty if no age restriction. Only travelers meeting this age requirement can join.\n                </p>\n              </div>\n              \n              <div>\n                <label htmlFor=\"startDate\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üóìÔ∏è Start Date\n                </label>\n                <input\n                  typ"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "e=\"date\"\n                  id=\"startDate\"\n                  name=\"startDate\"\n                  required\n                  value={formData.startDate}\n                  onChange={handleChange}\n                  min={new Date().toISOString().split('T')[0]}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                />\n              </div>\n              \n              <div>\n                <label htmlFor=\"endDate\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üèÅ End Date\n                </label>\n                <input\n                  type=\"date\"\n                  id=\"endDate\"\n                  name=\"endDate\"\n                  required\n                  value={formData.endDate}\n                  onChange={handleChange}\n                  min={formData.startDate || new Date().toISOString().split('T"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "')[0]}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                />\n              </div>\n            </div>\n            \n            <div>\n              <label htmlFor=\"cancellationPolicy\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                üîÑ Cancellation Policy\n              </label>\n              <select\n                id=\"cancellationPolicy\"\n                name=\"cancellationPolicy\"\n                value={formData.cancellationPolicy}\n                onChange={handleChange}\n                className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n              >\n                <option value=\"flexible\">Flexible - Full refund 24h before</option>\n                <optio"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "n value=\"moderate\">Moderate - 50% refund 3 days before</option>\n                <option value=\"strict\">Strict - No refund after booking</option>\n              </select>\n            </div>\n          </div>\n        );\n        \n      case 3:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-2xl font-bold text-forest-800 mb-2\">üè∑Ô∏è Categories & Details</h2>\n              <p className=\"text-forest-600\">Choose categories and specify what's included</p>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-semibold text-forest-700 mb-4\">\n                üéØ Adventure Categories (Select all that apply)\n              </label>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                {categories.map((category) => (\n                  <button\n                    key={category}\n                    type=\"button\"\n                    onClick={() ="
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "> handleCategoryChange(category)}\n                    className={`px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 border-2 ${\n                      formData.categories.includes(category)\n                        ? 'bg-nature-500 text-white border-nature-500 shadow-lg transform scale-105'\n                        : 'bg-forest-50 text-forest-700 border-forest-200 hover:border-nature-300 hover:bg-nature-50'\n                    }`}\n                  >\n                    {category}\n                  </button>\n                ))}\n              </div>\n            </div>\n            \n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  ‚úÖ What's Included\n                </label>\n                <div className=\"space-y-2 max-h-48 overflow-y-auto border border-forest-200 rounded-xl p-4 bg-forest-50/30\">\n                  {includedItemsOptions.map((item)"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "=> (\n                    <label key={item} className=\"flex items-center space-x-3 cursor-pointer hover:bg-forest-100/50 p-2 rounded-lg\">\n                      <input\n                        type=\"checkbox\"\n                        checked={formData.includedItems.includes(item)}\n                        onChange={() => handleArrayChange('includedItems', item)}\n                        className=\"w-4 h-4 text-nature-600 border-forest-300 rounded focus:ring-nature-500\"\n                      />\n                      <span className=\"text-sm text-forest-700\">{item}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üìã Requirements\n                </label>\n                <div className=\"space-y-2 max-h-48 overflow-y-auto border border-forest-200 rounded-xl p-4 bg-forest-50/30\">\n                  {requirement"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "sOptions.map((requirement) => (\n                    <label key={requirement} className=\"flex items-center space-x-3 cursor-pointer hover:bg-forest-100/50 p-2 rounded-lg\">\n                      <input\n                        type=\"checkbox\"\n                        checked={formData.requirements.includes(requirement)}\n                        onChange={() => handleArrayChange('requirements', requirement)}\n                        className=\"w-4 h-4 text-nature-600 border-forest-300 rounded focus:ring-nature-500\"\n                      />\n                      <span className=\"text-sm text-forest-700\">{requirement}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n        \n      case 4:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-2xl font-bold text-forest-800 mb-2\">üì∏ Media & Itinerary</h2>"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "<p className=\"text-forest-600\">Add photos and detailed schedule</p>\n            </div>\n            \n            {/* Image Upload */}\n            <div>\n              <label className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                üñºÔ∏è Adventure Photos (Max 10 images)\n              </label>\n              <div className=\"border-2 border-dashed border-forest-300 rounded-xl p-6 text-center hover:border-nature-400 transition-colors\">\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  multiple\n                  onChange={handleMultipleImageUpload}\n                  className=\"hidden\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => fileInputRef.current?.click()}\n                  className=\"inline-flex items-center px-4 py-2 bg-nature-500 text-white rounded-lg hover:bg-nature-600 transition-colors\"\n                >"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "üì∑ Choose Images\n                </button>\n                <p className=\"mt-2 text-sm text-forest-600\">JPG, PNG, WebP up to 10MB each</p>\n              </div>\n              \n              {/* Image Preview */}\n              {images.length > 0 && (\n                <div className=\"mt-4\">\n                  <p className=\"text-sm font-medium text-forest-700 mb-2\">Selected Images ({images.length}/10)</p>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                    {images.map((image, index) => (\n                      <div key={index} className=\"relative group\">\n                        <img\n                          src={URL.createObjectURL(image)}\n                          alt={`Upload ${index + 1}`}\n                          className={`w-full h-24 object-cover rounded-lg border-2 ${\n                            coverImageIndex === index \n                              ? 'border-nature-500 ring-2 ring-nature-200' \n                              : 'borde"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "r-forest-200'\n                          }`}\n                        />\n                        <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2\">\n                          <button\n                            type=\"button\"\n                            onClick={() => setCoverImageIndex(index)}\n                            className={`px-2 py-1 text-xs rounded ${\n                              coverImageIndex === index \n                                ? 'bg-nature-500 text-white' \n                                : 'bg-white text-forest-700'\n                            }`}\n                          >\n                            {coverImageIndex === index ? '‚≠ê Cover' : 'Set Cover'}\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => removeImage(index)}\n                            className=\"px-2"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600\"\n                          >\n                            üóëÔ∏è Remove\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n            \n            {/* Itinerary */}\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <label htmlFor=\"itinerary\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üó∫Ô∏è Detailed Itinerary\n                </label>\n                <textarea\n                  id=\"itinerary\"\n                  name=\"itinerary\"\n                  rows={6}\n                  value={formData.itinerary}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transitio"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "n-all duration-300 bg-forest-50/50 resize-none\"\n                  placeholder=\"Day 1: Arrival and orientation...\\nDay 2: Morning hike to base camp...\\nDay 3: Summit day...\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üìÑ Itinerary PDF (Optional)\n                </label>\n                <div className=\"border-2 border-dashed border-forest-300 rounded-xl p-6 text-center hover:border-nature-400 transition-colors\">\n                  <input\n                    type=\"file\"\n                    accept=\".pdf\"\n                    onChange={(e) => handleFileChange(e, 'itinerary')}\n                    className=\"hidden\"\n                    id=\"pdf-upload\"\n                  />\n                  <label\n                    htmlFor=\"pdf-upload\"\n                    className=\"inline-flex items-center px-4 py-2 bg-forest-500 text-white rounded-lg hover:bg-forest-600 transit"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "ion-colors cursor-pointer\"\n                  >\n                    üìã Choose PDF\n                  </label>\n                  <p className=\"mt-2 text-sm text-forest-600\">Detailed itinerary for participants</p>\n                  \n                  {itineraryPdf && (\n                    <div className=\"mt-3 text-sm text-forest-700 bg-forest-50 p-2 rounded\">\n                      ‚úÖ Selected: {itineraryPdf.name}\n                    </div>\n                  )}\n                </div>\n                \n                {/* Payment QR Code Upload */}\n                <div className=\"mt-6\">\n                  <label className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                    üí≥ Payment QR Code (Temporary Solution)\n                  </label>\n                  <div className=\"border-2 border-dashed border-forest-300 rounded-xl p-6 text-center hover:border-nature-400 transition-colors\">\n                    <input\n                      type=\"file\"\n                      accept=\"image"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "/*\"\n                      onChange={(e) => handleFileChange(e, 'paymentQR')}\n                      className=\"hidden\"\n                      id=\"qr-upload\"\n                    />\n                    <label\n                      htmlFor=\"qr-upload\"\n                      className=\"inline-flex items-center px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors cursor-pointer\"\n                    >\n                      üì± Upload Payment QR\n                    </label>\n                    <p className=\"mt-2 text-sm text-forest-600\">Upload your UPI/Bank QR code for payments</p>\n                    <div className=\"mt-2 text-xs text-amber-600\">\n                      ‚ö†Ô∏è Temporary solution while Razorpay is under review\n                    </div>\n                    \n                    {paymentQR && (\n                      <div className=\"mt-4\">\n                        <div className=\"text-sm text-forest-700 bg-green-50 p-2 rounded mb-2\">\n                          ‚úÖ Q"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "R Code: {paymentQR.name}\n                        </div>\n                        <img\n                          src={URL.createObjectURL(paymentQR)}\n                          alt=\"Payment QR Code Preview\"\n                          className=\"mx-auto w-32 h-32 object-cover border-2 border-green-300 rounded-lg\"\n                        />\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Schedule Builder */}\n                <div className=\"mt-6\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <label className=\"block text-sm font-semibold text-forest-700\">\n                      üìÖ Day-by-Day Schedule\n                    </label>\n                    <button\n                      type=\"button\"\n                      onClick={addScheduleDay}\n                      className=\"px-3 py-1 bg-nature-500 text-white text-sm rounded-lg hover:bg-nature-600 transition-color"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "s\"\n                    >\n                      ‚ûï Add Day\n                    </button>\n                  </div>\n                  \n                  <div className=\"space-y-3 max-h-64 overflow-y-auto\">\n                    {schedule.map((day, dayIndex) => (\n                      <div key={dayIndex} className=\"border border-forest-200 rounded-lg p-3 bg-forest-50/30\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <span className=\"font-medium text-forest-700\">Day {day.day}</span>\n                          <button\n                            type=\"button\"\n                            onClick={() => removeScheduleDay(dayIndex)}\n                            className=\"text-red-500 hover:text-red-700 text-sm\"\n                          >\n                            üóëÔ∏è Remove\n                          </button>\n                        </div>\n                        \n                        <input\n                          type=\"text\""
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "placeholder=\"Day title (e.g., 'Summit Day', 'Rest & Explore')\"\n                          value={day.title}\n                          onChange={(e) => updateScheduleDay(dayIndex, 'title', e.target.value)}\n                          className=\"w-full px-3 py-2 mb-2 text-sm border border-forest-300 rounded focus:outline-none focus:ring-1 focus:ring-nature-500\"\n                        />\n                        \n                        {day.activities.map((activity, activityIndex) => (\n                          <div key={activityIndex} className=\"flex gap-2 mb-1\">\n                            <input\n                              type=\"text\"\n                              placeholder=\"Activity description\"\n                              value={activity}\n                              onChange={(e) => {\n                                const newActivities = [...day.activities];\n                                newActivities[activityIndex] = e.target.value;"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "updateScheduleDay(dayIndex, 'activities', newActivities);\n                              }}\n                              className=\"flex-1 px-3 py-1 text-sm border border-forest-300 rounded focus:outline-none focus:ring-1 focus:ring-nature-500\"\n                            />\n                            {day.activities.length > 1 && (\n                              <button\n                                type=\"button\"\n                                onClick={() => removeActivity(dayIndex, activityIndex)}\n                                className=\"px-2 py-1 text-red-500 hover:text-red-700 text-sm\"\n                              >\n                                ‚úï\n                              </button>\n                            )}\n                          </div>\n                        ))}\n                        \n                        <button\n                          type=\"button\"\n                          onClick={() => addActivity(dayIndex)}"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "className=\"mt-2 px-3 py-1 text-xs bg-forest-200 text-forest-700 rounded hover:bg-forest-300 transition-colors\"\n                        >\n                          ‚ûï Add Activity\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n        \n      case 5:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-2xl font-bold text-forest-800 mb-2\">üéÅ Package Options & Payment</h2>\n              <p className=\"text-forest-600\">Create different package options and configure payment settings</p>\n            </div>\n            \n            {/* Package Options */}\n            <div>\n              <div className=\"flex items-center justify-between mb-4\">\n                <label className=\"block text-lg font-semibold text-forest-700\">\n                  üéÅ Package Options"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "</label>\n                <button\n                  type=\"button\"\n                  onClick={addPackage}\n                  className=\"px-4 py-2 bg-nature-500 text-white text-sm rounded-lg hover:bg-nature-600 transition-colors\"\n                >\n                  ‚ûï Add Package\n                </button>\n              </div>\n              \n              <div className=\"space-y-4 max-h-64 overflow-y-auto\">\n                {packages.map((pkg, index) => (\n                  <div key={pkg.id} className=\"border border-forest-200 rounded-xl p-4 bg-forest-50/30\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <span className=\"font-medium text-forest-700\">Package {index + 1}</span>\n                      <button\n                        type=\"button\"\n                        onClick={() => removePackage(pkg.id)}\n                        className=\"text-red-500 hover:text-red-700 text-sm px-2 py-1 rounded hover:bg-red-50\""
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": ">\n                        üóëÔ∏è Remove\n                      </button>\n                    </div>\n                    \n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Package Name *\n                        </label>\n                        <input\n                          type=\"text\"\n                          placeholder=\"Basic, Premium, Luxury, etc.\"\n                          value={pkg.name}\n                          onChange={(e) => updatePackage(pkg.id, 'name', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "Price per Person (‚Çπ) *\n                        </label>\n                        <input\n                          type=\"number\"\n                          min=\"0\"\n                          placeholder=\"Enter price\"\n                          value={pkg.price || ''}\n                          onChange={(e) => updatePackage(pkg.id, 'price', e.target.value ? parseFloat(e.target.value) : '')}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Description *\n                        </label>\n                        <textarea\n                          rows={2}\n                          placeholder=\"What makes this package special...\""
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "value={pkg.description}\n                          onChange={(e) => updatePackage(pkg.id, 'description', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500 resize-none\"\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Inclusions (comma separated)\n                        </label>\n                        <input\n                          type=\"text\"\n                          placeholder=\"Accommodation, Meals, Guide, etc.\"\n                          value={pkg.inclusions.join(', ')}\n                          onChange={(e) => updatePackageInclusions(pkg.id, e.target.value.split(',').map(s => s.trim()).filter(s => s))}\n                          className=\"w-full px-3 py-2 border border-forest-300 r"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "ounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Exclusions (comma separated)\n                        </label>\n                        <input\n                          type=\"text\"\n                          placeholder=\"Personal expenses, Tips, etc.\"\n                          value={pkg.exclusions.join(', ')}\n                          onChange={(e) => updatePackageExclusions(pkg.id, e.target.value.split(',').map(s => s.trim()).filter(s => s))}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                ))}\n                \n                {packag"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "es.length === 0 && (\n                  <div className=\"text-center py-8 text-forest-500\">\n                    <p>No packages added yet. Add different package options to give travelers more choices!</p>\n                  </div>\n                )}\n              </div>\n            </div>\n            \n            {/* Payment Configuration */}\n            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-6\">\n              <h3 className=\"text-lg font-semibold text-forest-700 mb-4\">üí≥ Payment Configuration</h3>\n              \n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                    Payment Type\n                  </label>\n                  <select\n                    value={paymentConfig.paymentType}\n                    onChange={(e) => setPaymentConfig({...paymentConfig, paymentType: e.target.value as 'full' | 'advance'})}\n                    className=\"w"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                  >\n                    <option value=\"full\">Full Payment Required</option>\n                    <option value=\"advance\">Advance Payment</option>\n                  </select>\n                </div>\n                \n                {paymentConfig.paymentType === 'advance' && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                      üíµ Advance Amount Required (‚Çπ)\n                    </label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      step=\"1\"\n                      value={paymentConfig.advanceAmount || ''}\n                      onChange={(e) => setPaymentConfig({...paymentConfig, advanceAmount: e.target.value ? parseInt(e.target.value) : 0})}\n                      className=\"w-full px-3 py-2 border border-forest-300 rounded-"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                      placeholder=\"Enter amount\"\n                    />\n                    <p className=\"mt-1 text-sm text-forest-600\">\n                      Set to 0 for no advance payment required. Organizers can set any amount they want.\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        );\n        \n      case 6:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-2xl font-bold text-forest-800 mb-2\">üöå Pickup & Drop-off Points</h2>\n              <p className=\"text-forest-600\">Add convenient pickup and drop-off locations for participants</p>\n            </div>\n            \n            {/* Pickup Points */}\n            <div>\n              <div className=\"flex items-center justify-between mb-4\">\n                <label className=\"block text-lg font-semibold text-for"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "est-700\">\n                  üìç Pickup Points\n                </label>\n                <button\n                  type=\"button\"\n                  onClick={addPickupPoint}\n                  className=\"px-4 py-2 bg-nature-500 text-white text-sm rounded-lg hover:bg-nature-600 transition-colors\"\n                >\n                  ‚ûï Add Pickup Point\n                </button>\n              </div>\n              \n              <div className=\"space-y-4 max-h-64 overflow-y-auto\">\n                {pickupPoints.map((point, index) => (\n                  <div key={index} className=\"border border-forest-200 rounded-xl p-4 bg-forest-50/30\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <span className=\"font-medium text-forest-700\">Pickup Point {index + 1}</span>\n                      <button\n                        type=\"button\"\n                        onClick={() => removePickupPoint(index)}\n                        className=\"text-red-500 hover:text"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "-red-700 text-sm px-2 py-1 rounded hover:bg-red-50\"\n                      >\n                        üóëÔ∏è Remove\n                      </button>\n                    </div>\n                    \n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Location Name *\n                        </label>\n                        <input\n                          type=\"text\"\n                          placeholder=\"Metro Station, Bus Stop, etc.\"\n                          value={point.name}\n                          onChange={(e) => updatePickupPoint(index, 'name', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                        />\n                      </div>\n                      \n                      <div>"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "<label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Pickup Time\n                        </label>\n                        <input\n                          type=\"time\"\n                          value={point.time || ''}\n                          onChange={(e) => updatePickupPoint(index, 'time', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Full Address *\n                        </label>\n                        <input\n                          type=\"text\"\n                          placeholder=\"Complete address with landmarks\"\n                          value={point.address}"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "onChange={(e) => updatePickupPoint(index, 'address', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Contact Person\n                        </label>\n                        <input\n                          type=\"text\"\n                          placeholder=\"Person name for coordination\"\n                          value={point.contactPerson || ''}\n                          onChange={(e) => updatePickupPoint(index, 'contactPerson', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                        />\n                      </div>"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "<div>\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Contact Phone\n                        </label>\n                        <input\n                          type=\"tel\"\n                          placeholder=\"Contact number\"\n                          value={point.contactPhone || ''}\n                          onChange={(e) => updatePickupPoint(index, 'contactPhone', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Landmarks & Instructions\n                        </label>\n                        <textarea"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "rows={2}\n                          placeholder=\"Nearby landmarks, special instructions for participants...\"\n                          value={point.instructions || ''}\n                          onChange={(e) => updatePickupPoint(index, 'instructions', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500 resize-none\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                ))}\n                \n                {pickupPoints.length === 0 && (\n                  <div className=\"text-center py-8 text-forest-500\">\n                    <p>No pickup points added yet. Add at least one pickup point to help participants.</p>\n                  </div>\n                )}\n              </div>\n            </div>\n            \n            {/* Drop-off Points */}\n            <div>\n              <div className=\"flex items-cente"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "r justify-between mb-4\">\n                <label className=\"block text-lg font-semibold text-forest-700\">\n                  üèÅ Drop-off Points\n                </label>\n                <button\n                  type=\"button\"\n                  onClick={addDropOffPoint}\n                  className=\"px-4 py-2 bg-forest-500 text-white text-sm rounded-lg hover:bg-forest-600 transition-colors\"\n                >\n                  ‚ûï Add Drop-off Point\n                </button>\n              </div>\n              \n              <div className=\"space-y-4 max-h-64 overflow-y-auto\">\n                {dropOffPoints.map((point, index) => (\n                  <div key={index} className=\"border border-forest-200 rounded-xl p-4 bg-forest-50/30\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <span className=\"font-medium text-forest-700\">Drop-off Point {index + 1}</span>\n                      <button\n                        type=\"button\""
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "onClick={() => removeDropOffPoint(index)}\n                        className=\"text-red-500 hover:text-red-700 text-sm px-2 py-1 rounded hover:bg-red-50\"\n                      >\n                        üóëÔ∏è Remove\n                      </button>\n                    </div>\n                    \n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Location Name *\n                        </label>\n                        <input\n                          type=\"text\"\n                          placeholder=\"Metro Station, Bus Stop, etc.\"\n                          value={point.name}\n                          onChange={(e) => updateDropOffPoint(index, 'name', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                        /"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": ">\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Expected Drop-off Time\n                        </label>\n                        <input\n                          type=\"time\"\n                          value={point.time || ''}\n                          onChange={(e) => updateDropOffPoint(index, 'time', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Full Address *\n                        </label>\n                        <input\n                          type=\"text\""
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "placeholder=\"Complete address with landmarks\"\n                          value={point.address}\n                          onChange={(e) => updateDropOffPoint(index, 'address', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500\"\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-forest-700 mb-1\">\n                          Instructions for Participants\n                        </label>\n                        <textarea\n                          rows={2}\n                          placeholder=\"Meeting point details, what to expect, next steps...\"\n                          value={point.instructions || ''}\n                          onChange={(e) => updateDropOffPoint(index, 'instructions', e.target.value)}"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "className=\"w-full px-3 py-2 border border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-nature-500 resize-none\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                ))}\n                \n                {dropOffPoints.length === 0 && (\n                  <div className=\"text-center py-8 text-forest-500\">\n                    <p>No drop-off points added yet. You can use the same locations as pickup points or specify different ones.</p>\n                  </div>\n                )}\n              </div>\n            </div>\n            \n            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\n              <h3 className=\"font-medium text-blue-800 mb-2\">üí° Tips for Pickup & Drop-off Points:</h3>\n              <ul className=\"text-sm text-blue-700 space-y-1\">\n                <li>‚Ä¢ Choose easily accessible locations with parking</li>\n                <li>‚Ä¢ Include major landmarks and cl"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "ear instructions</li>\n                <li>‚Ä¢ Consider multiple pickup points for participant convenience</li>\n                <li>‚Ä¢ Add contact information for last-minute coordination</li>\n                <li>‚Ä¢ Drop-off points can be the same as pickup points</li>\n              </ul>\n            </div>\n          </div>\n        );\n        \n      case 7:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-2xl font-bold text-forest-800 mb-2\">üí¨ WhatsApp Group</h2>\n              <p className=\"text-forest-600\">Create a WhatsApp group for participants to connect before the trip</p>\n            </div>\n            \n            <div className=\"bg-green-50 border border-green-200 rounded-xl p-6\">\n              <div className=\"flex items-start space-x-4\">\n                <div className=\"flex-shrink-0\">\n                  <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center\">"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "<span className=\"text-2xl\">üí¨</span>\n                  </div>\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-semibold text-green-800 mb-2\">Connect Your Participants</h3>\n                  <p className=\"text-green-700 mb-4\">\n                    Create a WhatsApp group to help participants connect, share excitement, and coordinate before the trip. \n                    This builds community and makes the experience more enjoyable for everyone!\n                  </p>\n                  \n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"whatsappEnabled\"\n                        checked={formData.whatsappGroup.enabled}\n                        onChange={(e) => setFormData(prev => ({\n                          ...prev,\n                          whatsappGroup: {"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "...prev.whatsappGroup,\n                            enabled: e.target.checked\n                          }\n                        }))}\n                        className=\"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded\"\n                      />\n                      <label htmlFor=\"whatsappEnabled\" className=\"ml-2 text-sm font-medium text-green-800\">\n                        Enable WhatsApp group for this trip\n                      </label>\n                    </div>\n                    \n                    {formData.whatsappGroup.enabled && (\n                      <div className=\"space-y-4 pl-6 border-l-2 border-green-200\">\n                        <div>\n                          <label htmlFor=\"groupName\" className=\"block text-sm font-medium text-green-800 mb-1\">\n                            Group Name *\n                          </label>\n                          <input\n                            type=\"text\"\n                            id=\"groupName\""
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "value={formData.whatsappGroup.groupName}\n                            onChange={(e) => setFormData(prev => ({\n                              ...prev,\n                              whatsappGroup: {\n                                ...prev.whatsappGroup,\n                                groupName: e.target.value\n                              }\n                            }))}\n                            placeholder={`${formData.title} - Adventure Group`}\n                            className=\"w-full px-3 py-2 border border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                          />\n                        </div>\n                        \n                        <div>\n                          <label htmlFor=\"groupDescription\" className=\"block text-sm font-medium text-green-800 mb-1\">\n                            Group Description\n                          </label>\n                          <textarea"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "id=\"groupDescription\"\n                            rows={3}\n                            value={formData.whatsappGroup.description}\n                            onChange={(e) => setFormData(prev => ({\n                              ...prev,\n                              whatsappGroup: {\n                                ...prev.whatsappGroup,\n                                description: e.target.value\n                              }\n                            }))}\n                            placeholder=\"Welcome to our adventure group! Share your excitement, ask questions, and connect with fellow travelers...\"\n                            className=\"w-full px-3 py-2 border border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none\"\n                          />\n                        </div>\n                        \n                        <div>\n                          <label htmlFor=\"joinLink\" className=\"block"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "text-sm font-medium text-green-800 mb-1\">\n                            WhatsApp Group Join Link\n                          </label>\n                          <input\n                            type=\"url\"\n                            id=\"joinLink\"\n                            value={formData.whatsappGroup.joinLink}\n                            onChange={(e) => setFormData(prev => ({\n                              ...prev,\n                              whatsappGroup: {\n                                ...prev.whatsappGroup,\n                                joinLink: e.target.value\n                              }\n                            }))}\n                            placeholder=\"https://chat.whatsapp.com/...\"\n                            className=\"w-full px-3 py-2 border border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                          />\n                          <p className=\"text-xs text-green-600 mt-1\">"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "Create a WhatsApp group and paste the invite link here. Participants will receive this link after booking.\n                          </p>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\n              <h3 className=\"font-medium text-blue-800 mb-2\">üí° Benefits of WhatsApp Groups:</h3>\n              <ul className=\"text-sm text-blue-700 space-y-1\">\n                <li>‚Ä¢ Participants can introduce themselves and build connections</li>\n                <li>‚Ä¢ Share packing tips, weather updates, and travel advice</li>\n                <li>‚Ä¢ Coordinate last-minute details and meetups</li>\n                <li>‚Ä¢ Share photos and experiences during the trip</li>\n                <li>‚Ä¢ Stay connected even after the adventure ends</li>\n              </ul>\n            </div>"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "{!formData.whatsappGroup.enabled && (\n              <div className=\"bg-gray-50 border border-gray-200 rounded-xl p-4\">\n                <p className=\"text-sm text-gray-600\">\n                  <strong>Note:</strong> You can always create and share the WhatsApp group link later through your trip management dashboard.\n                </p>\n              </div>\n            )}\n          </div>\n        );\n        \n      default:\n        return <div>Step content not found</div>;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 py-4 sm:py-8\">\n      <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"bg-white/95 backdrop-blur-lg rounded-2xl sm:rounded-3xl shadow-2xl overflow-hidden border border-forest-200\">\n          {/* Header */}\n          <div className=\"bg-gradient-to-r from-forest-600 to-nature-600 px-4 sm:px-6 lg:px-8 py-4 sm:py-6\">\n            <h1 className=\"text-xl sm:text-2xl lg:text-3xl"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "font-bold text-white mb-2\">\n              üèîÔ∏è Create Epic Adventure\n            </h1>\n            <p className=\"text-sm sm:text-base text-forest-100\">Design an unforgettable journey for fellow adventurers</p>\n            \n            {/* Progress Bar */}\n            <div className=\"mt-6\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-sm font-medium text-forest-100\">Step {currentStep} of {totalSteps}</span>\n                <span className=\"text-sm font-medium text-forest-100\">{Math.round((currentStep / totalSteps) * 100)}%</span>\n              </div>\n              <div className=\"w-full bg-forest-500/30 rounded-full h-2\">\n                <div \n                  className=\"bg-white rounded-full h-2 transition-all duration-500 ease-out\"\n                  style={{ width: `${(currentStep / totalSteps) * 100}%` }}\n                ></div>\n              </div>\n            </div>\n          </div>\n          \n          {/* Form Content"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "*/}\n          <div className=\"p-4 sm:p-6 lg:p-8\">\n            <div>\n              {/* Error Display */}\n              {error && (\n                <div className=\"mb-4 sm:mb-6 bg-red-50 border-l-4 border-red-500 text-red-700 px-4 sm:px-6 py-4 rounded-r-lg flex items-center gap-3 animate-pulse\">\n                  <span className=\"text-xl sm:text-2xl\">‚ö†Ô∏è</span>\n                  <div>\n                    <p className=\"font-semibold text-sm sm:text-base\">Oops! Something went wrong</p>\n                    <p className=\"text-xs sm:text-sm\">{error}</p>\n                  </div>\n                </div>\n              )}\n              \n              {/* Upload Progress */}\n              {loading && uploadProgress > 0 && (\n                <div className=\"mb-6 bg-blue-50 border border-blue-200 rounded-xl p-4\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className=\"text-sm font-medium text-blue-700\">Uploading files...</span>"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "<span className=\"text-sm font-medium text-blue-700\">{uploadProgress}%</span>\n                  </div>\n                  <div className=\"w-full bg-blue-200 rounded-full h-2\">\n                    <div \n                      className=\"bg-blue-600 rounded-full h-2 transition-all duration-300\"\n                      style={{ width: `${uploadProgress}%` }}\n                    ></div>\n                  </div>\n                </div>\n              )}\n              \n              {/* Step Content */}\n              <div className=\"min-h-[500px]\">\n                {renderStepContent()}\n              </div>\n\n              {/* Navigation Buttons */}\n              <div className=\"mt-6 sm:mt-8 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => navigate('/trips')}\n                  className=\"order-2 sm:order-1 px-4 sm:px-5 py-2.5 border-2 border-forest-300 text-forest-700 rounded-xl h"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "over:bg-forest-50 transition-colors text-sm sm:text-base\"\n                >\n                  ‚Üê Cancel\n                </button>\n                \n                <div className=\"order-1 sm:order-2 flex items-center gap-2 sm:gap-3\">\n                  {currentStep > 1 && (\n                    <button\n                      type=\"button\"\n                      onClick={prevStep}\n                      className=\"flex-1 sm:flex-none px-4 sm:px-5 py-2.5 bg-forest-200 text-forest-800 rounded-xl hover:bg-forest-300 transition-colors text-sm sm:text-base\"\n                    >\n                      ‚Üê Back\n                    </button>\n                  )}\n                  \n                  {currentStep < totalSteps ? (\n                    <button\n                      type=\"button\"\n                      onClick={nextStep}\n                      disabled={!isStepValid(currentStep)}\n                      className={`flex-1 sm:flex-none px-4 sm:px-5 py-2.5 rounded-xl text-white transition-colors te"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "xt-sm sm:text-base ${\n                        isStepValid(currentStep)\n                          ? 'bg-nature-600 hover:bg-nature-700'\n                          : 'bg-nature-300 cursor-not-allowed'\n                      }`}\n                    >\n                      Next ‚Üí\n                    </button>\n                  ) : (\n                    <button\n                      type=\"button\"\n                      onClick={handleSubmit}\n                      disabled={loading}\n                      className=\"flex-1 sm:flex-none px-4 sm:px-6 py-2.5 bg-forest-700 text-white rounded-xl hover:bg-forest-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2 text-sm sm:text-base\"\n                    >\n                      {loading ? (\n                        <>\n                          <div className=\"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white\"></div>\n                          <span className=\"hidden sm:inline"
  },
  {
    "source": "web\\src\\pages\\CreateTrip.tsx",
    "text": "\">Creating Trip...</span>\n                          <span className=\"sm:hidden\">Creating...</span>\n                        </>\n                      ) : (\n                        <>\n                          üåü <span className=\"hidden sm:inline\">Create Epic Adventure</span>\n                          <span className=\"sm:hidden\">Create Trip</span>\n                        </>\n                      )}\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateTrip;"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "import React, { useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../config/api';\n\ninterface User {\n  id: string;\n  email: string;\n  name: string;\n  role: 'traveler' | 'organizer' | 'admin';\n}\n\ninterface CreateTripProps {\n  user: User;\n}\n\n// Enhanced interfaces for advanced features\ninterface ScheduleDay {\n  day: number;\n  title: string;\n  activities: string[];\n}\n\ninterface LocationCoordinates {\n  latitude: number;\n  longitude: number;\n}\n\nconst CreateTrip: React.FC<CreateTripProps> = ({ user }) => {\n  const navigate = useNavigate();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [currentStep, setCurrentStep] = useState(1);\n  const totalSteps = 4;\n  \n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    destination: '',\n    price: '',\n    capacity: '',\n    minimumAge: '',\n    categories: [] as string[],\n    startDate: '',\n    endDate: '',\n    itinerary: '',\n    location: null as LocationCoordi"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "nates | null,\n    difficultyLevel: 'intermediate' as 'beginner' | 'intermediate' | 'advanced',\n    includedItems: [] as string[],\n    excludedItems: [] as string[],\n    requirements: [] as string[],\n    cancellationPolicy: 'moderate',\n    // Payment Configuration\n    paymentType: 'full' as 'full' | 'advance',\n    advanceAmount: '0'\n  });\n  \n  const [schedule, setSchedule] = useState<ScheduleDay[]>([]);\n  const [images, setImages] = useState<File[]>([]);\n  const [coverImageIndex, setCoverImageIndex] = useState(0);\n  const [itineraryPdf, setItineraryPdf] = useState<File | null>(null);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n\n  const categories = ['Adventure', 'Cultural', 'Beach', 'Mountain', 'City', 'Nature', 'Wildlife', 'Desert', 'Arctic', 'Botanical', 'Photography', 'Spiritual', 'Culinary', 'Historical', 'Sports'];\n  \n  const includedItemsOptions = [\n    'Accommodation', 'Meals"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "', 'Transportation', 'Guide', 'Equipment', \n    'Permits', 'Insurance', 'First Aid', 'Photography', 'Activities'\n  ];\n  \n  const requirementsOptions = [\n    'Good Physical Fitness', 'Swimming Ability', 'Previous Experience',\n    'Medical Certificate', 'Valid ID/Passport', 'Special Equipment',\n    'Age Restrictions', 'No Health Conditions'\n  ];\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  \n  const handleArrayChange = (field: keyof typeof formData, value: string) => {\n    const currentArray = formData[field] as string[];\n    setFormData({\n      ...formData,\n      [field]: currentArray.includes(value)\n        ? currentArray.filter(item => item !== value)\n        : [...currentArray, value]\n    });\n  };\n  \n  // Enhanced file upload with progress tracking\n  const uploadFileToServer = async (file: File): Promise<string> => {\n    // Conver"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "t file to base64 for our API\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = async () => {\n        try {\n          const base64Data = (reader.result as string).split(',')[1];\n          const response = await api.post('/files/upload/base64', {\n            data: base64Data,\n            filename: file.name,\n            mimeType: file.type\n          });\n          const responseData = response.data as { file: { url: string } };\n          resolve(responseData.file.url);\n        } catch (error) {\n          reject(error);\n        }\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(file);\n    });\n  };\n\n  const handleCategoryChange = (category: string) => {\n    handleArrayChange('categories', category);\n  };\n  \n  // Schedule management\n  const addScheduleDay = () => {\n    const newDay = {\n      day: schedule.length + 1,\n      title: '',\n      activities: ['']\n    };\n    setSchedule([...schedule, newDay]);\n  };\n  \n  const"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "updateScheduleDay = (dayIndex: number, field: keyof ScheduleDay, value: any) => {\n    const updatedSchedule = [...schedule];\n    if (field === 'activities') {\n      updatedSchedule[dayIndex].activities = value;\n    } else {\n      (updatedSchedule[dayIndex] as any)[field] = value;\n    }\n    setSchedule(updatedSchedule);\n  };\n  \n  const addActivity = (dayIndex: number) => {\n    const updatedSchedule = [...schedule];\n    updatedSchedule[dayIndex].activities.push('');\n    setSchedule(updatedSchedule);\n  };\n  \n  const removeActivity = (dayIndex: number, activityIndex: number) => {\n    const updatedSchedule = [...schedule];\n    updatedSchedule[dayIndex].activities.splice(activityIndex, 1);\n    setSchedule(updatedSchedule);\n  };\n  \n  const removeScheduleDay = (dayIndex: number) => {\n    const updatedSchedule = schedule.filter((_, index) => index !== dayIndex)\n      .map((day, index) => ({ ...day, day: index + 1 }));\n    setSchedule(updatedSchedule);\n  };\n\n  const handleMultipleImageUpload ="
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "(e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    const validImages = files.filter(file => file.type.startsWith('image/'));\n    \n    if (validImages.length !== files.length) {\n      setError('Some files were not valid images and were skipped');\n    }\n    \n    if (validImages.length > 10) {\n      setError('Maximum 10 images allowed');\n      return;\n    }\n    \n    setImages([...images, ...validImages].slice(0, 10));\n    setError('');\n  };\n  \n  const removeImage = (index: number) => {\n    const newImages = images.filter((_, i) => i !== index);\n    setImages(newImages);\n    if (coverImageIndex >= newImages.length) {\n      setCoverImageIndex(Math.max(0, newImages.length - 1));\n    }\n  };\n  \n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>, type: 'itinerary') => {\n    const file = e.target.files?.[0];\n    if (file && type === 'itinerary') {\n      if (file.type === 'application/pdf') {\n        setItineraryPdf(file);"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "setError('');\n      } else {\n        setError('Please select a valid PDF file for itinerary');\n      }\n    }\n  };\n  \n  // Step navigation\n  const nextStep = () => {\n    if (currentStep < totalSteps) {\n      setCurrentStep(currentStep + 1);\n    }\n  };\n  \n  const prevStep = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n  \n  const isStepValid = (step: number): boolean => {\n    switch (step) {\n      case 1:\n        return formData.title.trim() !== '' && formData.description.trim() !== '' && formData.destination.trim() !== '';\n      case 2:\n        return formData.price !== '' && formData.capacity !== '' && formData.startDate !== '' && formData.endDate !== '';\n      case 3:\n        return formData.categories.length > 0;\n      case 4:\n        return true; // Optional step\n      default:\n        return false;\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setUploadPr"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "ogress(0);\n\n    try {\n      // Enhanced validation\n      if (!formData.title.trim()) throw new Error('Title is required');\n      if (!formData.description.trim()) throw new Error('Description is required');\n      if (!formData.destination.trim()) throw new Error('Destination is required');\n      if (!formData.price || parseFloat(formData.price) <= 0) throw new Error('Valid price is required');\n      if (!formData.capacity || parseInt(formData.capacity) < 2) throw new Error('Capacity must be at least 2');\n      if (formData.categories.length === 0) throw new Error('At least one category is required');\n      \n      const startDate = new Date(formData.startDate);\n      const endDate = new Date(formData.endDate);\n      const today = new Date();\n      today.setHours(0, 0, 0, 0);\n      \n      if (startDate < today) throw new Error('Start date cannot be in the past');\n      if (startDate >= endDate) throw new Error('End date must be after start date');\n\n      // Upload files with progress tra"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "cking\n      let uploadedImageUrls: string[] = [];\n      let uploadedPdfUrl: string | undefined;\n      \n      setUploadProgress(10);\n      \n      if (images.length > 0) {\n        setUploadProgress(20);\n        const imageUploadPromises = images.map(image => uploadFileToServer(image));\n        uploadedImageUrls = await Promise.all(imageUploadPromises);\n        setUploadProgress(50);\n      }\n      \n      if (itineraryPdf) {\n        setUploadProgress(70);\n        uploadedPdfUrl = await uploadFileToServer(itineraryPdf);\n        setUploadProgress(80);\n      }\n\n      // Prepare enhanced trip data - match backend schema exactly\n      // Ultra-flexible payload - accepts ANY input format\n      const tripData: any = {\n        title: formData.title || 'Untitled Trip',\n        description: formData.description || 'No description provided',\n        destination: formData.destination || 'Unknown Destination',\n        price: formData.price || 1000,\n        capacity: formData.capacity || 10,\n        min"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "imumAge: formData.minimumAge ? parseInt(formData.minimumAge) : undefined,\n        categories: formData.categories || ['Adventure'],\n        startDate: formData.startDate || new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),\n        endDate: formData.endDate || new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n        images: [],\n        schedule: [],\n        location: formData.location || null\n      };\n      \n      // Only add optional fields if they have meaningful values\n      if (schedule.length > 0) {\n        const validSchedule = schedule.filter(day => day.title.trim() && day.activities.some(a => a.trim()));\n        if (validSchedule.length > 0) {\n          tripData.schedule = validSchedule;\n        }\n      }\n      \n      if (uploadedImageUrls.length > 0) {\n        tripData.images = uploadedImageUrls;\n      }\n      \n      if (formData.location) {\n        tripData.location = { coordinates: [formData.location.longitude, formData.location.latitude] };\n      }"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "// Always add payment configuration with flexible defaults\n      tripData.paymentConfig = {\n        paymentType: formData.paymentType || 'full',\n        paymentMethods: ['upi', 'bank_transfer']\n      };\n\n      // Add advance amount if provided (any format accepted)\n      if (formData.advanceAmount) {\n        const advanceAmount = Number(formData.advanceAmount) || 0;\n        if (advanceAmount > 0) {\n          tripData.paymentConfig.advanceAmount = advanceAmount;\n        }\n      }\n\n      // Add refund policy if provided\n      if (formData.cancellationPolicy) {\n        tripData.paymentConfig.refundPolicy = formData.cancellationPolicy;\n      }\n      \n      // Log the data being sent for debugging\n      console.log('üì§ Sending trip data:', {\n        title: tripData.title,\n        destination: tripData.destination,\n        price: tripData.price,\n        capacity: tripData.capacity,\n        categories: tripData.categories,\n        startDate: tripData.startDate,\n        endDate: tripDat"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "a.endDate,\n        hasImages: !!tripData.images,\n        hasSchedule: !!tripData.schedule,\n        hasPaymentConfig: !!tripData.paymentConfig\n      });\n      \n      // Log full payload for debugging\n      console.log('üì¶ Full trip payload:', JSON.stringify(tripData, null, 2));\n\n      setUploadProgress(90);\n      \n      // Submit with timeout (don't override headers - let interceptor add auth token)\n      const response = await Promise.race([\n        api.post('/trips', tripData),\n        new Promise((_, reject) => \n          setTimeout(() => reject(new Error('Request timeout - please try again')), 15000)\n        )\n      ]) as any;\n      \n      setUploadProgress(100);\n      console.log('Trip created successfully:', response?.data);\n      \n      // Success notification\n      alert(`üéâ Trip \"${formData.title}\" created successfully! Redirecting...`);\n      \n      setTimeout(() => {\n        navigate('/trips');\n      }, 1000);\n      \n    } catch (error: any) {\n      console.error('‚ùå Error creat"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "ing trip:', error);\n      console.error('üìã Full error object:', JSON.stringify(error.response?.data, null, 2));\n      console.error('üî¢ Status code:', error.response?.status);\n      console.error('üîç Error message:', error.message);\n      \n      // Show error details in alert for immediate visibility\n      if (error.response?.data) {\n        console.table(error.response.data);\n      }\n      \n      let errorMessage = 'Failed to create trip';\n      \n      if (error.message.includes('timeout')) {\n        errorMessage = 'Request timed out. Please try again with fewer images or check your connection.';\n      } else if (error.response?.data) {\n        const responseData = error.response.data;\n        \n        if (typeof responseData.error === 'string') {\n          errorMessage = responseData.error;\n        } else if (responseData.details) {\n          errorMessage = `Validation Error: ${responseData.details}`;\n        } else if (responseData.fields) {\n          const fieldErrors = Object.entrie"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "s(responseData.fields)\n            .map(([field, errors]: [string, any]) => `${field}: ${Array.isArray(errors) ? errors.join(', ') : errors}`)\n            .join('; ');\n          errorMessage = `Please fix the following issues: ${fieldErrors}`;\n        } else if (responseData.message) {\n          errorMessage = responseData.message;\n        }\n      } else if (error.response?.status === 400) {\n        errorMessage = 'Invalid data provided. Please check all required fields and try again.';\n      } else if (error.response?.status === 401) {\n        errorMessage = 'Authentication required. Please log in again.';\n      } else if (error.response?.status === 403) {\n        errorMessage = 'You do not have permission to create trips. Please ensure you have organizer role.';\n      } else if (error.response?.status >= 500) {\n        errorMessage = 'Server error. Please try again later.';\n      } else if (error.code === 'NETWORK_ERROR') {\n        errorMessage = 'Network error. Please check your con"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "nection.';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  const renderStepContent = () => {\n    switch (currentStep) {\n      case 1:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-2xl font-bold text-forest-800 mb-2\">‚ú® Basic Information</h2>\n              <p className=\"text-forest-600\">Tell us about your amazing adventure</p>\n            </div>\n            \n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div className=\"md:col-span-2\">\n                <label htmlFor=\"title\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üéØ Adventure Title\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"title\"\n                  name=\"title\"\n                  requ"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "ired\n                  value={formData.title}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Epic Himalayan Trek, Bali Cultural Journey, etc.\"\n                />\n              </div>\n              \n              <div className=\"md:col-span-2\">\n                <label htmlFor=\"description\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üìù Adventure Description\n                </label>\n                <textarea\n                  id=\"description\"\n                  name=\"description\"\n                  required\n                  rows={5}\n                  value={formData.description}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": ":ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50 resize-none\"\n                  placeholder=\"Describe what makes this adventure special, what participants can expect, and what makes it unique...\"\n                />\n              </div>\n              \n              <div>\n                <label htmlFor=\"destination\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üìç Destination\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"destination\"\n                  name=\"destination\"\n                  required\n                  value={formData.destination}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Manali, Himachal Pradesh, India\""
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "/>\n              </div>\n              \n              <div>\n                <label htmlFor=\"difficultyLevel\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  ‚ö° Difficulty Level\n                </label>\n                <select\n                  id=\"difficultyLevel\"\n                  name=\"difficultyLevel\"\n                  value={formData.difficultyLevel}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                >\n                  <option value=\"beginner\">üü¢ Beginner - Easy for everyone</option>\n                  <option value=\"intermediate\">üü° Intermediate - Moderate fitness required</option>\n                  <option value=\"advanced\">üî¥ Advanced - High fitness & experience needed</option>\n                </select>\n              </div>"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "</div>\n          </div>\n        );\n        \n      case 2:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-2xl font-bold text-forest-800 mb-2\">üí∞ Pricing & Schedule</h2>\n              <p className=\"text-forest-600\">Set your dates and pricing details</p>\n            </div>\n            \n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <label htmlFor=\"price\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üí∞ Price per Person (‚Çπ)\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"price\"\n                  name=\"price\"\n                  required\n                  min=\"1\"\n                  step=\"1\"\n                  value={formData.price}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Enter price\"\n                />\n              </div>\n              \n              <div>\n                <label htmlFor=\"capacity\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üë• Group Size (Max Participants)\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"capacity\"\n                  name=\"capacity\"\n                  required\n                  min=\"2\"\n                  max=\"50\"\n                  value={formData.capacity}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Enter capacity\"\n                />\n              </div>"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "<div>\n                <label htmlFor=\"minimumAge\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üéÇ Minimum Age Requirement\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"minimumAge\"\n                  name=\"minimumAge\"\n                  min=\"1\"\n                  max=\"100\"\n                  value={formData.minimumAge}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Enter minimum age\"\n                />\n                <p className=\"mt-1 text-sm text-forest-600\">\n                  Leave empty if no age restriction. Only travelers meeting this age requirement can join.\n                </p>\n              </div>\n              \n              <div>\n                <l"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "abel htmlFor=\"startDate\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üóìÔ∏è Start Date\n                </label>\n                <input\n                  type=\"date\"\n                  id=\"startDate\"\n                  name=\"startDate\"\n                  required\n                  value={formData.startDate}\n                  onChange={handleChange}\n                  min={new Date().toISOString().split('T')[0]}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                />\n              </div>\n              \n              <div>\n                <label htmlFor=\"endDate\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üèÅ End Date\n                </label>\n                <input\n                  type=\"date\"\n                  id=\"endDate\"\n                  name=\"endDate\""
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "required\n                  value={formData.endDate}\n                  onChange={handleChange}\n                  min={formData.startDate || new Date().toISOString().split('T')[0]}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <label htmlFor=\"cancellationPolicy\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üîÑ Cancellation Policy\n                </label>\n                <select\n                  id=\"cancellationPolicy\"\n                  name=\"cancellationPolicy\"\n                  value={formData.cancellationPolicy}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-for"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "est-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                >\n                  <option value=\"flexible\">Flexible - Full refund 24h before</option>\n                  <option value=\"moderate\">Moderate - 50% refund 3 days before</option>\n                  <option value=\"strict\">Strict - No refund after booking</option>\n                </select>\n              </div>\n              \n              <div>\n                <label htmlFor=\"paymentType\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üí∞ Payment Type\n                </label>\n                <select\n                  id=\"paymentType\"\n                  name=\"paymentType\"\n                  value={formData.paymentType}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "nature-500 transition-all duration-300 bg-forest-50/50\"\n                >\n                  <option value=\"full\">Full Payment Required</option>\n                  <option value=\"advance\">Advance Payment Required</option>\n                </select>\n              </div>\n            </div>\n            \n            {formData.paymentType === 'advance' && (\n              <div>\n                <label htmlFor=\"advanceAmount\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üíµ Advance Amount Required (‚Çπ)\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"advanceAmount\"\n                  name=\"advanceAmount\"\n                  min=\"0\"\n                  max={formData.price ? parseFloat(formData.price) : undefined}\n                  step=\"1\"\n                  value={formData.advanceAmount}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:o"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "utline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Enter amount\"\n                />\n                <p className=\"mt-1 text-sm text-forest-600\">\n                  Set to 0 for no advance payment required. Maximum: ‚Çπ{formData.price || '0'}\n                </p>\n              </div>\n            )}\n          </div>\n        );\n        \n      case 3:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-2xl font-bold text-forest-800 mb-2\">üè∑Ô∏è Categories & Details</h2>\n              <p className=\"text-forest-600\">Choose categories and specify what's included</p>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-semibold text-forest-700 mb-4\">\n                üéØ Adventure Categories (Select all that apply)\n              </label>\n              <div className=\"grid grid-co"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "ls-2 md:grid-cols-3 gap-3\">\n                {categories.map((category) => (\n                  <button\n                    key={category}\n                    type=\"button\"\n                    onClick={() => handleCategoryChange(category)}\n                    className={`px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 border-2 ${\n                      formData.categories.includes(category)\n                        ? 'bg-nature-500 text-white border-nature-500 shadow-lg transform scale-105'\n                        : 'bg-forest-50 text-forest-700 border-forest-200 hover:border-nature-300 hover:bg-nature-50'\n                    }`}\n                  >\n                    {category}\n                  </button>\n                ))}\n              </div>\n            </div>\n            \n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  ‚úÖ What's Inclu"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "ded\n                </label>\n                <div className=\"space-y-2 max-h-48 overflow-y-auto border border-forest-200 rounded-xl p-4 bg-forest-50/30\">\n                  {includedItemsOptions.map((item) => (\n                    <label key={item} className=\"flex items-center space-x-3 cursor-pointer hover:bg-forest-100/50 p-2 rounded-lg\">\n                      <input\n                        type=\"checkbox\"\n                        checked={formData.includedItems.includes(item)}\n                        onChange={() => handleArrayChange('includedItems', item)}\n                        className=\"w-4 h-4 text-nature-600 border-forest-300 rounded focus:ring-nature-500\"\n                      />\n                      <span className=\"text-sm text-forest-700\">{item}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-semibold text-forest-700 mb-3\">"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "üìã Requirements\n                </label>\n                <div className=\"space-y-2 max-h-48 overflow-y-auto border border-forest-200 rounded-xl p-4 bg-forest-50/30\">\n                  {requirementsOptions.map((requirement) => (\n                    <label key={requirement} className=\"flex items-center space-x-3 cursor-pointer hover:bg-forest-100/50 p-2 rounded-lg\">\n                      <input\n                        type=\"checkbox\"\n                        checked={formData.requirements.includes(requirement)}\n                        onChange={() => handleArrayChange('requirements', requirement)}\n                        className=\"w-4 h-4 text-nature-600 border-forest-300 rounded focus:ring-nature-500\"\n                      />\n                      <span className=\"text-sm text-forest-700\">{requirement}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n        \n      case 4:"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-2xl font-bold text-forest-800 mb-2\">üì∏ Media & Itinerary</h2>\n              <p className=\"text-forest-600\">Add photos and detailed schedule</p>\n            </div>\n            \n            {/* Image Upload */}\n            <div>\n              <label className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                üñºÔ∏è Adventure Photos (Max 10 images)\n              </label>\n              <div className=\"border-2 border-dashed border-forest-300 rounded-xl p-6 text-center hover:border-nature-400 transition-colors\">\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  multiple\n                  onChange={handleMultipleImageUpload}\n                  className=\"hidden\"\n                />\n                <button\n                  type=\"button\"\n                  onClick="
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "{() => fileInputRef.current?.click()}\n                  className=\"inline-flex items-center px-4 py-2 bg-nature-500 text-white rounded-lg hover:bg-nature-600 transition-colors\"\n                >\n                  üì∑ Choose Images\n                </button>\n                <p className=\"mt-2 text-sm text-forest-600\">JPG, PNG, WebP up to 10MB each</p>\n              </div>\n              \n              {/* Image Preview */}\n              {images.length > 0 && (\n                <div className=\"mt-4\">\n                  <p className=\"text-sm font-medium text-forest-700 mb-2\">Selected Images ({images.length}/10)</p>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                    {images.map((image, index) => (\n                      <div key={index} className=\"relative group\">\n                        <img\n                          src={URL.createObjectURL(image)}\n                          alt={`Upload ${index + 1}`}\n                          className={`w-full h-24 o"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "bject-cover rounded-lg border-2 ${\n                            coverImageIndex === index \n                              ? 'border-nature-500 ring-2 ring-nature-200' \n                              : 'border-forest-200'\n                          }`}\n                        />\n                        <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2\">\n                          <button\n                            type=\"button\"\n                            onClick={() => setCoverImageIndex(index)}\n                            className={`px-2 py-1 text-xs rounded ${\n                              coverImageIndex === index \n                                ? 'bg-nature-500 text-white' \n                                : 'bg-white text-forest-700'\n                            }`}\n                          >\n                            {coverImageIndex === index ? '‚≠ê Cover' : 'Set Cover'}"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "</button>\n                          <button\n                            type=\"button\"\n                            onClick={() => removeImage(index)}\n                            className=\"px-2 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600\"\n                          >\n                            üóëÔ∏è Remove\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n            \n            {/* Itinerary */}\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <label htmlFor=\"itinerary\" className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üó∫Ô∏è Detailed Itinerary\n                </label>\n                <textarea\n                  id=\"itinerary\"\n                  name=\"itinerary\"\n                  rows={6}\n                  value={formData.itinerary}"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50 resize-none\"\n                  placeholder=\"Day 1: Arrival and orientation...&#10;Day 2: Morning hike to base camp...&#10;Day 3: Summit day...\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-semibold text-forest-700 mb-3\">\n                  üìÑ Itinerary PDF (Optional)\n                </label>\n                <div className=\"border-2 border-dashed border-forest-300 rounded-xl p-6 text-center hover:border-nature-400 transition-colors\">\n                  <input\n                    type=\"file\"\n                    accept=\".pdf\"\n                    onChange={(e) => handleFileChange(e, 'itinerary')}\n                    className=\"hidden\"\n                    id=\"pdf-upload\""
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "/>\n                  <label\n                    htmlFor=\"pdf-upload\"\n                    className=\"inline-flex items-center px-4 py-2 bg-forest-500 text-white rounded-lg hover:bg-forest-600 transition-colors cursor-pointer\"\n                  >\n                    üìã Choose PDF\n                  </label>\n                  <p className=\"mt-2 text-sm text-forest-600\">Detailed itinerary for participants</p>\n                  \n                  {itineraryPdf && (\n                    <div className=\"mt-3 text-sm text-forest-700 bg-forest-50 p-2 rounded\">\n                      ‚úÖ Selected: {itineraryPdf.name}\n                    </div>\n                  )}\n                </div>\n                \n                {/* Schedule Builder */}\n                <div className=\"mt-6\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <label className=\"block text-sm font-semibold text-forest-700\">\n                      üìÖ Day-by-Day Schedule"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "</label>\n                    <button\n                      type=\"button\"\n                      onClick={addScheduleDay}\n                      className=\"px-3 py-1 bg-nature-500 text-white text-sm rounded-lg hover:bg-nature-600 transition-colors\"\n                    >\n                      ‚ûï Add Day\n                    </button>\n                  </div>\n                  \n                  <div className=\"space-y-3 max-h-64 overflow-y-auto\">\n                    {schedule.map((day, dayIndex) => (\n                      <div key={dayIndex} className=\"border border-forest-200 rounded-lg p-3 bg-forest-50/30\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <span className=\"font-medium text-forest-700\">Day {day.day}</span>\n                          <button\n                            type=\"button\"\n                            onClick={() => removeScheduleDay(dayIndex)}\n                            className=\"text-red-500 hov"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "er:text-red-700 text-sm\"\n                          >\n                            üóëÔ∏è Remove\n                          </button>\n                        </div>\n                        \n                        <input\n                          type=\"text\"\n                          placeholder=\"Day title (e.g., 'Summit Day', 'Rest & Explore')\"\n                          value={day.title}\n                          onChange={(e) => updateScheduleDay(dayIndex, 'title', e.target.value)}\n                          className=\"w-full px-3 py-2 mb-2 text-sm border border-forest-300 rounded focus:outline-none focus:ring-1 focus:ring-nature-500\"\n                        />\n                        \n                        {day.activities.map((activity, activityIndex) => (\n                          <div key={activityIndex} className=\"flex gap-2 mb-1\">\n                            <input\n                              type=\"text\"\n                              placeholder=\"Activity description\""
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "value={activity}\n                              onChange={(e) => {\n                                const newActivities = [...day.activities];\n                                newActivities[activityIndex] = e.target.value;\n                                updateScheduleDay(dayIndex, 'activities', newActivities);\n                              }}\n                              className=\"flex-1 px-3 py-1 text-sm border border-forest-300 rounded focus:outline-none focus:ring-1 focus:ring-nature-500\"\n                            />\n                            {day.activities.length > 1 && (\n                              <button\n                                type=\"button\"\n                                onClick={() => removeActivity(dayIndex, activityIndex)}\n                                className=\"px-2 py-1 text-red-500 hover:text-red-700 text-sm\"\n                              >\n                                ‚úï\n                              </button>"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": ")}\n                          </div>\n                        ))}\n                        \n                        <button\n                          type=\"button\"\n                          onClick={() => addActivity(dayIndex)}\n                          className=\"mt-2 px-3 py-1 text-xs bg-forest-200 text-forest-700 rounded hover:bg-forest-300 transition-colors\"\n                        >\n                          ‚ûï Add Activity\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n        \n      default:\n        return <div>Step content not found</div>;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 py-8\">\n      <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"bg-white/95 backdrop-blur-lg rounded-3xl shadow-2xl overflow-hidden border border-forest-200\">"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "{/* Header */}\n          <div className=\"bg-gradient-to-r from-forest-600 to-nature-600 px-8 py-6\">\n            <h1 className=\"text-3xl font-bold text-white mb-2\">\n              üèîÔ∏è Create Epic Adventure\n            </h1>\n            <p className=\"text-forest-100\">Design an unforgettable journey for fellow adventurers</p>\n            \n            {/* Progress Bar */}\n            <div className=\"mt-6\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-sm font-medium text-forest-100\">Step {currentStep} of {totalSteps}</span>\n                <span className=\"text-sm font-medium text-forest-100\">{Math.round((currentStep / totalSteps) * 100)}%</span>\n              </div>\n              <div className=\"w-full bg-forest-500/30 rounded-full h-2\">\n                <div \n                  className=\"bg-white rounded-full h-2 transition-all duration-500 ease-out\"\n                  style={{ width: `${(currentStep / totalSteps) * 10"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "0}%` }}\n                ></div>\n              </div>\n            </div>\n          </div>\n          \n          {/* Form Content */}\n          <div className=\"p-8\">\n            <form onSubmit={handleSubmit}>\n              {/* Error Display */}\n              {error && (\n                <div className=\"mb-6 bg-red-50 border-l-4 border-red-500 text-red-700 px-6 py-4 rounded-r-lg flex items-center gap-3 animate-pulse\">\n                  <span className=\"text-2xl\">‚ö†Ô∏è</span>\n                  <div>\n                    <p className=\"font-semibold\">Oops! Something went wrong</p>\n                    <p className=\"text-sm\">{error}</p>\n                  </div>\n                </div>\n              )}\n              \n              {/* Upload Progress */}\n              {loading && uploadProgress > 0 && (\n                <div className=\"mb-6 bg-blue-50 border border-blue-200 rounded-xl p-4\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className=\"t"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "ext-sm font-medium text-blue-700\">Uploading files...</span>\n                    <span className=\"text-sm font-medium text-blue-700\">{uploadProgress}%</span>\n                  </div>\n                  <div className=\"w-full bg-blue-200 rounded-full h-2\">\n                    <div \n                      className=\"bg-blue-600 rounded-full h-2 transition-all duration-300\"\n                      style={{ width: `${uploadProgress}%` }}\n                    ></div>\n                  </div>\n                </div>\n              )}\n              \n              {/* Step Content */}\n              <div className=\"min-h-[500px]\">\n                {renderStepContent()}\n              </div>\n\n              {/* Navigation Buttons */}\n              <div className=\"mt-8 flex items-center justify-between\">\n                <button\n                  type=\"button\"\n                  onClick={() => navigate('/trips')}\n                  className=\"px-5 py-2.5 border-2 border-forest-300 text-forest-700 rounded-xl ho"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": "ver:bg-forest-50 transition-colors\"\n                >\n                  ‚Üê Cancel\n                </button>\n                \n                <div className=\"flex items-center gap-3\">\n                  {currentStep > 1 && (\n                    <button\n                      type=\"button\"\n                      onClick={prevStep}\n                      className=\"px-5 py-2.5 bg-forest-200 text-forest-800 rounded-xl hover:bg-forest-300 transition-colors\"\n                    >\n                      ‚Üê Back\n                    </button>\n                  )}\n                  \n                  {currentStep < totalSteps ? (\n                    <button\n                      type=\"button\"\n                      onClick={nextStep}\n                      disabled={!isStepValid(currentStep)}\n                      className={`px-5 py-2.5 rounded-xl text-white transition-colors ${\n                        isStepValid(currentStep)\n                          ? 'bg-nature-600 hover:bg-nature-700'"
  },
  {
    "source": "web\\src\\pages\\CreateTripNew.tsx",
    "text": ": 'bg-nature-300 cursor-not-allowed'\n                      }`}\n                    >\n                      Next ‚Üí\n                    </button>\n                  ) : (\n                    <button\n                      type=\"submit\"\n                      disabled={loading}\n                      className=\"px-6 py-2.5 bg-forest-700 text-white rounded-xl hover:bg-forest-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                    >\n                      {loading ? 'üöÄ Creating Adventure...' : 'üéâ Create Trip'}\n                    </button>\n                  )}\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateTrip;"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport api from '../config/api';\nimport { User } from '../types';\n\n\ninterface EditTripProps {\n  user: User;\n}\n\nconst EditTrip: React.FC<EditTripProps> = ({ user }) => {\n  const navigate = useNavigate();\n  const { id } = useParams<{ id: string }>();\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    destination: '',\n    price: '',\n    capacity: '',\n    categories: [] as string[],\n    startDate: '',\n    endDate: '',\n    itinerary: ''\n  });\n  const [coverImage, setCoverImage] = useState<File | null>(null);\n  const [itineraryPdf, setItineraryPdf] = useState<File | null>(null);\n  const [currentCoverImage, setCurrentCoverImage] = useState('');\n  const [currentItineraryPdf, setCurrentItineraryPdf] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [fetchLoading"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": ", setFetchLoading] = useState(true);\n\n  const categories = ['Adventure', 'Cultural', 'Beach', 'Mountain', 'City', 'Nature', 'Wildlife', 'Desert', 'Arctic', 'Botanical'];\n\n  useEffect(() => {\n    const fetchTrip = async () => {\n      if (!id) return;\n      \n      try {\n      const response = await api.get(`/trips/${id}`);\n      const trip = response.data as any;\n      \n      // Check if user is the organizer\n      if (trip.organizerId !== user.id) {\n        navigate('/trips');\n        return;\n      }\n      \n      setFormData({\n        title: trip.title,\n        description: trip.description,\n        destination: trip.destination,\n        price: trip.price.toString(),\n        capacity: trip.capacity.toString(),\n        categories: trip.categories,\n        startDate: trip.startDate ? new Date(trip.startDate).toISOString().split('T')[0] : '',\n        endDate: trip.endDate ? new Date(trip.endDate).toISOString().split('T')[0] : '',\n        itinerary: trip.itinerary || ''\n      });"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "setCurrentCoverImage(trip.coverImage || '');\n      setCurrentItineraryPdf(trip.itineraryPdf || '');\n        \n      } catch (error: any) {\n        setError('Failed to fetch trip details');\n        console.error('Error fetching trip:', error);\n      } finally {\n        setFetchLoading(false);\n      }\n    };\n\n    fetchTrip();\n  }, [id, user.id, navigate]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleCategoryChange = (category: string) => {\n    setFormData({\n      ...formData,\n      categories: formData.categories.includes(category)\n        ? formData.categories.filter(c => c !== category)\n        : [...formData.categories, category]\n    });\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>, type: 'cover' | 'itinerary') => {\n    const file = e.target.files?.[0];\n    if (file) {\n      if (type ==="
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "'cover') {\n        if (file.type.startsWith('image/')) {\n          setCoverImage(file);\n        } else {\n          setError('Please select a valid image file for cover image');\n        }\n      } else if (type === 'itinerary') {\n        if (file.type === 'application/pdf') {\n          setItineraryPdf(file);\n        } else {\n          setError('Please select a valid PDF file for itinerary');\n        }\n      }\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      // Prepare data for JSON submission\n      const updateData = {\n        title: formData.title,\n        description: formData.description,\n        destination: formData.destination,\n        price: parseFloat(formData.price),\n        capacity: parseInt(formData.capacity),\n        categories: formData.categories,\n        startDate: formData.startDate,\n        endDate: formData.endDate,\n        itinerary: formData.itinerary\n      };\n\n      /"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "/ Note: File uploads (coverImage and itineraryPdf) are not yet supported in this version\n      // They would require a separate endpoint or multipart handling on the backend\n      if (coverImage || itineraryPdf) {\n        console.warn('File uploads are not yet implemented in the backend API');\n      }\n\n      await axios.put(`/trips/${id}`, updateData, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      navigate('/profile');\n    } catch (error: any) {\n      console.error('Update error:', error);\n      setError(error.response?.data?.error || 'Failed to update trip');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (window.confirm('Are you sure you want to delete this trip? This action cannot be undone.')) {\n      try {\n        await axios.delete(`/trips/${id}`);\n        navigate('/profile');\n      } catch (error: any) {\n        setError(error.response?.data?.error || 'Failed to delete trip');"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "}\n    }\n  };\n\n  if (fetchLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-16 w-16 border-4 border-forest-200 border-t-forest-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 py-8\">\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-8 border border-forest-200\">\n          <div className=\"mb-8\">\n            <h1 className=\"text-4xl font-bold bg-gradient-to-r from-forest-800 to-nature-600 bg-clip-text text-transparent mb-2\">\n              Edit Adventure\n            </h1>\n            <p className=\"text-forest-600\">Update your wilderness expedition details</p>\n          </div>\n          \n          <form onSubmit={handleSubmit} className=\"space-y-8\">\n            {error && ("
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "<div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center gap-2\">\n                <span className=\"text-xl\">‚ö†Ô∏è</span>\n                <span className=\"text-sm\">{error}</span>\n              </div>\n            )}\n\n            {/* Trip Title */}\n            <div>\n              <label htmlFor=\"title\" className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                üèîÔ∏è Adventure Title\n              </label>\n              <input\n                type=\"text\"\n                id=\"title\"\n                name=\"title\"\n                required\n                value={formData.title}\n                onChange={handleChange}\n                className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                placeholder=\"Enter adventure title\"\n              />\n            </div>"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "{/* Cover Image Upload */}\n            <div>\n              <label className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                üì∏ Cover Image\n              </label>\n              <div className=\"space-y-3\">\n                {currentCoverImage && (\n                  <div className=\"text-sm text-forest-600\">\n                    Current: <span className=\"font-medium\">{currentCoverImage}</span>\n                  </div>\n                )}\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={(e) => handleFileChange(e, 'cover')}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                />\n                <p className=\"text-xs text-forest-500\">Upload a beautiful cover image for your adventure (JPG, PNG, WebP)</p>\n              </di"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "v>\n            </div>\n\n            {/* Description */}\n            <div>\n              <label htmlFor=\"description\" className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                üìù Adventure Description\n              </label>\n              <textarea\n                id=\"description\"\n                name=\"description\"\n                required\n                rows={5}\n                value={formData.description}\n                onChange={handleChange}\n                className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                placeholder=\"Describe your wilderness adventure in detail...\"\n              />\n            </div>\n\n            {/* Destination */}\n            <div>\n              <label htmlFor=\"destination\" className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "üìç Destination\n              </label>\n              <input\n                type=\"text\"\n                id=\"destination\"\n                name=\"destination\"\n                required\n                value={formData.destination}\n                onChange={handleChange}\n                className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                placeholder=\"Where is this adventure taking place?\"\n              />\n            </div>\n\n            {/* Price and Capacity */}\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <label htmlFor=\"price\" className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                  üí∞ Price per person (‚Çπ)\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"price\"\n                  name=\"price\""
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "required\n                  min=\"0\"\n                  step=\"0.01\"\n                  value={formData.price}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"0.00\"\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"capacity\" className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                  üë• Group Size\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"capacity\"\n                  name=\"capacity\"\n                  required\n                  min=\"2\"\n                  value={formData.capacity}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:o"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "utline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Maximum participants\"\n                />\n              </div>\n            </div>\n\n            {/* Dates */}\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <label htmlFor=\"startDate\" className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                  üìÖ Start Date\n                </label>\n                <input\n                  type=\"date\"\n                  id=\"startDate\"\n                  name=\"startDate\"\n                  required\n                  value={formData.startDate}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                />\n              </div>"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "<div>\n                <label htmlFor=\"endDate\" className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                  üìÖ End Date\n                </label>\n                <input\n                  type=\"date\"\n                  id=\"endDate\"\n                  name=\"endDate\"\n                  required\n                  value={formData.endDate}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                />\n              </div>\n            </div>\n\n            {/* Itinerary */}\n            <div>\n              <label htmlFor=\"itinerary\" className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                üóìÔ∏è Detailed Itinerary\n              </label>\n              <textarea\n                id=\"itinerary\"\n                nam"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "e=\"itinerary\"\n                rows={4}\n                value={formData.itinerary}\n                onChange={handleChange}\n                className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                placeholder=\"Day-by-day breakdown of activities...\"\n              />\n            </div>\n\n            {/* Itinerary PDF Upload */}\n            <div>\n              <label className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                üìÑ Itinerary PDF\n              </label>\n              <div className=\"space-y-3\">\n                {currentItineraryPdf && (\n                  <div className=\"text-sm text-forest-600\">\n                    Current: <span className=\"font-medium\">{currentItineraryPdf}</span>\n                  </div>\n                )}\n                <input\n                  type=\"file\"\n                  ac"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "cept=\".pdf\"\n                  onChange={(e) => handleFileChange(e, 'itinerary')}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                />\n                <p className=\"text-xs text-forest-500\">Upload a detailed itinerary PDF (optional)</p>\n              </div>\n            </div>\n\n            {/* Categories */}\n            <div>\n              <label className=\"block text-sm font-medium text-forest-700 mb-3 flex items-center gap-2\">\n                üéØ Adventure Categories\n              </label>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3\">\n                {categories.map((category) => (\n                  <button\n                    key={category}\n                    type=\"button\"\n                    onClick={() => handleCategoryChange(category)}\n                    className={`px-4 py"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "-2 rounded-full text-sm font-medium transition-all duration-300 ${\n                      formData.categories.includes(category)\n                        ? 'bg-gradient-to-r from-nature-600 to-forest-600 text-white shadow-lg transform scale-105'\n                        : 'bg-forest-100 text-forest-700 hover:bg-forest-200 hover:scale-105'\n                    }`}\n                  >\n                    {category}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"flex flex-col sm:flex-row justify-between gap-4 pt-6 border-t border-forest-200\">\n              <button\n                type=\"button\"\n                onClick={handleDelete}\n                className=\"px-8 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg\"\n              >\n                üóëÔ∏è Delete Adven"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "ture\n              </button>\n              \n              <div className=\"flex gap-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => navigate('/profile')}\n                  className=\"px-8 py-3 border-2 border-forest-300 text-forest-700 rounded-xl font-semibold hover:bg-forest-100 transition-all duration-300\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"px-8 py-3 bg-gradient-to-r from-forest-600 to-nature-600 hover:from-forest-700 hover:to-nature-700 text-white rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {loading ? (\n                    <span className=\"flex items-center gap-2\">\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white"
  },
  {
    "source": "web\\src\\pages\\EditTrip.tsx",
    "text": "\"></div>\n                      Updating...\n                    </span>\n                  ) : (\n                    <span className=\"flex items-center gap-2\">\n                      üíæ Update Adventure\n                    </span>\n                  )}\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EditTrip;"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { io, Socket } from 'socket.io-client';\nimport api from '../config/api';\nimport { User } from '../types';\n\ninterface Trip {\n  _id: string;\n  title: string;\n  description: string;\n  destination: string;\n  price: number;\n  capacity: number;\n  participants: string[];\n  categories: string[];\n  startDate: string;\n  endDate: string;\n  status: 'active' | 'cancelled' | 'completed';\n  images?: string[];\n  organizerId: {\n    name: string;\n    email: string;\n    phone: string;\n  };\n  averageRating?: number;\n  reviewCount?: number;\n}\n\ninterface AIRecommendation {\n  tripId: string;\n  title: string;\n  destination: string;\n  price: number;\n  startDate: string;\n  endDate: string;\n  matchScore: number;\n  reasons: string[];\n  categories: string[];\n}\n\ninterface CustomerQuery {\n  _id: string;\n  customerName: string;\n  customerEmail: string;\n  query: string;\n  status: 'open' | 'in_progress' | 'resolved';\n  priority: 'low' | 'medium' | 'high';\n  cre"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "atedAt: string;\n  lastResponse?: string;\n}\n\ninterface AgentDashboardProps {\n  user: User;\n}\n\nconst EnhancedAgentDashboard: React.FC<AgentDashboardProps> = ({ user }) => {\n  const [activeTab, setActiveTab] = useState('overview');\n  const [trips, setTrips] = useState<Trip[]>([]);\n  const [customerQueries, setCustomerQueries] = useState<CustomerQuery[]>([]);\n  const [aiRecommendations, setAiRecommendations] = useState<AIRecommendation[]>([]);\n  const [selectedTrip, setSelectedTrip] = useState<Trip | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [socket, setSocket] = useState<Socket | null>(null);\n  const [notifications, setNotifications] = useState<Array<{ id: string; message: string; type: 'success' | 'info' | 'error'; timestamp: Date }>>([]);\n  \n  // Search and filters\n  const [searchQuery, setSearchQuery] = useState('');\n  const [categoryFilter, setCategoryFilter] = useState('all');\n  const [priceRange, setPriceRange] = u"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "seState({ min: 0, max: 100000 });\n\n  useEffect(() => {\n    fetchDashboardData();\n    initializeSocket();\n    \n    return () => {\n      if (socket) {\n        socket.disconnect();\n      }\n    };\n  }, []);\n\n  const initializeSocket = () => {\n    const token = localStorage.getItem('token');\n    if (!token) return;\n\n    const newSocket = io(process.env.REACT_APP_API_URL || 'https://trek-tribe-38in.onrender.com', {\n      auth: { token },\n      path: '/socket.io/'\n    });\n\n    newSocket.on('connect', () => {\n      console.log('üîå Agent dashboard connected to real-time updates');\n    });\n\n    newSocket.on('agent_dashboard_update', (data) => {\n      console.log('üìä Agent dashboard update received:', data);\n      addNotification(`New ${data.type.replace('_', ' ')}: ${data.data.title || data.data.customerName || 'Update'}`, 'info');\n      fetchDashboardData(); // Refresh data\n    });\n\n    newSocket.on('trip_update', (data) => {\n      if (data.type === 'created') {\n        addNotification(`New trip"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "available: ${data.trip.title}`, 'success');\n        fetchDashboardData();\n      }\n    });\n\n    newSocket.on('error', (error) => {\n      console.error('Agent socket error:', error);\n    });\n\n    setSocket(newSocket);\n  };\n\n  const fetchDashboardData = async () => {\n    try {\n      const [tripsResponse, queriesResponse, aiResponse] = await Promise.all([\n        api.get('/trips'),\n        api.get('/agent/queries'),\n        api.get('/agent/ai-recommendations')\n      ]);\n      \n      setTrips((tripsResponse.data as any) || []);\n      setCustomerQueries((queriesResponse.data as any).queries || []);\n      setAiRecommendations((aiResponse.data as any).recommendations || []);\n    } catch (error: any) {\n      setError(error.response?.data?.error || 'Failed to load dashboard data');\n      console.error('Error fetching dashboard data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addNotification = (message: string, type: 'success' | 'info' | 'error') => {\n    const notific"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "ation = {\n      id: Date.now().toString(),\n      message,\n      type,\n      timestamp: new Date()\n    };\n    \n    setNotifications(prev => [notification, ...prev.slice(0, 4)]); // Keep only 5 most recent\n    \n    // Auto-remove after 5 seconds\n    setTimeout(() => {\n      setNotifications(prev => prev.filter(n => n.id !== notification.id));\n    }, 5000);\n  };\n\n  const handleViewDetails = async (tripId: string) => {\n    try {\n      console.log('üîç Fetching trip details for ID:', tripId);\n      \n      if (!tripId) {\n        throw new Error('Trip ID is required');\n      }\n\n      const response = await api.get(`/trips/${tripId}`);\n      const tripData = response.data as any;\n      \n      if (!tripData) {\n        throw new Error('Trip not found');\n      }\n\n      // Create a complete trip object with fallbacks for missing data\n      const completeTripData: Trip = {\n        _id: tripData._id || tripId,\n        title: tripData.title || 'Trip Title Not Available',\n        description: tripData.d"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "escription || 'No description provided',\n        destination: tripData.destination || 'Destination not specified',\n        price: tripData.price || 0,\n        capacity: tripData.capacity || 0,\n        participants: tripData.participants || [],\n        categories: tripData.categories || [],\n        startDate: tripData.startDate || new Date().toISOString(),\n        endDate: tripData.endDate || new Date().toISOString(),\n        status: tripData.status || 'active',\n        images: tripData.images || [],\n        organizerId: {\n          name: tripData.organizerId?.name || 'Organizer Name Not Available',\n          email: tripData.organizerId?.email || 'Email not available',\n          phone: tripData.organizerId?.phone || 'Phone not available'\n        },\n        averageRating: tripData.averageRating || 0,\n        reviewCount: tripData.reviewCount || 0\n      };\n\n      setSelectedTrip(completeTripData);\n      setActiveTab('tripDetails');\n      \n    } catch (error: any) {\n      console.error('‚ùå"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "Error fetching trip details:', error);\n      const errorMessage = error.response?.data?.error || error.message || 'Failed to fetch trip details';\n      setError(errorMessage);\n      addNotification(`Error: ${errorMessage}`, 'error');\n      \n      // Still show what data we have\n      const fallbackTrip: Trip = {\n        _id: tripId,\n        title: 'Unable to load trip details',\n        description: 'There was an error loading the complete trip information.',\n        destination: 'Unknown',\n        price: 0,\n        capacity: 0,\n        participants: [],\n        categories: [],\n        startDate: new Date().toISOString(),\n        endDate: new Date().toISOString(),\n        status: 'active',\n        organizerId: {\n          name: 'Unknown Organizer',\n          email: 'Not available',\n          phone: 'Not available'\n        }\n      };\n      \n      setSelectedTrip(fallbackTrip);\n      setActiveTab('tripDetails');\n    }\n  };\n\n  const generateAIRecommendations = async () => {\n    try {"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "setLoading(true);\n      const response = await api.post('/agent/generate-recommendations', {\n        preferences: {\n          categories: categoryFilter !== 'all' ? [categoryFilter] : [],\n          priceRange: priceRange,\n          searchQuery: searchQuery\n        }\n      });\n      \n      setAiRecommendations((response.data as any).recommendations || []);\n      addNotification('AI recommendations updated!', 'success');\n    } catch (error: any) {\n      console.error('Error generating AI recommendations:', error);\n      addNotification('Failed to generate AI recommendations', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredTrips = trips.filter(trip => {\n    const matchesSearch = searchQuery === '' || \n      trip.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      trip.destination.toLowerCase().includes(searchQuery.toLowerCase());\n    \n    const matchesCategory = categoryFilter === 'all' || trip.categories.includes(categoryFilter);\n    const ma"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "tchesPrice = trip.price >= priceRange.min && trip.price <= priceRange.max;\n    \n    return matchesSearch && matchesCategory && matchesPrice;\n  });\n\n  if (loading && trips.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-nature-600 mx-auto mb-4\"></div>\n          <p className=\"text-forest-600\">Loading agent dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow-lg\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4\">\n          <h1 className=\"text-3xl font-bold bg-gradient-to-r from-forest-800 to-nature-600 bg-clip-text text-transparent\">\n            üéØ Agent Dashboard\n          </h1>\n          <p className=\"text-forest-600 mt-"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "1\">\n            Welcome, <span className=\"font-semibold\">{user.name}</span>! Assist customers and manage AI recommendations.\n          </p>\n        </div>\n      </div>\n\n      {/* Real-time Notifications */}\n      {notifications.length > 0 && (\n        <div className=\"max-w-7xl mx-auto px-6 mt-4\">\n          <div className=\"space-y-2\">\n            {notifications.map((notification) => (\n              <div\n                key={notification.id}\n                className={`p-3 rounded-lg shadow-lg border-l-4 ${\n                  notification.type === 'success' \n                    ? 'bg-green-50 border-green-500 text-green-800'\n                    : notification.type === 'error'\n                    ? 'bg-red-50 border-red-500 text-red-800'\n                    : 'bg-blue-50 border-blue-500 text-blue-800'\n                } animate-slide-down`}\n              >\n                <div className=\"flex justify-between items-start\">\n                  <p className=\"text-sm font-medium\">{notification.me"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "ssage}</p>\n                  <span className=\"text-xs opacity-70\">\n                    {notification.timestamp.toLocaleTimeString()}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Error Alert */}\n      {error && (\n        <div className=\"max-w-7xl mx-auto px-6 mt-4\">\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center justify-between\">\n            <span className=\"text-sm\">{error}</span>\n            <button onClick={() => setError('')} className=\"text-red-500 hover:text-red-700\">\n              ‚úï\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Navigation Tabs */}\n      <div className=\"max-w-7xl mx-auto px-6 mt-6\">\n        <div className=\"bg-white rounded-xl shadow-lg p-1\">\n          <nav className=\"flex space-x-1\">\n            {[\n              { id: 'overview', label: 'üìä Overview', icon: 'üìä' },\n              { id:"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "'trips', label: 'üéØ All Trips', icon: 'üéØ' },\n              { id: 'ai', label: 'ü§ñ AI Recommendations', icon: 'ü§ñ' },\n              { id: 'queries', label: 'üí¨ Customer Queries', icon: 'üí¨' },\n              ...(selectedTrip ? [{ id: 'tripDetails', label: `üîç ${selectedTrip.title}`, icon: 'üîç' }] : [])\n            ].map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${\n                  activeTab === tab.id\n                    ? 'bg-gradient-to-r from-forest-600 to-nature-600 text-white shadow-lg'\n                    : 'text-forest-600 hover:bg-forest-50'\n                }`}\n              >\n                {tab.label}\n              </button>\n            ))}\n          </nav>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"max-w-7xl mx-auto px-6 py-6\">\n        {/* Overview Tab */}\n        {activeTa"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "b === 'overview' && (\n          <div className=\"grid lg:grid-cols-3 gap-6\">\n            {/* Stats Cards */}\n            <div className=\"lg:col-span-2 grid md:grid-cols-2 gap-4\">\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-forest-600\">Total Trips</p>\n                    <p className=\"text-3xl font-bold text-forest-800\">{trips.length}</p>\n                  </div>\n                  <div className=\"bg-forest-100 p-3 rounded-full\">\n                    <span className=\"text-2xl\">üéØ</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-forest-600\">Customer Queries</p>"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "<p className=\"text-3xl font-bold text-forest-800\">{customerQueries.length}</p>\n                  </div>\n                  <div className=\"bg-blue-100 p-3 rounded-full\">\n                    <span className=\"text-2xl\">üí¨</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-forest-600\">AI Recommendations</p>\n                    <p className=\"text-3xl font-bold text-forest-800\">{aiRecommendations.length}</p>\n                  </div>\n                  <div className=\"bg-purple-100 p-3 rounded-full\">\n                    <span className=\"text-2xl\">ü§ñ</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <div className=\"flex items-center justify-between\">"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "<div>\n                    <p className=\"text-sm font-medium text-forest-600\">Active Trips</p>\n                    <p className=\"text-3xl font-bold text-forest-800\">\n                      {trips.filter(t => t.status === 'active').length}\n                    </p>\n                  </div>\n                  <div className=\"bg-green-100 p-3 rounded-full\">\n                    <span className=\"text-2xl\">‚úÖ</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Quick Actions */}\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-lg font-bold text-forest-800 mb-4\">üöÄ Quick Actions</h3>\n              <div className=\"space-y-3\">\n                <button \n                  onClick={generateAIRecommendations}\n                  className=\"w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all dur"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "ation-200\"\n                >\n                  ü§ñ Generate AI Recommendations\n                </button>\n                <button \n                  onClick={() => setActiveTab('trips')}\n                  className=\"w-full px-4 py-3 bg-gradient-to-r from-forest-600 to-nature-600 text-white rounded-lg hover:from-forest-700 hover:to-nature-700 transition-all duration-200\"\n                >\n                  üéØ Browse All Trips\n                </button>\n                <button \n                  onClick={() => setActiveTab('queries')}\n                  className=\"w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200\"\n                >\n                  üí¨ Check Customer Queries\n                </button>\n                <button \n                  onClick={fetchDashboardData}\n                  className=\"w-full px-4 py-3 border-2 border-forest-300 text-forest-700 rounded-lg hover:bg-forest-50 transition"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "-all duration-200\"\n                >\n                  üîÑ Refresh Data\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* All Trips Tab */}\n        {activeTab === 'trips' && (\n          <div className=\"space-y-6\">\n            {/* Search and Filters */}\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-lg font-bold text-forest-800 mb-4\">üîç Search & Filter Trips</h3>\n              <div className=\"grid md:grid-cols-3 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-forest-700 mb-2\">Search</label>\n                  <input\n                    type=\"text\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    placeholder=\"Search trips...\"\n                    className=\"w-full px-3 py-2 border border-forest-200 rounded-lg focus:ring-2 focus:ring-nature-500\""
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "/>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-forest-700 mb-2\">Category</label>\n                  <select\n                    value={categoryFilter}\n                    onChange={(e) => setCategoryFilter(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-forest-200 rounded-lg focus:ring-2 focus:ring-nature-500\"\n                  >\n                    <option value=\"all\">All Categories</option>\n                    <option value=\"Adventure\">Adventure</option>\n                    <option value=\"Cultural\">Cultural</option>\n                    <option value=\"Beach\">Beach</option>\n                    <option value=\"Mountain\">Mountain</option>\n                    <option value=\"Nature\">Nature</option>\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-forest-700 mb-2\">Max Price</label>\n                  <in"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "put\n                    type=\"number\"\n                    value={priceRange.max}\n                    onChange={(e) => setPriceRange(prev => ({ ...prev, max: parseInt(e.target.value) || 100000 }))}\n                    placeholder=\"Max price\"\n                    className=\"w-full px-3 py-2 border border-forest-200 rounded-lg focus:ring-2 focus:ring-nature-500\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Trips Grid */}\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {filteredTrips.map((trip) => (\n                <div key={trip._id} className=\"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-200\">\n                  <div className=\"p-6\">\n                    <div className=\"flex justify-between items-start mb-3\">\n                      <h3 className=\"text-lg font-bold text-forest-800 line-clamp-1\">{trip.title}</h3>\n                      <span className={`px-2 p"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "y-1 rounded-full text-xs font-semibold ${\n                        trip.status === 'active' ? 'bg-green-100 text-green-800' :\n                        trip.status === 'completed' ? 'bg-blue-100 text-blue-800' :\n                        'bg-gray-100 text-gray-800'\n                      }`}>\n                        {trip.status}\n                      </span>\n                    </div>\n                    \n                    <p className=\"text-forest-600 text-sm mb-3\">üìç {trip.destination}</p>\n                    <p className=\"text-forest-700 text-sm mb-4 line-clamp-2\">{trip.description}</p>\n                    \n                    <div className=\"flex justify-between items-center mb-4\">\n                      <span className=\"text-2xl font-bold text-nature-600\">‚Çπ{trip.price.toLocaleString()}</span>\n                      <span className=\"text-sm text-forest-600\">\n                        {trip.participants.length}/{trip.capacity} joined\n                      </span>\n                    </div>"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "<div className=\"flex gap-2 mb-4\">\n                      {trip.categories.slice(0, 2).map((category) => (\n                        <span key={category} className=\"px-2 py-1 bg-forest-100 text-forest-700 rounded-full text-xs\">\n                          {category}\n                        </span>\n                      ))}\n                    </div>\n                    \n                    <button\n                      onClick={() => handleViewDetails(trip._id)}\n                      className=\"w-full px-4 py-2 bg-gradient-to-r from-forest-600 to-nature-600 text-white rounded-lg hover:from-forest-700 hover:to-nature-700 transition-all duration-200\"\n                    >\n                      üîç View Details\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {filteredTrips.length === 0 && (\n              <div className=\"bg-white rounded-xl shadow-lg p-12 text-center\">"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "<div className=\"text-6xl mb-4\">üîç</div>\n                <h3 className=\"text-xl font-bold text-forest-800 mb-2\">No trips found</h3>\n                <p className=\"text-forest-600\">Try adjusting your search criteria.</p>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* AI Recommendations Tab */}\n        {activeTab === 'ai' && (\n          <div className=\"space-y-6\">\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h3 className=\"text-2xl font-bold text-forest-800\">ü§ñ AI Trip Recommendations</h3>\n                <button\n                  onClick={generateAIRecommendations}\n                  className=\"px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200\"\n                >\n                  ‚ôªÔ∏è Regenerate\n                </button>\n              </div>"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "{aiRecommendations.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <div className=\"text-6xl mb-4\">ü§ñ</div>\n                  <h3 className=\"text-xl font-bold text-forest-800 mb-2\">No AI recommendations yet</h3>\n                  <p className=\"text-forest-600 mb-4\">Click \"Generate AI Recommendations\" to get started.</p>\n                  <button\n                    onClick={generateAIRecommendations}\n                    className=\"px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200\"\n                  >\n                    ü§ñ Generate Recommendations\n                  </button>\n                </div>\n              ) : (\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  {aiRecommendations.map((rec, index) => (\n                    <div key={`${rec.tripId}-${index}`} className=\"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "xl p-6 border border-purple-200\">\n                      <div className=\"flex justify-between items-start mb-3\">\n                        <h4 className=\"text-lg font-bold text-forest-800\">{rec.title}</h4>\n                        <div className=\"flex items-center gap-1\">\n                          <span className=\"text-yellow-500\">‚≠ê</span>\n                          <span className=\"text-sm font-semibold text-forest-700\">\n                            {(rec.matchScore * 100).toFixed(0)}% match\n                          </span>\n                        </div>\n                      </div>\n                      \n                      <p className=\"text-forest-600 text-sm mb-2\">üìç {rec.destination}</p>\n                      <p className=\"text-2xl font-bold text-nature-600 mb-3\">‚Çπ{rec.price.toLocaleString()}</p>\n                      \n                      <div className=\"mb-3\">\n                        <p className=\"text-sm font-medium text-forest-700 mb-1\">Why recommended:</p>"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "<ul className=\"text-sm text-forest-600 list-disc list-inside space-y-1\">\n                          {rec.reasons.map((reason, idx) => (\n                            <li key={idx}>{reason}</li>\n                          ))}\n                        </ul>\n                      </div>\n                      \n                      <div className=\"flex gap-2 mb-4\">\n                        {rec.categories.slice(0, 3).map((category) => (\n                          <span key={category} className=\"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs\">\n                            {category}\n                          </span>\n                        ))}\n                      </div>\n                      \n                      <button\n                        onClick={() => handleViewDetails(rec.tripId)}\n                        className=\"w-full px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200\""
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": ">\n                        üîç View Details\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Trip Details Tab */}\n        {activeTab === 'tripDetails' && selectedTrip && (\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <div className=\"mb-6\">\n              <button\n                onClick={() => setActiveTab('trips')}\n                className=\"text-forest-600 hover:text-forest-800 flex items-center gap-2 mb-4\"\n              >\n                ‚Üê Back to Trips\n              </button>\n              \n              <div className=\"flex justify-between items-start\">\n                <div>\n                  <h2 className=\"text-3xl font-bold text-forest-800 mb-2\">{selectedTrip.title}</h2>\n                  <p className=\"text-forest-600 text-lg\">üìç {selectedTrip.destination}</p>\n                </div>\n                <span"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "className={`px-4 py-2 rounded-full text-sm font-semibold ${\n                  selectedTrip.status === 'active' ? 'bg-green-100 text-green-800' :\n                  selectedTrip.status === 'completed' ? 'bg-blue-100 text-blue-800' :\n                  'bg-gray-100 text-gray-800'\n                }`}>\n                  {selectedTrip.status.charAt(0).toUpperCase() + selectedTrip.status.slice(1)}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"grid lg:grid-cols-3 gap-6\">\n              {/* Main Details */}\n              <div className=\"lg:col-span-2 space-y-6\">\n                <div>\n                  <h3 className=\"text-xl font-bold text-forest-800 mb-3\">üìù Description</h3>\n                  <p className=\"text-forest-700 leading-relaxed\">{selectedTrip.description}</p>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-bold text-forest-800 mb-3\">üóìÔ∏è Trip Dates</h3>\n                  <div className=\"bg-forest-50"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "rounded-lg p-4\">\n                    <div className=\"flex justify-between\">\n                      <div>\n                        <p className=\"text-sm text-forest-600\">Start Date</p>\n                        <p className=\"font-bold text-forest-800\">{new Date(selectedTrip.startDate).toLocaleDateString()}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-forest-600\">End Date</p>\n                        <p className=\"font-bold text-forest-800\">{new Date(selectedTrip.endDate).toLocaleDateString()}</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <h3 className=\"text-xl font-bold text-forest-800 mb-3\">üè∑Ô∏è Categories</h3>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {selectedTrip.categories.map((category) => (\n                      <span key={category} className=\"px-3 py-1 bg-nature-100 text-nature-700 ro"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "unded-full text-sm font-medium\">\n                        {category}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              {/* Sidebar */}\n              <div className=\"space-y-6\">\n                <div className=\"bg-gradient-to-r from-nature-50 to-forest-50 rounded-xl p-6\">\n                  <h3 className=\"text-lg font-bold text-forest-800 mb-4\">üí∞ Pricing & Availability</h3>\n                  <div className=\"space-y-3\">\n                    <div>\n                      <p className=\"text-sm text-forest-600\">Price per person</p>\n                      <p className=\"text-3xl font-bold text-nature-600\">‚Çπ{selectedTrip.price.toLocaleString()}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-forest-600\">Availability</p>\n                      <p className=\"font-bold text-forest-800\">\n                        {selectedTrip.participants.length}/{selectedTrip.ca"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "pacity} spots filled\n                      </p>\n                      <div className=\"w-full bg-gray-200 rounded-full h-2 mt-1\">\n                        <div \n                          className=\"bg-nature-600 h-2 rounded-full\" \n                          style={{\n                            width: `${(selectedTrip.participants.length / selectedTrip.capacity) * 100}%`\n                          }}\n                        ></div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-blue-50 rounded-xl p-6\">\n                  <h3 className=\"text-lg font-bold text-forest-800 mb-4\">üë®‚Äçüíº Organizer</h3>\n                  <div className=\"space-y-2\">\n                    <div>\n                      <p className=\"text-sm text-forest-600\">Name</p>\n                      <p className=\"font-medium text-forest-800\">{selectedTrip.organizerId.name}</p>\n                    </div>\n                    <div>"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "<p className=\"text-sm text-forest-600\">Email</p>\n                      <p className=\"font-medium text-forest-800\">{selectedTrip.organizerId.email}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-forest-600\">Phone</p>\n                      <p className=\"font-medium text-forest-800\">{selectedTrip.organizerId.phone}</p>\n                    </div>\n                  </div>\n                </div>\n\n                {selectedTrip.averageRating !== undefined && selectedTrip.averageRating > 0 && (\n                  <div className=\"bg-yellow-50 rounded-xl p-6\">\n                    <h3 className=\"text-lg font-bold text-forest-800 mb-4\">‚≠ê Reviews</h3>\n                    <div className=\"text-center\">\n                      <div className=\"text-3xl font-bold text-yellow-600 mb-2\">\n                        {selectedTrip.averageRating.toFixed(1)}\n                      </div>\n                      <div className=\"flex justify-center mb-2\">"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "{[...Array(5)].map((_, i) => (\n                          <span key={i} className={i < Math.floor(selectedTrip.averageRating!) ? 'text-yellow-500' : 'text-gray-300'}>\n                            ‚≠ê\n                          </span>\n                        ))}\n                      </div>\n                      <p className=\"text-sm text-forest-600\">\n                        Based on {selectedTrip.reviewCount} reviews\n                      </p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Customer Queries Tab */}\n        {activeTab === 'queries' && (\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <h3 className=\"text-2xl font-bold text-forest-800 mb-6\">üí¨ Customer Queries</h3>\n            \n            {customerQueries.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <div className=\"text-6xl mb-4\">üí¨</div>"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "<h3 className=\"text-xl font-bold text-forest-800 mb-2\">No customer queries</h3>\n                <p className=\"text-forest-600\">All queries are resolved or no new queries yet.</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {customerQueries.map((query) => (\n                  <div key={query._id} className=\"bg-forest-50 rounded-lg p-4 border border-forest-200\">\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div>\n                        <h4 className=\"font-bold text-forest-800\">{query.customerName}</h4>\n                        <p className=\"text-sm text-forest-600\">{query.customerEmail}</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <span className={`px-2 py-1 rounded-full text-xs font-semibold ${\n                          query.status === 'open' ? 'bg-red-100 text-red-800' :\n                          query.sta"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": "tus === 'in_progress' ? 'bg-yellow-100 text-yellow-800' :\n                          'bg-green-100 text-green-800'\n                        }`}>\n                          {query.status.replace('_', ' ')}\n                        </span>\n                        <p className=\"text-xs text-forest-500 mt-1\">\n                          {new Date(query.createdAt).toLocaleDateString()}\n                        </p>\n                      </div>\n                    </div>\n                    <p className=\"text-forest-700 mb-2\">{query.query}</p>\n                    {query.lastResponse && (\n                      <div className=\"bg-white rounded-lg p-3 mt-2\">\n                        <p className=\"text-sm text-forest-600\">Last Response:</p>\n                        <p className=\"text-forest-700\">{query.lastResponse}</p>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>"
  },
  {
    "source": "web\\src\\pages\\EnhancedAgentDashboard.tsx",
    "text": ");\n};\n\nexport default EnhancedAgentDashboard;"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n// Most icons removed as they're not currently used in the UI\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../config/api';\n\ninterface ScheduleDay {\n  day: number;\n  title: string;\n  activities: string[];\n}\n\ninterface TripData {\n  _id: string;\n  title: string;\n  description: string;\n  destination: string;\n  price: number;\n  capacity: number;\n  categories: string[];\n  startDate: string;\n  endDate: string;\n  itinerary?: string;\n  coverImage?: string;\n  images?: string[];\n  itineraryPdf?: string;\n  paymentQR?: string;\n  schedule?: ScheduleDay[];\n  organizerId: string;\n  participants: string[];\n  status: 'active' | 'cancelled' | 'completed';\n}\n\nconst EnhancedEditTrip: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const fileInputRef = useRef<"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "HTMLInputElement>(null);\n  \n  const [trip, setTrip] = useState<TripData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState('');\n  const [currentStep, setCurrentStep] = useState(1);\n  const totalSteps = 4;\n\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    destination: '',\n    price: '',\n    capacity: '',\n    categories: [] as string[],\n    startDate: '',\n    endDate: '',\n    itinerary: '',\n    status: 'active' as 'active' | 'cancelled' | 'completed'\n  });\n\n  const [schedule, setSchedule] = useState<ScheduleDay[]>([]);\n  const [newImages, setNewImages] = useState<File[]>([]);\n  const [newItineraryPdf, setNewItineraryPdf] = useState<File | null>(null);\n  const [newPaymentQR, setNewPaymentQR] = useState<File | null>(null);\n  const [imagesToDelete, setImagesToDelete] = useState<string[]>([]);\n\n  const categories = [\n    'Adventure', 'Cultural', 'Beach', 'Mounta"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "in', 'City', 'Nature', \n    'Wildlife', 'Desert', 'Arctic', 'Botanical', 'Photography', \n    'Spiritual', 'Culinary', 'Historical', 'Sports'\n  ];\n\n  useEffect(() => {\n    fetchTrip();\n  }, [id]);\n\n  const fetchTrip = async () => {\n    try {\n      const response = await api.get(`/trips/${id}`);\n      const tripData = response.data as TripData;\n      \n      // Verify ownership\n      if (tripData.organizerId !== user?.id) {\n        navigate('/trips');\n        return;\n      }\n      \n      setTrip(tripData);\n      setFormData({\n        title: tripData.title,\n        description: tripData.description,\n        destination: tripData.destination,\n        price: tripData.price.toString(),\n        capacity: tripData.capacity.toString(),\n        categories: tripData.categories || [],\n        startDate: tripData.startDate ? new Date(tripData.startDate).toISOString().split('T')[0] : '',\n        endDate: tripData.endDate ? new Date(tripData.endDate).toISOString().split('T')[0] : '',\n        itinerary"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": ": tripData.itinerary || '',\n        status: tripData.status || 'active'\n      });\n      \n      setSchedule(tripData.schedule || []);\n    } catch (error: any) {\n      setError('Failed to fetch trip details');\n      console.error('Error fetching trip:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleCategoryToggle = (category: string) => {\n    setFormData({\n      ...formData,\n      categories: formData.categories.includes(category)\n        ? formData.categories.filter(c => c !== category)\n        : [...formData.categories, category]\n    });\n  };\n\n  // Schedule management\n  const addScheduleDay = () => {\n    const newDay: ScheduleDay = {\n      day: schedule.length + 1,\n      title: '',\n      activities: ['']\n    };\n    setSchedule([...schedule, newDay]);\n  };"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "const updateScheduleDay = (dayIndex: number, field: keyof ScheduleDay, value: any) => {\n    const updatedSchedule = [...schedule];\n    if (field === 'activities') {\n      updatedSchedule[dayIndex].activities = value;\n    } else {\n      (updatedSchedule[dayIndex] as any)[field] = value;\n    }\n    setSchedule(updatedSchedule);\n  };\n\n  const addActivity = (dayIndex: number) => {\n    const updatedSchedule = [...schedule];\n    updatedSchedule[dayIndex].activities.push('');\n    setSchedule(updatedSchedule);\n  };\n\n  const removeActivity = (dayIndex: number, activityIndex: number) => {\n    const updatedSchedule = [...schedule];\n    updatedSchedule[dayIndex].activities.splice(activityIndex, 1);\n    setSchedule(updatedSchedule);\n  };\n\n  const removeScheduleDay = (dayIndex: number) => {\n    const updatedSchedule = schedule.filter((_, index) => index !== dayIndex)\n      .map((day, index) => ({ ...day, day: index + 1 }));\n    setSchedule(updatedSchedule);\n  };\n\n  // File handling\n  const handleI"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "mageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    const validImages = files.filter(file => file.type.startsWith('image/'));\n    \n    if (validImages.length !== files.length) {\n      setError('Some files were not valid images and were skipped');\n    }\n    \n    if (validImages.length + (trip?.images?.length || 0) > 10) {\n      setError('Maximum 10 images allowed per trip');\n      return;\n    }\n    \n    setNewImages([...newImages, ...validImages]);\n    setError('');\n  };\n\n  const removeNewImage = (index: number) => {\n    setNewImages(newImages.filter((_, i) => i !== index));\n  };\n\n  const removeExistingImage = (imageUrl: string) => {\n    setImagesToDelete([...imagesToDelete, imageUrl]);\n  };\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>, type: 'itinerary' | 'paymentQR') => {\n    const file = e.target.files?.[0];\n    if (file) {\n      if (type === 'itinerary' && file.type === 'application/pdf') {"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "setNewItineraryPdf(file);\n        setError('');\n      } else if (type === 'paymentQR' && file.type.startsWith('image/')) {\n        setNewPaymentQR(file);\n        setError('');\n      } else {\n        setError(`Please select a valid ${type === 'itinerary' ? 'PDF' : 'image'} file`);\n      }\n    }\n  };\n\n  // Upload file to server\n  const uploadFileToServer = async (file: File): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = async () => {\n        try {\n          const base64Data = (reader.result as string).split(',')[1];\n          const response = await axios.post('/files/upload/base64', {\n            data: base64Data,\n            filename: file.name,\n            mimeType: file.type\n          });\n          const responseData = response.data as { file: { url: string } };\n          resolve(responseData.file.url);\n        } catch (error) {\n          reject(error);\n        }\n      };\n      reader.onerror = reject;"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "reader.readAsDataURL(file);\n    });\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    setError('');\n\n    try {\n      // Upload new files if any\n      let newImageUrls: string[] = [];\n      let newItineraryUrl = '';\n      let newPaymentQRUrl = '';\n\n      if (newImages.length > 0) {\n        newImageUrls = await Promise.all(\n          newImages.map(image => uploadFileToServer(image))\n        );\n      }\n\n      if (newItineraryPdf) {\n        newItineraryUrl = await uploadFileToServer(newItineraryPdf);\n      }\n\n      if (newPaymentQR) {\n        newPaymentQRUrl = await uploadFileToServer(newPaymentQR);\n      }\n\n      // Prepare update data\n      const updateData = {\n        title: formData.title,\n        description: formData.description,\n        destination: formData.destination,\n        price: parseFloat(formData.price),\n        capacity: parseInt(formData.capacity),\n        categories: formData.categories,\n        startDate: formData.startDate,\n        endDate: formD"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "ata.endDate,\n        itinerary: formData.itinerary,\n        status: formData.status,\n        schedule: schedule.filter(day => day.title.trim()),\n        ...(newImageUrls.length > 0 && {\n          images: [\n            ...(trip?.images?.filter(img => !imagesToDelete.includes(img)) || []),\n            ...newImageUrls\n          ]\n        }),\n        ...(newItineraryUrl && { itineraryPdf: newItineraryUrl }),\n        ...(newPaymentQRUrl && { paymentQR: newPaymentQRUrl })\n      };\n\n      await axios.put(`/trips/${id}`, updateData);\n      \n      alert('Trip updated successfully!');\n      navigate('/my-profile');\n    } catch (error: any) {\n      setError(error.response?.data?.error || 'Failed to update trip');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (trip?.participants && trip.participants.length > 0) {\n      const confirmMessage = `This trip has ${trip.participants.length} participant(s). Deleting it will cancel their bookings. Are you s"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "ure you want to continue?`;\n      if (!window.confirm(confirmMessage)) return;\n    }\n\n    if (window.confirm('Are you sure you want to delete this trip? This action cannot be undone.')) {\n      try {\n        await axios.delete(`/trips/${id}`);\n        alert('Trip deleted successfully');\n        navigate('/my-profile');\n      } catch (error: any) {\n        setError(error.response?.data?.error || 'Failed to delete trip');\n      }\n    }\n  };\n\n  const nextStep = () => {\n    if (currentStep < totalSteps) {\n      setCurrentStep(currentStep + 1);\n    }\n  };\n\n  const prevStep = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-forest-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Lo"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "ading trip details...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!trip) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900\">Trip not found</h2>\n          <p className=\"text-gray-600 mt-2\">The trip you're trying to edit doesn't exist or you don't have permission to edit it.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 py-8\">\n      <div className=\"max-w-4xl mx-auto px-4\">\n        {/* Header */}\n        <div className=\"bg-white rounded-2xl shadow-xl p-8 mb-8\">\n          <div className=\"flex justify-between items-start mb-6\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-forest-800 mb-2\">\n                ‚úèÔ∏è Edit Trip\n              </h1>\n              <p className=\"text-forest-600\">"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "Updating: <span className=\"font-semibold\">{trip.title}</span>\n              </p>\n            </div>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={handleDelete}\n                className=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium\"\n              >\n                üóëÔ∏è Delete Trip\n              </button>\n            </div>\n          </div>\n\n          {/* Progress Steps */}\n          <div className=\"flex items-center justify-between mb-8\">\n            {[1, 2, 3, 4].map((step) => (\n              <div key={step} className=\"flex items-center\">\n                <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold ${\n                  step <= currentStep \n                    ? 'bg-nature-600 text-white' \n                    : 'bg-gray-200 text-gray-600'\n                }`}>\n                  {step}\n                </div>\n                {step < 4 && (\n                  <div className={`w-1"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "6 h-1 mx-2 ${\n                    step < currentStep ? 'bg-nature-600' : 'bg-gray-200'\n                  }`}></div>\n                )}\n              </div>\n            ))}\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6\">\n              {error}\n            </div>\n          )}\n\n          {/* Step Content */}\n          <div className=\"space-y-6\">\n            {currentStep === 1 && (\n              <div className=\"space-y-6\">\n                <h3 className=\"text-xl font-semibold text-gray-900\">Basic Information</h3>\n                \n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Trip Title *\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"title\"\n                      value={formData.title}"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "onChange={handleInputChange}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nature-500\"\n                      required\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Destination *\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"destination\"\n                      value={formData.destination}\n                      onChange={handleInputChange}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nature-500\"\n                      required\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Price p"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "er Person (‚Çπ) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"price\"\n                      value={formData.price}\n                      onChange={handleInputChange}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nature-500\"\n                      required\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Capacity *\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"capacity\"\n                      value={formData.capacity}\n                      onChange={handleInputChange}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nature-500\"\n                      required\n                    /"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": ">\n                    <p className=\"text-sm text-gray-500 mt-1\">\n                      Current participants: {trip?.participants?.length || 0}\n                    </p>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Start Date *\n                    </label>\n                    <input\n                      type=\"date\"\n                      name=\"startDate\"\n                      value={formData.startDate}\n                      onChange={handleInputChange}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nature-500\"\n                      required\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      End Date *\n                    </label>\n                    <input\n                      type=\"date\""
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "name=\"endDate\"\n                      value={formData.endDate}\n                      onChange={handleInputChange}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nature-500\"\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Description *\n                  </label>\n                  <textarea\n                    name=\"description\"\n                    value={formData.description}\n                    onChange={handleInputChange}\n                    rows={4}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nature-500\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gr"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "ay-700 mb-3\">\n                    Categories\n                  </label>\n                  <div className=\"grid grid-cols-3 md:grid-cols-5 gap-3\">\n                    {categories.map((category) => (\n                      <label\n                        key={category}\n                        className={`cursor-pointer px-3 py-2 rounded-lg text-sm font-medium text-center border-2 transition-all ${\n                          formData.categories.includes(category)\n                            ? 'bg-nature-100 border-nature-500 text-nature-700'\n                            : 'bg-gray-50 border-gray-200 text-gray-600 hover:border-nature-300'\n                        }`}\n                      >\n                        <input\n                          type=\"checkbox\"\n                          checked={formData.categories.includes(category)}\n                          onChange={() => handleCategoryToggle(category)}\n                          className=\"hidden\"\n                        />"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "{category}\n                      </label>\n                    ))}\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Trip Status\n                  </label>\n                  <select\n                    name=\"status\"\n                    value={formData.status}\n                    onChange={handleInputChange}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nature-500\"\n                  >\n                    <option value=\"active\">Active</option>\n                    <option value=\"cancelled\">Cancelled</option>\n                    <option value=\"completed\">Completed</option>\n                  </select>\n                </div>\n              </div>\n            )}\n\n            {/* Add other steps here for images, schedule, etc. */}\n          </div>\n\n          {/* Navigation */}\n          <div className=\"fle"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "x justify-between mt-8 pt-6 border-t border-gray-200\">\n            <button\n              type=\"button\"\n              onClick={prevStep}\n              disabled={currentStep === 1}\n              className=\"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Previous\n            </button>\n            \n            <div className=\"flex gap-4\">\n              {currentStep === totalSteps ? (\n                <button\n                  onClick={handleSave}\n                  disabled={saving}\n                  className=\"bg-nature-600 hover:bg-nature-700 disabled:opacity-50 text-white px-8 py-3 rounded-lg font-medium\"\n                >\n                  {saving ? 'Saving...' : 'Save Changes'}\n                </button>\n              ) : (\n                <button\n                  type=\"button\"\n                  onClick={nextStep}\n                  className=\"bg-nature-600 hover:bg-nature-700 text-white px-6 py-3 roun"
  },
  {
    "source": "web\\src\\pages\\EnhancedEditTrip.tsx",
    "text": "ded-lg\"\n                >\n                  Next\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EnhancedEditTrip;"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport api from '../config/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport ProfilePhotoUpload from '../components/ProfilePhotoUpload';\nimport { getUserProfileShareUrl } from '../utils/config';\n\ninterface ProfileStats {\n  memberSince: string;\n  profileCompleteness: number;\n  tripsOrganized?: number;\n  totalParticipants?: number;\n  organizerRating?: number;\n  tripsJoined?: number;\n}\n\ninterface SocialLinks {\n  instagram?: string;\n  facebook?: string;\n  twitter?: string;\n  linkedin?: string;\n  website?: string;\n}\n\ninterface OrganizerProfile {\n  bio?: string;\n  experience?: string;\n  specialties?: string[];\n  certifications?: string[];\n  languages?: string[];\n  yearsOfExperience?: number;\n  achievements?: string[];\n}\n\ninterface ProfileUser {\n  _id: string;\n  name: string;\n  email?: string;\n  role: string;\n  phone?: string;\n  bio?: string;\n  profilePhoto?: string;\n  location?: st"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "ring;\n  dateOfBirth?: string;\n  socialLinks?: SocialLinks;\n  organizerProfile?: OrganizerProfile;\n  isVerified?: boolean;\n  createdAt: string;\n}\n\nconst EnhancedProfile: React.FC = () => {\n  const { userId } = useParams<{ userId: string }>();\n  const { user: currentUser } = useAuth();\n  const isOwnProfile = !userId || userId === currentUser?.id;\n  \n  const [profile, setProfile] = useState<ProfileUser | null>(null);\n  const [stats, setStats] = useState<ProfileStats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [editing, setEditing] = useState(false);\n  const [shareableLink, setShareableLink] = useState('');\n  const [copySuccess, setCopySuccess] = useState(false);\n\n  const [editForm, setEditForm] = useState({\n    name: '',\n    phone: '',\n    bio: '',\n    location: '',\n    socialLinks: {\n      instagram: '',\n      facebook: '',\n      twitter: '',\n      linkedin: '',\n      website: ''\n    },\n    organizerProfile: {\n      bio: '',\n      experience: '',\n      specialt"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "ies: [] as string[],\n      languages: [] as string[],\n      yearsOfExperience: 0\n    }\n  });\n\n  useEffect(() => {\n    fetchProfile();\n    if (isOwnProfile) {\n      fetchStats();\n    }\n  }, [userId, isOwnProfile]);\n\n  const fetchProfile = async () => {\n    try {\n      const endpoint = isOwnProfile ? '/profile/enhanced' : `/profile/enhanced/${userId}`;\n      const response = await api.get(endpoint);\n      \n      const responseData = response.data as { data: { user: any } };\n      const userData = responseData.data.user;\n      setProfile(userData);\n      \n      // Initialize edit form\n      if (isOwnProfile) {\n        setEditForm({\n          name: userData.name || '',\n          phone: userData.phone || '',\n          bio: userData.bio || '',\n          location: userData.location || '',\n          socialLinks: {\n            instagram: userData.socialLinks?.instagram || '',\n            facebook: userData.socialLinks?.facebook || '',\n            twitter: userData.socialLinks?.twitter || '',"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "linkedin: userData.socialLinks?.linkedin || '',\n            website: userData.socialLinks?.website || ''\n          },\n          organizerProfile: {\n            bio: userData.organizerProfile?.bio || '',\n            experience: userData.organizerProfile?.experience || '',\n            specialties: userData.organizerProfile?.specialties || [],\n            languages: userData.organizerProfile?.languages || [],\n            yearsOfExperience: userData.organizerProfile?.yearsOfExperience || 0\n          }\n        });\n      }\n    } catch (error) {\n      console.error('Error fetching profile:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchStats = async () => {\n    try {\n      const response = await api.get('/profile/me/stats');\n      const statsData = response.data as { stats: any };\n      setStats(statsData.stats);\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n    }\n  };\n\n  const generateShareableLink = async () => {\n    try {"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "const response = await api.post('/profile/me/share');\n      const linkData = response.data as { shareableLink: string };\n      setShareableLink(linkData.shareableLink);\n    } catch (error) {\n      console.error('Error generating shareable link:', error);\n    }\n  };\n\n  const handleShareProfile = async () => {\n    const profileUserId = userId || currentUser?.id;\n    if (!profileUserId) return;\n    \n    const shareUrl = getUserProfileShareUrl(profileUserId);\n    \n    try {\n      await navigator.clipboard.writeText(shareUrl);\n      setCopySuccess(true);\n      setTimeout(() => setCopySuccess(false), 2000);\n    } catch (err) {\n      // Fallback for browsers that don't support clipboard API\n      const textArea = document.createElement('textarea');\n      textArea.value = shareUrl;\n      document.body.appendChild(textArea);\n      textArea.select();\n      document.execCommand('copy');\n      document.body.removeChild(textArea);\n      setCopySuccess(true);\n      setTimeout(() => setCopySucc"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "ess(false), 2000);\n    }\n  };\n\n  const handleEdit = () => {\n    setEditing(true);\n  };\n\n  const handleSave = async () => {\n    try {\n      // Validate form data before cleaning\n      const errors: string[] = [];\n      \n      // Validate name\n      if (!editForm.name?.trim() && !profile?.name) {\n        errors.push('Name is required');\n      }\n      \n      // Validate phone if provided\n      if (editForm.phone?.trim() && (editForm.phone.trim().length < 10 || editForm.phone.trim().length > 15)) {\n        errors.push('Phone number must be between 10-15 digits');\n      }\n      \n      // Validate website URL if provided\n      if (editForm.socialLinks.website?.trim()) {\n        try {\n          new URL(editForm.socialLinks.website.trim());\n        } catch {\n          errors.push('Website must be a valid URL (e.g., https://example.com)');\n        }\n      }\n      \n      // Validate years of experience\n      const yearsExp = editForm.organizerProfile.yearsOfExperience || 0;\n      if (yearsExp <"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "0 || yearsExp > 50) {\n        errors.push('Years of experience must be between 0-50');\n      }\n      \n      // Validate text lengths\n      if (editForm.bio && editForm.bio.length > 500) {\n        errors.push('Bio must be under 500 characters');\n      }\n      if (editForm.organizerProfile.bio && editForm.organizerProfile.bio.length > 1000) {\n        errors.push('Organizer bio must be under 1000 characters');\n      }\n      if (editForm.organizerProfile.experience && editForm.organizerProfile.experience.length > 1000) {\n        errors.push('Experience description must be under 1000 characters');\n      }\n      \n      if (errors.length > 0) {\n        alert(`Please fix the following errors:\\n\\n${errors.join('\\n')}`);\n        return;\n      }\n      \n      // Clean up form data before sending\n      const cleanedForm: any = {\n        name: editForm.name?.trim() || profile?.name || '',\n        phone: editForm.phone?.trim() || '',\n        bio: editForm.bio?.trim() || '',\n        location: editForm"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": ".location?.trim() || '',\n        socialLinks: {\n          instagram: editForm.socialLinks.instagram?.trim() || '',\n          facebook: editForm.socialLinks.facebook?.trim() || '',\n          twitter: editForm.socialLinks.twitter?.trim() || '',\n          linkedin: editForm.socialLinks.linkedin?.trim() || ''\n        }\n      };\n      \n      // Only add website if it's a valid URL\n      if (editForm.socialLinks.website?.trim()) {\n        cleanedForm.socialLinks.website = editForm.socialLinks.website.trim();\n      }\n      \n      // Only add organizer profile for organizers\n      if (profile?.role === 'organizer') {\n        cleanedForm.organizerProfile = {\n          bio: editForm.organizerProfile.bio?.trim() || '',\n          experience: editForm.organizerProfile.experience?.trim() || '',\n          specialties: editForm.organizerProfile.specialties || [],\n          languages: editForm.organizerProfile.languages || [],\n          yearsOfExperience: Math.max(0, Math.min(50, editForm.organizerProf"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "ile.yearsOfExperience || 0))\n        };\n      }\n      \n      const response = await api.put('/profile/enhanced', cleanedForm);\n      const userData = response.data as { data: { user: any } };\n      setProfile(userData.data.user);\n      setEditing(false);\n      alert('Profile updated successfully!');\n    } catch (error: any) {\n      const errorMessage = error.response?.data?.message || error.response?.data?.error || 'Failed to update profile';\n      alert(`Error: ${errorMessage}`);\n      console.error('Profile update error:', error.response?.data);\n    }\n  };\n\n  const handleCancel = () => {\n    setEditing(false);\n    // Reset form to current profile data\n    if (profile) {\n      setEditForm({\n        name: profile.name || '',\n        phone: profile.phone || '',\n        bio: profile.bio || '',\n        location: profile.location || '',\n        socialLinks: {\n          instagram: profile.socialLinks?.instagram || '',\n          facebook: profile.socialLinks?.facebook || '',\n          twitte"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "r: profile.socialLinks?.twitter || '',\n          linkedin: profile.socialLinks?.linkedin || '',\n          website: profile.socialLinks?.website || ''\n        },\n        organizerProfile: {\n          bio: profile.organizerProfile?.bio || '',\n          experience: profile.organizerProfile?.experience || '',\n          specialties: profile.organizerProfile?.specialties || [],\n          languages: profile.organizerProfile?.languages || [],\n          yearsOfExperience: profile.organizerProfile?.yearsOfExperience || 0\n        }\n      });\n    }\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    alert('Link copied to clipboard!');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-forest-600\"></div>\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex ite"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "ms-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900\">Profile not found</h2>\n          <p className=\"text-gray-600 mt-2\">The profile you're looking for doesn't exist.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50\">\n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        {/* Profile Header */}\n        <div className=\"bg-white rounded-2xl shadow-xl overflow-hidden mb-8\">\n          <div className=\"bg-gradient-to-r from-forest-600 to-nature-600 h-48 relative\">\n            <div className=\"absolute inset-0 bg-black bg-opacity-20\"></div>\n            <div className=\"absolute bottom-6 left-6 flex items-end gap-6\">\n              <div className=\"bg-white p-2 rounded-2xl shadow-lg\">\n                {isOwnProfile && editing ? (\n                  <ProfilePhotoUpload\n                    currentPhoto={profile.profilePhoto}"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "onPhotoUpdate={(photoUrl) => {\n                      setProfile({...profile, profilePhoto: photoUrl});\n                      // The component handles the API call, so we just update the local state\n                    }}\n                    className=\"scale-75\"\n                  />\n                ) : (\n                  <div className=\"w-32 h-32 rounded-xl overflow-hidden bg-gradient-to-br from-forest-400 to-nature-500 flex items-center justify-center\">\n                    {profile.profilePhoto ? (\n                      <img \n                        src={profile.profilePhoto} \n                        alt={profile.name}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-full bg-gray-200 flex items-center justify-center\">\n                        <span className=\"text-4xl\">üë§</span>\n                      </div>\n                    )}\n                  </div>\n                )}"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "</div>\n              <div className=\"text-white pb-4\">\n                <h1 className=\"text-3xl font-bold mb-2 flex items-center gap-2\">\n                  {profile.name}\n                  {profile.isVerified && (\n                    <span className=\"text-2xl\" title=\"Verified Profile\">‚úÖ</span>\n                  )}\n                </h1>\n                <p className=\"text-forest-100 text-lg capitalize flex items-center gap-2\">\n                  <span className=\"text-xl\">\n                    {profile.role === 'organizer' ? 'üó∫Ô∏è' : \n                     profile.role === 'admin' ? 'üõ†Ô∏è' : \n                     profile.role === 'agent' ? 'üéß' : 'üéí'}\n                  </span>\n                  {profile.role}\n                </p>\n                {profile.location && (\n                  <p className=\"text-forest-200 flex items-center gap-1\">\n                    üìç {profile.location}\n                  </p>\n                )}\n              </div>\n            </div>"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "{isOwnProfile && (\n              <div className=\"absolute top-6 right-6\">\n                {editing ? (\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={handleSave}\n                      className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium\"\n                    >\n                      üíæ Save\n                    </button>\n                    <button\n                      onClick={handleCancel}\n                      className=\"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm font-medium\"\n                    >\n                      ‚ùå Cancel\n                    </button>\n                  </div>\n                ) : (\n                  <div className=\"flex flex-col gap-2\">\n                    <button\n                      onClick={handleEdit}\n                      className=\"bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg text-sm font-medium backdr"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "op-blur-sm\"\n                    >\n                      ‚úèÔ∏è Edit Profile\n                    </button>\n                  </div>\n                )}\n              </div>\n            )}\n            \n            {/* Standalone Upload Photo Button */}\n            {isOwnProfile && !editing && (\n              <div className=\"absolute bottom-6 right-6\">\n                <div className=\"bg-white p-1 rounded-lg shadow-lg\">\n                  <ProfilePhotoUpload\n                    currentPhoto={profile.profilePhoto}\n                    onPhotoUpdate={(photoUrl) => {\n                      setProfile({...profile, profilePhoto: photoUrl});\n                    }}\n                    className=\"scale-50 origin-center\"\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n          \n          <div className=\"p-6\">\n            {/* Editing Help Message */}\n            {editing && (\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "\">\n                <div className=\"flex items-start gap-2\">\n                  <span className=\"text-blue-600 text-lg\">‚ÑπÔ∏è</span>\n                  <div>\n                    <h4 className=\"font-semibold text-blue-800 mb-1\">Complete your profile in steps</h4>\n                    <p className=\"text-blue-700 text-sm\">\n                      You can save your progress anytime - no need to fill all fields at once. Update what you want and click Save!\n                    </p>\n                  </div>\n                </div>\n              </div>\n            )}\n            \n            {/* Profile Stats - Only show when not editing */}\n            {isOwnProfile && stats && !editing && (\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\n                <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                  <div className=\"text-2xl font-bold text-forest-600\">{stats.profileCompleteness}%</div>\n                  <div className=\"text-sm text-gray-600\">Profile"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "Complete</div>\n                </div>\n                {profile.role === 'organizer' ? (\n                  <>\n                    <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                      <div className=\"text-2xl font-bold text-nature-600\">{stats.tripsOrganized || 0}</div>\n                      <div className=\"text-sm text-gray-600\">Trips Organized</div>\n                    </div>\n                    <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                      <div className=\"text-2xl font-bold text-blue-600\">{stats.totalParticipants || 0}</div>\n                      <div className=\"text-sm text-gray-600\">Total Participants</div>\n                    </div>\n                    <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                      <div className=\"text-2xl font-bold text-yellow-600\">‚≠ê {stats.organizerRating || 0}</div>\n                      <div className=\"text-sm text-gray-600\">Rating</div>\n                    </div>"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "</>\n                ) : (\n                  <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                    <div className=\"text-2xl font-bold text-nature-600\">{stats.tripsJoined || 0}</div>\n                    <div className=\"text-sm text-gray-600\">Adventures Joined</div>\n                  </div>\n                )}\n              </div>\n            )}\n            \n            {/* Bio */}\n            <div className=\"mb-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">About</h3>\n              {editing ? (\n                <textarea\n                  value={editForm.bio}\n                  onChange={(e) => setEditForm({...editForm, bio: e.target.value})}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-nature-500\"\n                  rows={3}\n                  placeholder=\"Tell us about yourself...\"\n                />\n              ) : (\n                <p className=\"text-gray-700 leading-rela"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "xed\">\n                  {profile.bio || 'No bio available yet.'}\n                </p>\n              )}\n            </div>\n            \n            {/* Contact Info */}\n            {(isOwnProfile || (profile.socialLinks && Object.values(profile.socialLinks).some(Boolean))) && (\n              <div className=\"mb-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Connect</h3>\n                {editing ? (\n                  <div className=\"space-y-3\">\n                    <input\n                      type=\"text\"\n                      placeholder=\"Instagram handle\"\n                      value={editForm.socialLinks.instagram}\n                      onChange={(e) => setEditForm({\n                        ...editForm,\n                        socialLinks: {...editForm.socialLinks, instagram: e.target.value}\n                      })}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\"\n                    />\n                    <input"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "type=\"text\"\n                      placeholder=\"Website URL\"\n                      value={editForm.socialLinks.website}\n                      onChange={(e) => setEditForm({\n                        ...editForm,\n                        socialLinks: {...editForm.socialLinks, website: e.target.value}\n                      })}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\"\n                    />\n                  </div>\n                ) : (\n                  <div className=\"flex flex-wrap gap-3\">\n                    {profile.socialLinks?.instagram && (\n                      <a\n                        href={`https://instagram.com/${profile.socialLinks.instagram}`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"flex items-center gap-2 bg-pink-100 text-pink-700 px-3 py-1 rounded-full text-sm hover:bg-pink-200\"\n                      >\n                        üì∑ Instag"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "ram\n                      </a>\n                    )}\n                    {profile.socialLinks?.website && (\n                      <a\n                        href={profile.socialLinks.website}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"flex items-center gap-2 bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm hover:bg-blue-200\"\n                      >\n                        üåê Website\n                      </a>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n            \n            {/* Organizer Profile */}\n            {profile.role === 'organizer' && (\n              <div className=\"mb-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Organizer Experience</h3>\n                {editing ? (\n                  <div className=\"space-y-3\">\n                    <textarea\n                      placeholder=\"Organizer bio\""
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "value={editForm.organizerProfile.bio}\n                      onChange={(e) => setEditForm({\n                        ...editForm,\n                        organizerProfile: {...editForm.organizerProfile, bio: e.target.value}\n                      })}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\"\n                      rows={3}\n                    />\n                    <input\n                      type=\"number\"\n                      placeholder=\"Years of experience\"\n                      value={editForm.organizerProfile.yearsOfExperience}\n                      onChange={(e) => setEditForm({\n                        ...editForm,\n                        organizerProfile: {...editForm.organizerProfile, yearsOfExperience: parseInt(e.target.value) || 0}\n                      })}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\"\n                    />\n                  </div>\n                ) : ("
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "<div className=\"space-y-3\">\n                    {profile.organizerProfile?.bio && (\n                      <p className=\"text-gray-700\">{profile.organizerProfile.bio}</p>\n                    )}\n                    {profile.organizerProfile?.yearsOfExperience && (\n                      <p className=\"text-sm text-gray-600\">\n                        üéñÔ∏è {profile.organizerProfile.yearsOfExperience} years of experience\n                      </p>\n                    )}\n                    {profile.organizerProfile?.specialties && profile.organizerProfile.specialties.length > 0 && (\n                      <div>\n                        <h4 className=\"font-medium text-gray-800 mb-2\">Specialties:</h4>\n                        <div className=\"flex flex-wrap gap-2\">\n                          {profile.organizerProfile.specialties.map((specialty, index) => (\n                            <span key={index} className=\"bg-nature-100 text-nature-700 px-2 py-1 rounded-full text-xs\">"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "{specialty}\n                            </span>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n            \n            {/* Share Profile */}\n            <div className=\"pt-4 border-t border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-gray-600\">Share this profile</span>\n                <button\n                  onClick={handleShareProfile}\n                  className=\"bg-nature-600 hover:bg-nature-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2\"\n                >\n                  {copySuccess ? (\n                    <>\n                      <svg className=\"w-4 h-4 text-green-200\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                      </svg>\n                      <span>Link Copied!</span>\n                    </>\n                  ) : (\n                    <>\n                      <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path d=\"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\" />\n                      </svg>\n                      <span>Share Profile</span>\n                    </>\n                  )}\n                </button>\n              </div>\n              <p className=\"text-xs text-gray-500 mt-2\">\n                Share your profile with other adventurers on trektribe.in\n              </p>\n            </div>\n          </div>\n        </div>\n        \n        {/* Recent Activity or Trips could go here */}\n      </div>\n    </div>\n  );\n};\n\nexport default Enhanc"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfile.tsx",
    "text": "edProfile;"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport api from '../config/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport EnhancedProfileCard from '../components/EnhancedProfileCard';\nimport PostCreator from '../components/PostCreator';\nimport PostCard from '../components/PostCard';\nimport ProfilePhotoUpload from '../components/ProfilePhotoUpload';\n\ninterface ProfileUser {\n  _id: string;\n  name: string;\n  email?: string;\n  role: string;\n  phone?: string;\n  bio?: string;\n  profilePhoto?: string;\n  location?: string;\n  socialLinks?: {\n    instagram?: string;\n    facebook?: string;\n    twitter?: string;\n    linkedin?: string;\n    website?: string;\n  };\n  organizerProfile?: {\n    bio?: string;\n    experience?: string;\n    specialties?: string[];\n    languages?: string[];\n    yearsOfExperience?: number;\n  };\n  socialStats?: {\n    followersCount: number;\n    followingCount: number;\n    postsCount: number;\n  };"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "isVerified?: boolean;\n  createdAt: string;\n}\n\ninterface Post {\n  _id: string;\n  type: 'trip_memory' | 'general_post' | 'link_share' | 'experience';\n  title: string;\n  content: string;\n  images?: string[];\n  links?: Array<{\n    title: string;\n    url: string;\n    description?: string;\n  }>;\n  tripData?: {\n    destination: string;\n    startDate: string;\n    endDate: string;\n    participants?: number;\n    highlights?: string[];\n    rating?: number;\n  };\n  tags?: string[];\n  likes: any[];\n  comments: any[];\n  isPublic: boolean;\n  authorId: {\n    _id: string;\n    name: string;\n    profilePhoto?: string;\n    role: string;\n  };\n  createdAt: string;\n  updatedAt: string;\n}\n\nconst EnhancedProfilePage: React.FC = () => {\n  const { userId } = useParams<{ userId: string }>();\n  const navigate = useNavigate();\n  const { user: currentUser } = useAuth();\n  const isOwnProfile = !userId || userId === currentUser?.id;\n  \n  const [profile, setProfile] = useState<ProfileUser | null>(null);\n  const [posts,"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "setPosts] = useState<Post[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [editing, setEditing] = useState(false);\n  const [showPostCreator, setShowPostCreator] = useState(false);\n  const [activeTab, setActiveTab] = useState<'posts' | 'past-trips' | 'links'>('posts');\n  const [pastTrips, setPastTrips] = useState<any[]>([]);\n  const [userLinks, setUserLinks] = useState<any[]>([]);\n\n  const [editForm, setEditForm] = useState({\n    name: '',\n    phone: '',\n    bio: '',\n    location: '',\n    socialLinks: {\n      instagram: '',\n      facebook: '',\n      twitter: '',\n      linkedin: '',\n      website: ''\n    },\n    organizerProfile: {\n      bio: '',\n      experience: '',\n      specialties: [] as string[],\n      languages: [] as string[],\n      yearsOfExperience: 0\n    }\n  });\n\n  useEffect(() => {\n    fetchProfile();\n    fetchPosts();\n    if (isOwnProfile) {\n      fetchPastTrips();\n      fetchUserLinks();\n    }\n  }, [userId, isOwnProfile]);\n\n  const fetchProfile = async () =>"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "{\n    try {\n      const endpoint = isOwnProfile ? '/profile/enhanced' : `/profile/enhanced/${userId}`;\n      const response = await api.get(endpoint);\n      \n      const responseData = response.data as { data: { user: any } };\n      const userData = responseData.data.user;\n      setProfile(userData);\n      \n      if (isOwnProfile) {\n        setEditForm({\n          name: userData.name || '',\n          phone: userData.phone || '',\n          bio: userData.bio || '',\n          location: userData.location || '',\n          socialLinks: {\n            instagram: userData.socialLinks?.instagram || '',\n            facebook: userData.socialLinks?.facebook || '',\n            twitter: userData.socialLinks?.twitter || '',\n            linkedin: userData.socialLinks?.linkedin || '',\n            website: userData.socialLinks?.website || ''\n          },\n          organizerProfile: {\n            bio: userData.organizerProfile?.bio || '',\n            experience: userData.organizerProfile?.experience || ''"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": ",\n            specialties: userData.organizerProfile?.specialties || [],\n            languages: userData.organizerProfile?.languages || [],\n            yearsOfExperience: userData.organizerProfile?.yearsOfExperience || 0\n          }\n        });\n      }\n    } catch (error) {\n      console.error('Error fetching profile:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchPosts = async () => {\n    try {\n      const targetUserId = userId || currentUser?.id;\n      if (!targetUserId) return;\n\n      const response = await api.get(`/api/posts?authorId=${targetUserId}`);\n      setPosts((response.data as any).posts);\n    } catch (error) {\n      console.error('Error fetching posts:', error);\n    }\n  };\n\n  const fetchPastTrips = async () => {\n    try {\n      // This would fetch past trips from the trips API\n      const response = await api.get('/trips');\n      const allTrips = response.data;\n      \n      // Filter for completed trips where user participated\n      const comp"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "letedTrips = (allTrips as any[]).filter((trip: any) =>\n        trip.status === 'completed' && \n        (trip.organizerId === currentUser?.id || trip.participants.includes(currentUser?.id))\n      );\n      \n      setPastTrips(completedTrips);\n    } catch (error) {\n      console.error('Error fetching past trips:', error);\n    }\n  };\n\n  const fetchUserLinks = async () => {\n    try {\n      // Fetch user's link posts\n      const response = await api.get('/api/posts?type=link_share');\n      const linkPosts = (response.data as any).posts.filter((post: any) =>\n        post.authorId._id === currentUser?.id && post.links && post.links.length > 0\n      );\n      \n      const extractedLinks = linkPosts.flatMap((post: any) =>\n        post.links!.map((link: any) => ({\n          ...link,\n          postId: post._id,\n          postTitle: post.title,\n          createdAt: post.createdAt\n        }))\n      );\n      \n      setUserLinks(extractedLinks);\n    } catch (error) {\n      console.error('Error fetching"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "user links:', error);\n    }\n  };\n\n  const handleSave = async () => {\n    try {\n      const response = await api.put('/profile/enhanced', editForm);\n      const userData = response.data as { data: { user: any } };\n      setProfile(userData.data.user);\n      setEditing(false);\n      alert('Profile updated successfully!');\n    } catch (error: any) {\n      console.error('Profile update error:', error);\n      const errorMessage = error.response?.data?.message || error.message || 'Failed to update profile';\n      alert(`Failed to update profile: ${errorMessage}`);\n    }\n  };\n\n  const handlePostCreated = () => {\n    fetchPosts();\n    if (isOwnProfile) {\n      fetchUserLinks();\n      // Refresh profile to update post count\n      fetchProfile();\n    }\n  };\n\n  const handleFollowUpdate = () => {\n    fetchProfile();\n  };\n\n  const handlePhotoUpdate = (photoUrl: string) => {\n    if (profile) {\n      setProfile({ ...profile, profilePhoto: photoUrl });\n    }\n  };\n\n  if (loading) {\n    return ("
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "<div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900\">Profile not found</h2>\n          <p className=\"text-gray-600 mt-2\">The profile you're looking for doesn't exist.</p>\n          <button\n            onClick={() => navigate('/home')}\n            className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n          >\n            Go Home\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // All roles can have profiles now\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50\">\n      <div className=\"max-w-6xl mx-aut"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "o px-4 py-8\">\n        {/* Header with enhanced profile card */}\n        <div className=\"mb-8\">\n          <EnhancedProfileCard\n            profile={profile}\n            isOwnProfile={isOwnProfile}\n            onFollowUpdate={handleFollowUpdate}\n          />\n        </div>\n\n        {/* Action buttons for own profile */}\n        {isOwnProfile && (\n          <div className=\"flex gap-4 mb-6\">\n            {/* Only organizers can create posts */}\n            {profile.role === 'organizer' && (\n              <button\n                onClick={() => setShowPostCreator(true)}\n                className=\"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center gap-2 shadow-lg\"\n              >\n                <span className=\"text-xl\">‚úçÔ∏è</span>\n                Create Post\n              </button>\n            )}\n            <button\n              onClick={() => setEditing(!editing)}\n              cla"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "ssName={`px-6 py-3 rounded-lg transition-all duration-200 flex items-center gap-2 ${\n                editing\n                  ? 'bg-gray-600 text-white hover:bg-gray-700'\n                  : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'\n              }`}\n            >\n              <span className=\"text-xl\">{editing ? 'üíæ' : '‚úèÔ∏è'}</span>\n              {editing ? 'Save Changes' : 'Edit Profile'}\n            </button>\n            {editing && (\n              <button\n                onClick={handleSave}\n                className=\"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all duration-200 flex items-center gap-2\"\n              >\n                <span className=\"text-xl\">‚úÖ</span>\n                Save Profile\n              </button>\n            )}\n          </div>\n        )}\n\n        {/* Editing form */}\n        {editing && (\n          <div className=\"bg-white rounded-2xl shadow-xl p-6 mb-8\">\n            <h3 className=\"text-xl font-bold text"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "-gray-900 mb-6\">Edit Profile</h3>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Name *\n                </label>\n                <input\n                  type=\"text\"\n                  value={editForm.name}\n                  onChange={(e) => setEditForm({ ...editForm, name: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Phone\n                </label>\n                <input\n                  type=\"tel\"\n                  value={editForm.phone}\n                  onChange={(e) => setEditForm({ ...editForm, phone: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "rounded-lg focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n\n              <div className=\"md:col-span-2\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Bio\n                </label>\n                <textarea\n                  value={editForm.bio}\n                  onChange={(e) => setEditForm({ ...editForm, bio: e.target.value })}\n                  rows={3}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Tell us about yourself...\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Location\n                </label>\n                <input\n                  type=\"text\"\n                  value={editForm.location}\n                  onChange={(e) => setEditForm({ ...editForm, location: e.target.value })}"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Your city, country\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Profile Photo\n                </label>\n                <ProfilePhotoUpload\n                  currentPhoto={profile.profilePhoto}\n                  onPhotoUpdate={handlePhotoUpdate}\n                />\n              </div>\n            </div>\n\n            {/* Social Links */}\n            <div className=\"mt-6\">\n              <h4 className=\"text-lg font-semibold text-gray-900 mb-4\">Social Links</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Instagram handle\"\n                  value={editForm.socialLinks.instagram}\n                  onChange={(e) => setEditForm({"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "...editForm,\n                    socialLinks: { ...editForm.socialLinks, instagram: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                />\n                <input\n                  type=\"url\"\n                  placeholder=\"Website URL\"\n                  value={editForm.socialLinks.website}\n                  onChange={(e) => setEditForm({\n                    ...editForm,\n                    socialLinks: { ...editForm.socialLinks, website: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Facebook handle\"\n                  value={editForm.socialLinks.facebook}\n                  onChange={(e) => setEditForm({\n                    ...editForm,"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "socialLinks: { ...editForm.socialLinks, facebook: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Twitter handle\"\n                  value={editForm.socialLinks.twitter}\n                  onChange={(e) => setEditForm({\n                    ...editForm,\n                    socialLinks: { ...editForm.socialLinks, twitter: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"LinkedIn handle\"\n                  value={editForm.socialLinks.linkedin}\n                  onChange={(e) => setEditForm({\n                    ...editForm,\n                    socialLinks: { ...editForm.socialLinks"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": ", linkedin: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n            </div>\n\n            {/* Organizer Profile */}\n            {profile.role === 'organizer' && (\n              <div className=\"mt-6\">\n                <h4 className=\"text-lg font-semibold text-gray-900 mb-4\">Organizer Profile</h4>\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Organizer Bio\n                    </label>\n                    <textarea\n                      value={editForm.organizerProfile.bio}\n                      onChange={(e) => setEditForm({\n                        ...editForm,\n                        organizerProfile: { ...editForm.organizerProfile, bio: e.target.value }\n                      })}\n                      rows={3}"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"Tell us about your organizing experience...\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Years of Experience\n                    </label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      max=\"50\"\n                      value={editForm.organizerProfile.yearsOfExperience}\n                      onChange={(e) => setEditForm({\n                        ...editForm,\n                        organizerProfile: { ...editForm.organizerProfile, yearsOfExperience: parseInt(e.target.value) || 0 }\n                      })}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    />"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "</div>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Content tabs - only show for organizers */}\n        {profile.role === 'organizer' ? (\n          <div className=\"bg-white rounded-2xl shadow-xl\">\n            {/* Tab navigation */}\n            <div className=\"border-b border-gray-200\">\n              <nav className=\"flex space-x-8 px-6\">\n                {[\n                  { id: 'posts', label: 'Posts', icon: 'üìù', count: posts.length, show: true },\n                  { id: 'past-trips', label: 'Past Trips', icon: 'üèîÔ∏è', count: pastTrips.length, show: isOwnProfile },\n                  { id: 'links', label: 'Links', icon: 'üîó', count: userLinks.length, show: isOwnProfile }\n                ].filter(tab => tab.show).map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id as any)}\n                  className={`py-4 px-1 border-b-2 font-medium text-sm trans"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "ition-colors ${\n                    activeTab === tab.id\n                      ? 'border-blue-500 text-blue-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }`}\n                >\n                  <span className=\"flex items-center gap-2\">\n                    <span>{tab.icon}</span>\n                    {tab.label}\n                    <span className=\"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs\">\n                      {tab.count}\n                    </span>\n                  </span>\n                </button>\n              ))}\n            </nav>\n          </div>\n\n          {/* Tab content */}\n          <div className=\"p-6\">\n            {activeTab === 'posts' && (\n              <div className=\"space-y-6\">\n                {posts.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <div className=\"text-6xl mb-4\">üìù</div>\n                    <h3 className=\"text-xl font"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "-semibold text-gray-900 mb-2\">No posts yet</h3>\n                    <p className=\"text-gray-600 mb-6\">\n                      {isOwnProfile ? (profile.role === 'organizer' ? 'Start sharing your adventures with the community!' : 'Posts are only available for organizers') : 'This user hasn\\'t posted anything yet.'}\n                    </p>\n                    {isOwnProfile && profile.role === 'organizer' && (\n                      <button\n                        onClick={() => setShowPostCreator(true)}\n                        className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                      >\n                        Create Your First Post\n                      </button>\n                    )}\n                  </div>\n                ) : (\n                  posts.map((post) => (\n                    <PostCard key={post._id} post={post} onLikeUpdate={fetchPosts} />\n                  ))\n                )}\n              </div>\n            )}"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "{activeTab === 'past-trips' && (\n              <div className=\"space-y-4\">\n                {pastTrips.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <div className=\"text-6xl mb-4\">üèîÔ∏è</div>\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No past trips</h3>\n                    <p className=\"text-gray-600\">\n                      {isOwnProfile ? 'Your completed trips will appear here.' : 'This user hasn\\'t completed any trips yet.'}\n                    </p>\n                  </div>\n                ) : (\n                  pastTrips.map((trip) => (\n                    <div key={trip._id} className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <h4 className=\"font-semibold text-gray-900\">{trip.title}</h4>\n                          <p className=\"text-gray-60"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "0\">{trip.destination}</p>\n                          <p className=\"text-sm text-gray-500\">\n                            {new Date(trip.startDate).toLocaleDateString()} - {new Date(trip.endDate).toLocaleDateString()}\n                          </p>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"text-sm text-gray-500\">Status: {trip.status}</p>\n                          <p className=\"text-sm text-gray-500\">{trip.participants?.length || 0} participants</p>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            )}\n\n            {activeTab === 'links' && (\n              <div className=\"space-y-4\">\n                {userLinks.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <div className=\"text-6xl mb-4\">üîó</div>\n                    <h3 className=\"text-xl font-semibold text-gray"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "-900 mb-2\">No links shared</h3>\n                    <p className=\"text-gray-600\">\n                      {isOwnProfile ? 'Share useful links with the community!' : 'This user hasn\\'t shared any links yet.'}\n                    </p>\n                  </div>\n                ) : (\n                  userLinks.map((link, index) => (\n                    <div key={index} className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-semibold text-gray-900\">{link.title}</h4>\n                          {link.description && (\n                            <p className=\"text-gray-600 text-sm\">{link.description}</p>\n                          )}\n                          <a\n                            href={link.url}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\""
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "className=\"text-blue-600 hover:text-blue-800 text-sm\"\n                          >\n                            {link.url}\n                          </a>\n                          <p className=\"text-xs text-gray-500 mt-1\">\n                            From post: {link.postTitle}\n                          </p>\n                        </div>\n                        <div className=\"ml-4\">\n                          <a\n                            href={link.url}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                          >\n                            Visit\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            )}\n          </div>\n        </div>"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": ") : (\n          /* Non-organizer profile - show basic info */\n          <div className=\"bg-white rounded-2xl shadow-xl p-8\">\n            <div className=\"text-center py-12\">\n              <div className=\"text-6xl mb-4\">\n                {profile.role === 'admin' ? 'üõ†Ô∏è' : profile.role === 'agent' ? 'üéß' : 'üé™'}\n              </div>\n              <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">\n                {profile.role === 'admin' ? 'Admin Profile' : profile.role === 'agent' ? 'Agent Profile' : 'Traveler Profile'}\n              </h3>\n              <p className=\"text-gray-600 max-w-md mx-auto\">\n                {profile.role === 'admin' \n                  ? 'Platform administrator with full system access'\n                  : profile.role === 'agent'\n                  ? 'Customer support agent helping travelers find their perfect adventure'\n                  : 'Adventure seeker exploring amazing destinations'}\n              </p>\n              {profile.bio && (\n                <div cl"
  },
  {
    "source": "web\\src\\pages\\EnhancedProfilePage.tsx",
    "text": "assName=\"mt-6 p-4 bg-gray-50 rounded-lg max-w-2xl mx-auto\">\n                  <p className=\"text-gray-700\">{profile.bio}</p>\n                </div>\n              )}\n              {profile.location && (\n                <div className=\"mt-4 flex items-center justify-center gap-2 text-gray-600\">\n                  <span>üìç</span>\n                  <span>{profile.location}</span>\n                </div>\n              )}\n              <div className=\"mt-8\">\n                <p className=\"text-sm text-gray-500\">\n                  Member since {new Date(profile.createdAt).toLocaleDateString()}\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Post Creator Modal - only for organizers */}\n      {showPostCreator && profile.role === 'organizer' && (\n        <PostCreator\n          onPostCreated={handlePostCreated}\n          onClose={() => setShowPostCreator(false)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default EnhancedProfilePage;"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { Link, Navigate } from 'react-router-dom';\nimport api from '../config/api';\nimport { User } from '../types';\nimport { useAuth } from '../contexts/AuthContext';\nimport AIRecommendations from '../components/AIRecommendations';\nimport AIAnalyticsDashboard from '../components/AIAnalyticsDashboard';\n\n\ninterface Trip {\n  _id: string;\n  title: string;\n  description: string;\n  destination: string;\n  price: number;\n  capacity: number;\n  participants: string[];\n  categories: string[];\n  images: string[];\n  organizerId: string;\n  status: string;\n  startDate: string;\n  endDate: string;\n}\n\ninterface HomeProps {\n  user: User | null;\n}\n\nconst Home: React.FC<HomeProps> = ({ user }) => {\n  const { user: currentUser } = useAuth();\n  const [featuredTrips, setFeaturedTrips] = useState<Trip[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [stats, setStats] = useState({\n    totalTrips: 0,\n    totalUsers: 0,\n    totalOrganizers: 0,"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "totalBookings: 0,\n    countries: 0\n  });\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n\n  // Background images for hero carousel\n  const heroImages = [\n    'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=2071',\n    'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=2070', \n    'https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=2069'\n  ];\n\n  useEffect(() => {\n    // Fetch real data from the API (for all users)\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        const tripsRes = await api.get('/trips?limit=6');\n        \n        // Try to fetch stats, handle 404 gracefully\n        let statsRes;\n        try {\n          statsRes = await api.get('/stats');\n        } catch (statsError: any) {\n          console.log('Stats endpoint not available, using fallback data');\n          statsRes = { data: null };\n        }\n        \n        const tripsData = tripsRes.data;\n        // Ensure tripsD"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "ata is an array to prevent 's.map is not a function' errors\n        if (Array.isArray(tripsData)) {\n          setFeaturedTrips(tripsData);\n        } else if (tripsData && typeof tripsData === 'object' && Array.isArray((tripsData as any).data)) {\n          // Handle case where trips are nested in a data property\n          setFeaturedTrips((tripsData as any).data);\n        } else {\n          console.warn('Invalid trips data format received:', tripsData);\n          setFeaturedTrips([]);\n        }\n        \n        const statsData = statsRes.data as { trips?: { total?: number; totalBookings?: number }; users?: { total?: number; organizers?: number } };\n        console.log('Stats data received:', statsData);\n        \n        // Calculate real-time stats from actual data\n        const realTimeStats = {\n          totalTrips: (tripsData as any[]).length || 0,\n          totalUsers: statsData?.users?.total || 0,\n          totalOrganizers: statsData?.users?.organizers || 0,\n          totalBookings"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": ": statsData?.trips?.totalBookings || 0,\n          countries: new Set((tripsData as any[]).map((trip: any) => trip.destination?.split(',')[0]?.trim()).filter(Boolean)).size || 15\n        };\n        \n        setStats(realTimeStats);\n      } catch (error: any) {\n        console.error('Error fetching data:', error.message || error);\n        // Set fallback values when stats endpoint is not available\n        setStats({ \n          totalTrips: 12, \n          totalUsers: 156, \n          totalOrganizers: 8, \n          totalBookings: 45, \n          countries: 15 \n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchData();\n    \n    // Hero image carousel\n    const interval = setInterval(() => {\n      setCurrentImageIndex((prev) => (prev + 1) % heroImages.length);\n    }, 5000);\n    \n    return () => clearInterval(interval);\n  }, [heroImages.length, currentUser]);\n\n  // Home page now requires authentication (handled by routing)\n\n  return (\n    <div className=\"min-h"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "-screen bg-forest-50\">\n      {/* Hero Section with Dynamic Background */}\n      <section \n        className=\"relative min-h-screen flex items-center justify-center overflow-hidden\"\n        style={{\n          backgroundImage: `linear-gradient(rgba(5, 46, 22, 0.7), rgba(20, 83, 45, 0.7)), url('${heroImages[currentImageIndex]}')`\n        }}\n      >\n        <div className=\"absolute inset-0 bg-forest-gradient opacity-80\"></div>\n        \n        {/* Floating Elements */}\n        <div className=\"absolute top-20 left-10 animate-float\">\n          <div className=\"text-forest-200 text-6xl opacity-20\">üå≤</div>\n        </div>\n        <div className=\"absolute top-40 right-20 animate-float\" style={{animationDelay: '2s'}}>\n          <div className=\"text-forest-200 text-4xl opacity-30\">ü¶ã</div>\n        </div>\n        <div className=\"absolute bottom-32 left-20 animate-float\" style={{animationDelay: '4s'}}>\n          <div className=\"text-forest-200 text-5xl opacity-25\">üçÉ</div>\n        </div>"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "<div className=\"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 text-center\">\n          <div className=\"mb-8\">\n            <h1 className=\"text-5xl md:text-7xl font-bold mb-6 text-white leading-tight\">\n              Discover Nature's\n              <br />\n              <span className=\"text-blue-400 animate-pulse-slow\">Hidden Wonders</span>\n            </h1>\n            <p className=\"text-xl md:text-2xl mb-8 text-forest-100 max-w-3xl mx-auto leading-relaxed\">\n              Join a community of eco-conscious adventurers. Explore pristine forests, majestic mountains, \n              and untouched wilderness while making lifelong connections.\n            </p>\n          </div>\n          \n          {/* Interactive Stats */}\n          <div className=\"grid grid-cols-3 gap-6 mb-12 max-w-2xl mx-auto\">\n            <div className=\"text-center\">\n              <div className=\"text-3xl font-bold text-blue-400 animate-bounce-slow\">{stats.totalTrips || 0}</div>\n              <div className=\""
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "text-forest-200 text-sm\">Adventures</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-3xl font-bold text-blue-400 animate-bounce-slow\" style={{animationDelay: '1s'}}>{stats.totalUsers || 0}</div>\n              <div className=\"text-forest-200 text-sm\">Explorers</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-3xl font-bold text-blue-400 animate-bounce-slow\" style={{animationDelay: '2s'}}>{stats.totalOrganizers || 0}</div>\n              <div className=\"text-forest-200 text-sm\">Organizers</div>\n            </div>\n          </div>\n          \n          <div className=\"flex flex-col sm:flex-row gap-6 justify-center\">\n            <Link\n              to=\"/trips\"\n              className=\"group relative px-10 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-full text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl\"\n            >"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "<span className=\"flex items-center justify-center gap-2\">\n                üåø Explore Adventures\n                <svg className=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                </svg>\n              </span>\n            </Link>\n            {!user && (\n              <Link\n                to=\"/register\"\n                className=\"group px-10 py-4 border-2 border-forest-200 hover:bg-forest-200 hover:text-forest-900 text-forest-100 rounded-full text-lg font-semibold transition-all duration-300 transform hover:scale-105 backdrop-blur-sm\"\n              >\n                <span className=\"flex items-center justify-center gap-2\">\n                  üèïÔ∏è Join Community\n                </span>\n              </Link>\n            )}"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "</div>\n        </div>\n        \n        {/* Scroll Indicator */}\n        <div className=\"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce\">\n          <div className=\"w-6 h-10 border-2 border-forest-200 rounded-full flex justify-center\">\n            <div className=\"w-1 h-3 bg-forest-200 rounded-full mt-2 animate-pulse\"></div>\n          </div>\n        </div>\n      </section>\n\n      {/* Adventure Categories Section */}\n      <section className=\"py-20 bg-white relative overflow-hidden\">\n        <div className=\"absolute inset-0 bg-gradient-to-r from-forest-50/30 to-nature-50/30\"></div>\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl md:text-5xl font-bold text-forest-800 mb-6\">\n              Choose Your \n              <span className=\"text-blue-600\">Adventure Style</span>\n            </h2>\n            <p className=\"text-xl text-forest-600 max-w-3xl mx-aut"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "o leading-relaxed\">\n              From serene forest walks to adrenaline-pumping mountain climbs, find your perfect wilderness experience\n            </p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            <div className=\"group bg-gradient-to-br from-forest-100 to-forest-200 rounded-2xl p-8 text-center hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-3\">\n              <div className=\"text-6xl mb-4 group-hover:scale-110 transition-transform duration-300\">üèîÔ∏è</div>\n              <h3 className=\"text-xl font-bold text-forest-800 mb-3\">Mountain Expeditions</h3>\n              <p className=\"text-forest-600 text-sm leading-relaxed\">Conquer majestic peaks and witness breathtaking views from the world's highest mountains.</p>\n            </div>\n            \n            <div className=\"group bg-gradient-to-br from-nature-100 to-nature-200 rounded-2xl p-8 text-center hover:shadow-2xl transition-all duration-500 trans"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "form hover:-translate-y-3\">\n              <div className=\"text-6xl mb-4 group-hover:scale-110 transition-transform duration-300\">üå≤</div>\n              <h3 className=\"text-xl font-bold text-forest-800 mb-3\">Forest Treks</h3>\n              <p className=\"text-forest-600 text-sm leading-relaxed\">Immerse yourself in ancient forests and discover hidden trails through pristine wilderness.</p>\n            </div>\n            \n            <div className=\"group bg-gradient-to-br from-earth-100 to-earth-200 rounded-2xl p-8 text-center hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-3\">\n              <div className=\"text-6xl mb-4 group-hover:scale-110 transition-transform duration-300\">üåä</div>\n              <h3 className=\"text-xl font-bold text-forest-800 mb-3\">Water Adventures</h3>\n              <p className=\"text-forest-600 text-sm leading-relaxed\">Navigate crystal-clear rivers, pristine lakes, and explore coastal wilderness areas.</p>\n            </div>"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "<div className=\"group bg-gradient-to-br from-purple-100 to-purple-200 rounded-2xl p-8 text-center hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-3\">\n              <div className=\"text-6xl mb-4 group-hover:scale-110 transition-transform duration-300\">üåå</div>\n              <h3 className=\"text-xl font-bold text-forest-800 mb-3\">Aurora Watching</h3>\n              <p className=\"text-forest-600 text-sm leading-relaxed\">Chase the northern lights across Arctic landscapes and witness nature's most magical display.</p>\n            </div>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8 mt-8\">\n            <div className=\"group bg-gradient-to-br from-orange-100 to-orange-200 rounded-2xl p-8 text-center hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-3\">\n              <div className=\"text-6xl mb-4 group-hover:scale-110 transition-transform duration-300\">üèúÔ∏è</div>\n              <h3 className=\"t"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "ext-xl font-bold text-forest-800 mb-3\">Desert Expeditions</h3>\n              <p className=\"text-forest-600 text-sm leading-relaxed\">Explore vast desert landscapes, ancient dunes, and oasis hidden in the wilderness.</p>\n            </div>\n            \n            <div className=\"group bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl p-8 text-center hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-3\">\n              <div className=\"text-6xl mb-4 group-hover:scale-110 transition-transform duration-300\">‚ùÑÔ∏è</div>\n              <h3 className=\"text-xl font-bold text-forest-800 mb-3\">Arctic Adventures</h3>\n              <p className=\"text-forest-600 text-sm leading-relaxed\">Venture into the pristine Arctic wilderness and experience life at the edge of the world.</p>\n            </div>\n            \n            <div className=\"group bg-gradient-to-br from-green-100 to-green-200 rounded-2xl p-8 text-center hover:shadow-2xl transition-all duration-500 transform hover"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": ":-translate-y-3\">\n              <div className=\"text-6xl mb-4 group-hover:scale-110 transition-transform duration-300\">üåø</div>\n              <h3 className=\"text-xl font-bold text-forest-800 mb-3\">Wildlife Safaris</h3>\n              <p className=\"text-forest-600 text-sm leading-relaxed\">Observe magnificent wildlife in their natural habitats across protected wilderness areas.</p>\n            </div>\n            \n            <div className=\"group bg-gradient-to-br from-pink-100 to-pink-200 rounded-2xl p-8 text-center hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-3\">\n              <div className=\"text-6xl mb-4 group-hover:scale-110 transition-transform duration-300\">üå∏</div>\n              <h3 className=\"text-xl font-bold text-forest-800 mb-3\">Botanical Expeditions</h3>\n              <p className=\"text-forest-600 text-sm leading-relaxed\">Discover rare plants, ancient trees, and botanical wonders in remote natural gardens.</p>\n            </div>\n          </div>"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "</div>\n      </section>\n\n      {/* About Section */}\n      <section className=\"py-20 bg-gradient-to-br from-forest-50 to-nature-50 relative\">\n        <div className=\"absolute inset-0 opacity-5\">\n          <div className=\"absolute top-10 left-10 text-9xl text-forest-600\">üå≤</div>\n          <div className=\"absolute top-20 right-20 text-7xl text-blue-600\">üåø</div>\n          <div className=\"absolute bottom-10 left-1/4 text-8xl text-forest-500\">üçÉ</div>\n        </div>\n        \n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl md:text-5xl font-bold text-forest-800 mb-6\">\n              Why Choose \n              <span className=\"text-blue-600\">Trekk Tribe?</span>\n            </h2>\n            <p className=\"text-xl text-forest-600 max-w-3xl mx-auto leading-relaxed\">\n              Experience sustainable travel like never before with our eco-conscious community platform\n            </p"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": ">\n          </div>\n          \n          <div className=\"grid md:grid-cols-3 gap-10\">\n            <div className=\"group text-center hover:transform hover:scale-105 transition-all duration-300\">\n              <div className=\"w-20 h-20 bg-gradient-to-br from-forest-400 to-forest-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-shadow\">\n                <span className=\"text-3xl text-white\">üåç</span>\n              </div>\n              <h3 className=\"text-2xl font-bold mb-4 text-forest-800\">Eco-Friendly Adventures</h3>\n              <p className=\"text-forest-600 leading-relaxed\">\n                Discover breathtaking destinations while supporting conservation efforts and sustainable tourism practices\n              </p>\n            </div>\n            \n            <div className=\"group text-center hover:transform hover:scale-105 transition-all duration-300\">\n              <div className=\"w-20 h-20 bg-gradient-to-br from-nature-400 to-blue"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-shadow\">\n                <span className=\"text-3xl text-white\">üë•</span>\n              </div>\n              <h3 className=\"text-2xl font-bold mb-4 text-forest-800\">Nature-Loving Community</h3>\n              <p className=\"text-forest-600 leading-relaxed\">\n                Connect with passionate eco-adventurers, conservationists, and nature enthusiasts from around the globe\n              </p>\n            </div>\n            \n            <div className=\"group text-center hover:transform hover:scale-105 transition-all duration-300\">\n              <div className=\"w-20 h-20 bg-gradient-to-br from-earth-400 to-earth-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-shadow\">\n                <span className=\"text-3xl text-white\">üå±</span>\n              </div>\n              <h3 className=\"text-2xl font-bold mb-4 text-forest-800\">Carbon-Co"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "nscious Travel</h3>\n              <p className=\"text-forest-600 leading-relaxed\">\n                Offset your carbon footprint, support local communities, and make every adventure count for the planet\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* How It Works Section */}\n      <section className=\"py-20 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl md:text-5xl font-bold text-forest-800 mb-6\">\n              How \n              <span className=\"text-blue-600\">Adventure</span>\n              <span className=\"text-forest-700\"> Works</span>\n            </h2>\n            <p className=\"text-xl text-forest-600 max-w-3xl mx-auto leading-relaxed\">\n              Join thousands of nature lovers in just 4 simple steps. Your next wilderness adventure is closer than you think!\n            </p>\n          </div>\n          \n          <div classN"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "ame=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            <div className=\"text-center group\">\n              <div className=\"relative mb-6\">\n                <div className=\"w-20 h-20 bg-gradient-to-br from-forest-500 to-blue-500 rounded-full flex items-center justify-center mx-auto shadow-lg group-hover:shadow-xl transition-all duration-300 transform group-hover:scale-110\">\n                  <span className=\"text-3xl text-white\">üë§</span>\n                </div>\n                <div className=\"absolute -top-2 -right-2 w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center text-white font-bold text-sm\">1</div>\n              </div>\n              <h3 className=\"text-xl font-bold text-forest-800 mb-3\">Create Account</h3>\n              <p className=\"text-forest-600 leading-relaxed\">Sign up in seconds and choose whether you want to explore adventures or organize your own expeditions.</p>\n            </div>\n            \n            <div className=\"text-center group\">\n              <"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "div className=\"relative mb-6\">\n                <div className=\"w-20 h-20 bg-gradient-to-br from-forest-500 to-blue-500 rounded-full flex items-center justify-center mx-auto shadow-lg group-hover:shadow-xl transition-all duration-300 transform group-hover:scale-110\">\n                  <span className=\"text-3xl text-white\">üîç</span>\n                </div>\n                <div className=\"absolute -top-2 -right-2 w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center text-white font-bold text-sm\">2</div>\n              </div>\n              <h3 className=\"text-xl font-bold text-forest-800 mb-3\">Find Adventure</h3>\n              <p className=\"text-forest-600 leading-relaxed\">Browse through hundreds of curated wilderness experiences. Filter by location, difficulty, and adventure type.</p>\n            </div>\n            \n            <div className=\"text-center group\">\n              <div className=\"relative mb-6\">\n                <div className=\"w-20 h-20 bg-gradient-to-br from-forest-"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "500 to-blue-500 rounded-full flex items-center justify-center mx-auto shadow-lg group-hover:shadow-xl transition-all duration-300 transform group-hover:scale-110\">\n                  <span className=\"text-3xl text-white\">ü§ù</span>\n                </div>\n                <div className=\"absolute -top-2 -right-2 w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center text-white font-bold text-sm\">3</div>\n              </div>\n              <h3 className=\"text-xl font-bold text-forest-800 mb-3\">Join & Connect</h3>\n              <p className=\"text-forest-600 leading-relaxed\">Book your spot and connect with fellow adventurers. Share excitement and plan together before the journey.</p>\n            </div>\n            \n            <div className=\"text-center group\">\n              <div className=\"relative mb-6\">\n                <div className=\"w-20 h-20 bg-gradient-to-br from-forest-500 to-blue-500 rounded-full flex items-center justify-center mx-auto shadow-lg group-hover:shadow-xl trans"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "ition-all duration-300 transform group-hover:scale-110\">\n                  <span className=\"text-3xl text-white\">üèïÔ∏è</span>\n                </div>\n                <div className=\"absolute -top-2 -right-2 w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center text-white font-bold text-sm\">4</div>\n              </div>\n              <h3 className=\"text-xl font-bold text-forest-800 mb-3\">Experience Magic</h3>\n              <p className=\"text-forest-600 leading-relaxed\">Embark on your wilderness adventure, create lasting memories, and form friendships that last a lifetime.</p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n\n      {/* Featured Trips Section */}\n      <section className=\"py-20 bg-white relative overflow-hidden\">\n        <div className=\"absolute inset-0 bg-gradient-to-br from-nature-50/30 to-forest-50/30\"></div>\n        \n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10\">\n          <div className=\"text-center mb-16\">"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "<h2 className=\"text-4xl md:text-5xl font-bold text-forest-800 mb-6\">\n              Epic \n              <span className=\"text-blue-600\">Adventures</span>\n              <span className=\"text-forest-700\"> Await</span>\n            </h2>\n            <p className=\"text-xl text-forest-600 max-w-2xl mx-auto leading-relaxed\">\n              Embark on extraordinary journeys that will connect you with nature and fellow adventurers\n            </p>\n          </div>\n\n          {loading ? (\n            <div className=\"flex justify-center\">\n              <div className=\"animate-spin rounded-full h-16 w-16 border-4 border-forest-200 border-t-forest-600\"></div>\n            </div>\n          ) : (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {featuredTrips && featuredTrips.length > 0 ? featuredTrips.map((trip, index) => (\n                <div \n                  key={trip._id || index} \n                  className=\"group bg-white rounded-2xl shadow-lg over"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "flow-hidden hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2\"\n                  style={{animationDelay: `${index * 0.1}s`}}\n                >\n                  <div className=\"relative h-52 overflow-hidden\">\n                    {trip.images && trip.images.length > 0 ? (\n                      <>\n                        <img\n                          src={trip.images[0]}\n                          alt={trip.title}\n                          className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\"\n                          onError={(e) => {\n                            const target = e.target as HTMLImageElement;\n                            target.style.display = 'none';\n                            const fallback = target.parentElement?.querySelector('.fallback-bg') as HTMLElement;\n                            if (fallback) fallback.style.display = 'flex';\n                          }}\n                        />"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "<div className=\"absolute inset-0 bg-black/20\"></div>\n                      </>\n                    ) : null}\n                    <div className={`fallback-bg absolute inset-0 bg-gradient-to-br from-forest-400 to-blue-500 flex items-center justify-center ${trip.images && trip.images.length > 0 ? 'hidden' : 'flex'}`}>\n                      <div className=\"text-center text-white\">\n                        <div className=\"text-6xl mb-2\">\n                          {(trip.categories && trip.categories.includes('Mountain')) ? 'üèîÔ∏è' : \n                           (trip.categories && trip.categories.includes('Nature')) ? 'üå≤' : \n                           (trip.categories && trip.categories.includes('Beach')) ? 'üèñÔ∏è' : \n                           (trip.categories && trip.categories.includes('Cultural')) ? 'üèõÔ∏è' : \n                           (trip.categories && trip.categories.includes('Adventure')) ? 'üéí' : 'üåç'}\n                        </div>\n                        <p className=\"text-sm opacit"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "y-90 font-medium\">{trip.categories && trip.categories.length > 0 ? trip.categories[0] : 'Adventure'}</p>\n                      </div>\n                    </div>\n                    <div className=\"absolute top-4 right-4\">\n                      <div className=\"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1 text-forest-800 text-sm font-semibold shadow-lg\">\n                        ‚Çπ{trip.price.toLocaleString()}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"p-6\">\n                    <h3 className=\"text-xl font-bold mb-3 text-forest-800 group-hover:text-blue-600 transition-colors\">\n                      {trip.title}\n                    </h3>\n                    <p className=\"text-forest-600 mb-4 line-clamp-2 leading-relaxed\">\n                      {trip.description}\n                    </p>\n                    \n                    <div className=\"space-y-2 mb-4\">\n                      <div className"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "=\"flex items-center text-forest-500\">\n                        <span className=\"mr-2\">üìç</span>\n                        <span className=\"text-sm font-medium\">{trip.destination}</span>\n                      </div>\n                      <div className=\"flex items-center text-forest-500\">\n                        <span className=\"mr-2\">üë•</span>\n                        <span className=\"text-sm\">{trip.participants.length}/{trip.capacity} adventurers</span>\n                        <div className=\"flex-1\"></div>\n                        <div className=\"w-16 bg-forest-100 rounded-full h-2\">\n                          <div \n                            className=\"bg-blue-500 h-2 rounded-full transition-all duration-500\"\n                            style={{width: `${(trip.participants.length / trip.capacity) * 100}%`}}\n                          ></div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center text-forest-500\">"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "<span className=\"mr-2\">üìÖ</span>\n                        <span className=\"text-sm\">{new Date(trip.startDate).toLocaleDateString()}</span>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex flex-wrap gap-2 mb-4\">\n                      {trip.categories && trip.categories.length > 0 ? trip.categories.map((category, catIndex) => (\n                        <span key={catIndex} className=\"px-2 py-1 bg-forest-100 text-forest-700 text-xs rounded-full font-medium\">\n                          {category}\n                        </span>\n                      )) : (\n                        <span className=\"px-2 py-1 bg-forest-100 text-forest-700 text-xs rounded-full font-medium\">\n                          Adventure\n                        </span>\n                      )}\n                    </div>\n                    \n                    <button className=\"w-full bg-gradient-to-r from-forest-600 to-blue-600 hover:from-forest-700"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "hover:to-blue-700 text-white py-3 rounded-xl font-semibold transition-all duration-300 transform group-hover:scale-105\">\n                      Join Adventure üåø\n                    </button>\n                  </div>\n                </div>\n              )) : (\n                <div className=\"col-span-full text-center py-12\">\n                  <div className=\"text-6xl mb-4 text-forest-300\">üå≤</div>\n                  <h3 className=\"text-xl font-semibold text-forest-600 mb-2\">No Adventures Yet</h3>\n                  <p className=\"text-forest-500\">New adventures are being planned. Check back soon!</p>\n                </div>\n              )}\n            </div>\n          )}\n\n          <div className=\"text-center mt-16\">\n            <Link\n              to=\"/trips\"\n              className=\"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-forest-600 hover:from-blue-700 hover:to-forest-700 text-white px-10 py-4 rounded-full text-lg font-bold transition-all duration-300 transform ho"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "ver:scale-105 shadow-lg hover:shadow-xl\"\n            >\n              <span>üå≤</span>\n              Discover All Adventures\n              <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n              </svg>\n            </Link>\n          </div>\n        </div>\n      </section>\n\n      {/* AI-Powered Features Section */}\n      <section className=\"py-20 bg-gradient-to-br from-purple-50 to-blue-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl md:text-5xl font-bold text-gray-800 mb-6\">\n              ü§ñ AI-Powered \n              <span className=\"text-purple-600\">Travel Intelligence</span>\n            </h2>\n            <p className=\"text-xl text-gray-600 max-w-3xl mx-auto leadin"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "g-relaxed\">\n              Experience the future of travel planning with our advanced AI features\n            </p>\n          </div>\n          \n          <div className=\"grid lg:grid-cols-2 gap-12\">\n            {/* AI Recommendations */}\n            <div className=\"space-y-6\">\n              <AIRecommendations className=\"w-full\" maxRecommendations={3} />\n            </div>\n            \n            {/* AI Analytics */}\n            <div className=\"space-y-6\">\n              <AIAnalyticsDashboard className=\"w-full\" compact={true} />\n            </div>\n          </div>\n          \n          <div className=\"text-center mt-12\">\n            <Link\n              to=\"/ai-showcase\"\n              className=\"inline-flex items-center gap-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-8 py-3 rounded-full text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg\"\n            >\n              <span>üöÄ</span>\n              Explor"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "e All AI Features\n              <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n              </svg>\n            </Link>\n          </div>\n        </div>\n      </section>\n\n\n      {/* Safety & Sustainability Section */}\n      <section className=\"py-20 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl md:text-5xl font-bold text-forest-800 mb-6\">\n              Safety First, \n              <span className=\"text-blue-600\">Planet Always</span>\n            </h2>\n            <p className=\"text-xl text-forest-600 max-w-3xl mx-auto leading-relaxed\">\n              We're committed to responsible adventure tourism that protects both our adventurers and the precious wilderness"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "we explore\n            </p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 gap-12 items-center\">\n            <div>\n              <div className=\"space-y-8\">\n                <div className=\"flex items-start\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-forest-500 to-blue-500 rounded-full flex items-center justify-center mr-4 flex-shrink-0\">\n                    <span className=\"text-white text-xl\">üõ°Ô∏è</span>\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-bold text-forest-800 mb-2\">Certified Safety Protocols</h3>\n                    <p className=\"text-forest-600 leading-relaxed\">All our guides are certified wilderness professionals with first aid training. We maintain the highest safety standards and carry emergency equipment on every expedition.</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start\">\n                  <div cla"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "ssName=\"w-12 h-12 bg-gradient-to-br from-forest-500 to-blue-500 rounded-full flex items-center justify-center mr-4 flex-shrink-0\">\n                    <span className=\"text-white text-xl\">üå±</span>\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-bold text-forest-800 mb-2\">Carbon Neutral Adventures</h3>\n                    <p className=\"text-forest-600 leading-relaxed\">We offset 100% of our carbon footprint through verified reforestation projects. Every adventure contributes to protecting the wilderness we love to explore.</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-forest-500 to-blue-500 rounded-full flex items-center justify-center mr-4 flex-shrink-0\">\n                    <span className=\"text-white text-xl\">üåç</span>\n                  </div>\n                  <div>\n                    <h3 classNam"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "e=\"text-xl font-bold text-forest-800 mb-2\">Local Community Support</h3>\n                    <p className=\"text-forest-600 leading-relaxed\">We partner with local communities and indigenous guides, ensuring tourism benefits the people who call these wilderness areas home.</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-forest-500 to-blue-500 rounded-full flex items-center justify-center mr-4 flex-shrink-0\">\n                    <span className=\"text-white text-xl\">üêæ</span>\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-bold text-forest-800 mb-2\">Wildlife Protection</h3>\n                    <p className=\"text-forest-600 leading-relaxed\">We follow strict Leave No Trace principles and contribute to wildlife conservation efforts. Our presence helps fund protection of endangered species and habitats.</p>"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "</div>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"text-center\">\n              <p className=\"text-lg text-forest-600\">\n                Our commitment to sustainable adventure travel ensures every journey contributes positively to conservation and local communities.\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Equipment & Preparation Section */}\n      <section className=\"py-20 bg-gradient-to-br from-forest-50 to-nature-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl md:text-5xl font-bold text-forest-800 mb-6\">\n              Gear Up for \n              <span className=\"text-blue-600\">Adventure</span>\n            </h2>\n            <p className=\"text-xl text-forest-600 max-w-3xl mx-auto leading-relaxed\">\n              We provide all essential equipment and guide"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "you through preparation for your wilderness experience\n            </p>\n          </div>\n          \n          <div className=\"grid lg:grid-cols-3 gap-12\">\n            <div className=\"bg-white rounded-2xl p-8 shadow-lg\">\n              <div className=\"text-center mb-6\">\n                <div className=\"w-16 h-16 bg-gradient-to-br from-forest-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <span className=\"text-white text-2xl\">üéí</span>\n                </div>\n                <h3 className=\"text-2xl font-bold text-forest-800\">Essential Gear Provided</h3>\n              </div>\n              <ul className=\"space-y-3 text-forest-600\">\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Professional hiking backpacks</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Weather-appropriate clothing</li>\n                <li className=\"flex items-center\"><span c"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "lassName=\"mr-3 text-nature-500\">‚úì</span>High-quality camping equipment</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Navigation and safety gear</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>First aid and emergency supplies</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Cooking and water purification</li>\n              </ul>\n            </div>\n            \n            <div className=\"bg-white rounded-2xl p-8 shadow-lg\">\n              <div className=\"text-center mb-6\">\n                <div className=\"w-16 h-16 bg-gradient-to-br from-earth-500 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <span className=\"text-white text-2xl\">üìö</span>\n                </div>\n                <h3 className=\"text-2xl font-bold text-forest-800\">Pre-Trip Preparation</h3>\n              </div>"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "<ul className=\"space-y-3 text-forest-600\">\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Detailed packing checklists</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Fitness preparation guides</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Weather and terrain briefings</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Cultural sensitivity training</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Emergency contact protocols</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Group introduction sessions</li>\n              </ul>\n            </div>\n            \n            <div className=\"bg-white rounded-2xl p-8 shadow-lg\">\n              <div className=\"text-center mb-6\">"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "<div className=\"w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <span className=\"text-white text-2xl\">üßó‚Äç‚ôÄÔ∏è</span>\n                </div>\n                <h3 className=\"text-2xl font-bold text-forest-800\">Expert Guidance</h3>\n              </div>\n              <ul className=\"space-y-3 text-forest-600\">\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Certified wilderness guides</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Local expert knowledge</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Wildlife identification training</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>Photography tips and techniques</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 t"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "ext-nature-500\">‚úì</span>Survival skills workshops</li>\n                <li className=\"flex items-center\"><span className=\"mr-3 text-nature-500\">‚úì</span>24/7 support during trips</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Call to Action Section */}\n      <section className=\"py-20 bg-gradient-to-br from-forest-800 to-nature-800 text-white relative overflow-hidden\">\n        <div className=\"absolute inset-0\">\n          <div className=\"absolute top-0 left-0 w-full h-full bg-black opacity-20\"></div>\n          <div className=\"absolute -top-10 -left-10 w-40 h-40 bg-blue-400 rounded-full opacity-10 animate-pulse\"></div>\n          <div className=\"absolute -bottom-10 -right-10 w-60 h-60 bg-forest-400 rounded-full opacity-10 animate-pulse\" style={{animationDelay: '2s'}}></div>\n        </div>\n        \n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10\">\n          <h2 className=\"text-4xl md:text-6xl fo"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "nt-bold mb-6\">\n            Your Next \n            <span className=\"text-blue-400\">Adventure</span>\n            <br />Starts Here\n          </h2>\n          <p className=\"text-xl md:text-2xl text-forest-100 mb-12 leading-relaxed\">\n            Join thousands of nature lovers who have discovered their wild side. \n            <br />Create memories that will last a lifetime in Earth's most beautiful places.\n          </p>\n          \n          <div className=\"flex flex-col sm:flex-row gap-6 justify-center\">\n            <Link\n              to=\"/register\"\n              className=\"group relative px-12 py-6 bg-blue-500 hover:bg-blue-600 text-white rounded-full text-xl font-bold transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-3xl\"\n            >\n              <span className=\"flex items-center justify-center gap-3\">\n                üå± Start Your Journey\n                <svg className=\"w-6 h-6 group-hover:translate-x-2 transition-transform\" fill=\"currentColor\" viewBox=\"0"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                </svg>\n              </span>\n            </Link>\n            \n            <Link\n              to=\"/trips\"\n              className=\"group px-12 py-6 border-2 border-forest-200 hover:bg-forest-200 hover:text-forest-900 text-forest-100 rounded-full text-xl font-bold transition-all duration-300 transform hover:scale-105 backdrop-blur-sm\"\n            >\n              <span className=\"flex items-center justify-center gap-3\">\n                üîç Explore Adventures\n              </span>\n            </Link>\n          </div>\n          \n          <div className=\"mt-16 grid md:grid-cols-3 gap-8 text-center\">\n            <div>\n              <div className=\"text-3xl font-bold text-blue-400 mb-2\">Join Today</div>\n              <div className=\"text-forest-200\">Start your firs"
  },
  {
    "source": "web\\src\\pages\\Home.tsx",
    "text": "t adventure</div>\n            </div>\n            <div>\n              <div className=\"text-3xl font-bold text-blue-400 mb-2\">Connect</div>\n              <div className=\"text-forest-200\">Meet fellow adventurers</div>\n            </div>\n            <div>\n              <div className=\"text-3xl font-bold text-blue-400 mb-2\">Explore</div>\n              <div className=\"text-forest-200\">Discover wild places</div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n};\n\nexport default Home;"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport GoogleLoginButton from '../components/GoogleLoginButton';\nimport { useToast, ToastContainer } from '../components/Toast';\n\ninterface LoginProps {\n  onLogin: (email: string, password?: string) => Promise<{ success: boolean; error?: string }>;\n}\n\nconst Login: React.FC<LoginProps> = ({ onLogin }) => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user } = useAuth();\n  const { toasts, success, error: showErrorToast, removeToast } = useToast();\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n  const [validationErrors, setValidationErrors] = useState<{\n    email?: string;\n    password?: string;\n  }>({});"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "// Redirect if already logged in\n  useEffect(() => {\n    if (user) {\n      navigate('/', { replace: true });\n    }\n  }, [user, navigate]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n    \n    // Clear validation error for this field when user starts typing\n    if (validationErrors[name as keyof typeof validationErrors]) {\n      setValidationErrors(prev => ({ ...prev, [name]: undefined }));\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const errors: typeof validationErrors = {};\n    \n    // Email validation\n    if (!formData.email) {\n      errors.email = 'Email is required';\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\n      errors.email = 'Please enter a valid email address';\n    }\n    \n    // Password validation\n    if (!formData.password) {\n      errors.password = 'Password is required';\n    } else if (formData.password."
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "length < 6) {\n      errors.password = 'Password must be at least 6 characters';\n    }\n    \n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Validate form before submitting\n    if (!validateForm()) {\n      return;\n    }\n    \n    setLoading(true);\n    // Clear the previous error only when the user presses the button again\n    setError('');\n\n    try {\n      const result = await onLogin(formData.email, formData.password);\n      if (result.success) {\n        // Clear error on successful login\n        setError('');\n        success('Welcome back! Redirecting...');\n        \n        // Small delay to show success toast before navigation\n        setTimeout(() => {\n          // Get the intended destination or default to home\n          const from = (location.state as any)?.from?.pathname || '/';\n          navigate(from, { replace: true });\n        }, 800);\n      } else if ("
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "result.error) {\n        setError(result.error);\n        showErrorToast(result.error);\n      }\n    } catch (error: any) {\n      const errorMsg = error.response?.data?.error || 'Login failed';\n      setError(errorMsg);\n      showErrorToast(errorMsg);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <ToastContainer toasts={toasts} onRemove={removeToast} />\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-forest-50 via-nature-50 to-forest-100 py-8 px-4 sm:px-6 lg:px-8 relative overflow-hidden\">\n      {/* Animated background elements */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute -top-40 -right-40 w-80 h-80 bg-nature-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob\"></div>\n        <div className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-forest-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "delay-2000\"></div>\n        <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-nature-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000\"></div>\n      </div>\n\n      <div className=\"max-w-md w-full space-y-6 sm:space-y-8 relative z-10\">\n        {/* Header Section */}\n        <div className=\"text-center animate-fade-in\">\n          <div className=\"mx-auto h-16 w-16 sm:h-20 sm:w-20 bg-gradient-to-br from-forest-600 via-nature-500 to-forest-700 rounded-2xl flex items-center justify-center shadow-2xl transform hover:scale-110 transition-transform duration-300\">\n            <span className=\"text-white font-bold text-2xl sm:text-3xl\">üå≤</span>\n          </div>\n          <h2 className=\"mt-6 sm:mt-8 text-center text-3xl sm:text-4xl font-extrabold text-forest-900\">\n            Welcome Back,\n            <br/>\n            <span className=\"bg-gradient-to-r from-forest-600 to-nature-600 bg-clip-text text-trans"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "parent\">\n              Adventurer!\n            </span>\n          </h2>\n          <p className=\"mt-3 text-center text-sm sm:text-base text-forest-600\">\n            New to the tribe?{' '}\n            <Link to=\"/register\" className=\"font-semibold text-nature-600 hover:text-nature-700 transition-colors underline decoration-2 underline-offset-2\">\n              Join our community\n            </Link>\n          </p>\n        </div>\n        \n        {/* Login Card */}\n        <div className=\"bg-white/95 backdrop-blur-md rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 border border-white/20 transform transition-all duration-300 hover:shadow-3xl\">\n          {/* Google Sign-In - only show if not logged in */}\n          {!user && (\n            <div className=\"space-y-4 mb-6\">\n              <GoogleLoginButton \n                className=\"w-full\"\n                onError={(msg) => {\n                  const errorMsg = msg || 'Google login failed';\n                  setError(errorMsg);\n                  showErr"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "orToast(errorMsg);\n                }}\n                onSuccess={() => {\n                  setError('');\n                  success('Successfully logged in with Google!');\n                  setTimeout(() => {\n                    const from = (location.state as any)?.from?.pathname || '/home';\n                    navigate(from, { replace: true });\n                  }, 800);\n                }}\n              />\n              <div className=\"flex items-center gap-3 my-6\">\n                <div className=\"h-px bg-gradient-to-r from-transparent via-forest-300 to-transparent flex-1\" />\n                <span className=\"text-forest-500 text-sm font-medium px-2\">or continue with email</span>\n                <div className=\"h-px bg-gradient-to-r from-transparent via-forest-300 to-transparent flex-1\" />\n              </div>\n            </div>\n          )}\n\n          <form className=\"space-y-5\" onSubmit={handleSubmit}>\n            {/* Error Display */}\n            {error && (\n              <div class"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "Name=\"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg flex items-start gap-3 animate-shake\">\n                <svg className=\"w-5 h-5 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                </svg>\n                <span className=\"text-sm font-medium flex-1\">{error}</span>\n              </div>\n            )}\n            \n            {/* Email Field */}\n            <div className=\"space-y-2\">\n              <label htmlFor=\"email\" className=\"block text-sm font-semibold text-forest-700\">\n                Email Address\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "events-none\">\n                  <svg className=\"w-5 h-5 text-forest-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207\" />\n                  </svg>\n                </div>\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  required\n                  value={formData.email}\n                  onChange={handleChange}\n                  className={`w-full pl-12 pr-4 py-3.5 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all duration-300 bg-white text-forest-900 placeholder-forest-400 ${\n                    validationErrors.email \n                      ? 'border-red-400 focus:ring-red-300 focus:border-red-500' \n                      : 'border-forest-200 fo"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "cus:ring-nature-500 focus:border-nature-500 hover:border-forest-300'\n                  }`}\n                  placeholder=\"you@example.com\"\n                />\n              </div>\n              {validationErrors.email && (\n                <p className=\"text-red-600 text-xs mt-1 ml-1 flex items-center gap-1\">\n                  <svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                  </svg>\n                  {validationErrors.email}\n                </p>\n              )}\n            </div>\n              \n            {/* Password Field */}\n            <div className=\"space-y-2\">\n              <label htmlFor=\"password\" className=\"block text-sm font-semibold text-forest-700\">\n                Password\n              </label>\n              <div className=\"relative\">\n                <div"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\n                  <svg className=\"w-5 h-5 text-forest-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                  </svg>\n                </div>\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type={showPassword ? 'text' : 'password'}\n                  autoComplete=\"current-password\"\n                  required\n                  value={formData.password}\n                  onChange={handleChange}\n                  className={`w-full pl-12 pr-12 py-3.5 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all duration-300 bg-white text-forest-900 placeholder-forest-400 ${\n                    validationErrors.password"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "? 'border-red-400 focus:ring-red-300 focus:border-red-500' \n                      : 'border-forest-200 focus:ring-nature-500 focus:border-nature-500 hover:border-forest-300'\n                  }`}\n                  placeholder=\"Enter your password\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute inset-y-0 right-0 pr-4 flex items-center text-forest-400 hover:text-forest-600 transition-colors\"\n                  aria-label={showPassword ? 'Hide password' : 'Show password'}\n                >\n                  {showPassword ? (\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.2"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "42M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.736m0 0L21 21\" />\n                    </svg>\n                  ) : (\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                    </svg>\n                  )}\n                </button>\n              </div>\n              {validationErrors.password && (\n                <p className=\"text-red-600 text-xs mt-1 ml-1 flex items-center gap-1\">\n                  <svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                  </svg>\n                  {validationErrors.password}\n                </p>\n              )}\n            </div>\n\n            {/* Forgot Password Link */}\n            <div className=\"flex items-center justify-end\">\n              <Link to=\"/forgot-password\" className=\"text-sm font-medium text-nature-600 hover:text-nature-700 transition-colors hover:underline\">\n                Forgot your password?\n              </Link>\n            </div>\n\n            {/* Submit Button */}\n            <div className=\"pt-2\">\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"group relative w-full flex justify-center items-center py-4 px-6 text-base font-bold rounded-xl text-white bg-gradient-to-r from-forest-600 via-nature-500 to-forest-600 bg-size-200 bg-pos-0 hover:bg-pos-100 fo"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "cus:outline-none focus:ring-4 focus:ring-nature-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-500 transform hover:scale-[1.02] active:scale-[0.98] shadow-xl hover:shadow-2xl overflow-hidden\"\n              >\n                <span className=\"absolute inset-0 bg-gradient-to-r from-forest-700 via-nature-600 to-forest-700 opacity-0 group-hover:opacity-100 transition-opacity duration-500\"></span>\n                {loading ? (\n                  <span className=\"relative flex items-center gap-3\">\n                    <div className=\"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent\"></div>\n                    <span>Entering the wilderness...</span>\n                  </span>\n                ) : (\n                  <span className=\"relative flex items-center gap-2\">\n                    <span>üèïÔ∏è</span>\n                    <span>Enter the Tribe</span>\n                    <svg className=\"w-5 h-5 group-hover:translate-x-1 transition-transform du"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "ration-300\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </span>\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n      \n      {/* Add custom animations via style tag */}\n      <style>{`\n        @keyframes blob {\n          0%, 100% { transform: translate(0, 0) scale(1); }\n          33% { transform: translate(30px, -50px) scale(1.1); }\n          66% { transform: translate(-20px, 20px) scale(0.9); }\n        }\n        .animate-blob {\n          animation: blob 7s infinite;\n        }\n        .animation-delay-2000 {\n          animation-delay: 2s;\n        }\n        .animation-delay-4000 {\n          animation-delay: 4s;\n        }\n        @keyframes shake {\n          0%, 100% { transform: t"
  },
  {
    "source": "web\\src\\pages\\Login.tsx",
    "text": "ranslateX(0); }\n          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }\n          20%, 40%, 60%, 80% { transform: translateX(5px); }\n        }\n        .animate-shake {\n          animation: shake 0.5s;\n        }\n        @keyframes fade-in {\n          from { opacity: 0; transform: translateY(-10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        .animate-fade-in {\n          animation: fade-in 0.6s ease-out;\n        }\n        .bg-size-200 {\n          background-size: 200% 200%;\n        }\n        .bg-pos-0 {\n          background-position: 0% 50%;\n        }\n        .bg-pos-100 {\n          background-position: 100% 50%;\n        }\n      `}</style>\n    </div>\n    </>\n  );\n};\n\nexport default Login;"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport api from '../config/api';\nimport PaymentUpload from '../components/PaymentUpload';\nimport BookingDetailsModal from '../components/BookingDetailsModal';\n\ninterface Booking {\n  bookingId: string;\n  tripId: string;\n  tripTitle: string;\n  destination: string;\n  startDate: string;\n  endDate: string;\n  coverImage?: string;\n  numberOfGuests: number;\n  totalAmount: number;\n  pricePerPerson: number;\n  selectedPackage?: string;\n  paymentType?: 'full' | 'advance';\n  advanceAmount?: number;\n  remainingAmount?: number;\n  currentPaymentAmount?: number;\n  bookingStatus: 'pending' | 'confirmed' | 'cancelled' | 'completed';\n  paymentStatus: 'pending' | 'partial' | 'completed' | 'failed' | 'refunded';\n  paymentVerificationStatus: 'pending' | 'verified' | 'rejected';\n  paymentScreenshotUploaded: boolean;\n  tripStatus: string;\n  createdAt: string;\n  organizer: {\n    id: string;\n    name: string;\n    phone: string;\n    email: string;\n  };\n}\n\nconst"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "MyBookings: React.FC = () => {\n  const [bookings, setBookings] = useState<Booking[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [selectedBookingForPayment, setSelectedBookingForPayment] = useState<Booking | null>(null);\n  const [selectedBookingForDetails, setSelectedBookingForDetails] = useState<Booking | null>(null);\n\n  useEffect(() => {\n    fetchBookings();\n  }, []);\n\n  const fetchBookings = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/bookings/my-bookings');\n      setBookings((response.data as any).bookings);\n    } catch (error: any) {\n      setError(error.response?.data?.error || 'Failed to fetch bookings');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusBadge = (booking: Booking) => {\n    if (booking.bookingStatus === 'confirmed') {\n      return (\n        <span className=\"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium\">\n          ‚úÖ Co"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "nfirmed\n        </span>\n      );\n    }\n    \n    if (booking.bookingStatus === 'pending') {\n      if (booking.paymentVerificationStatus === 'verified') {\n        return (\n          <span className=\"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium\">\n            ‚úÖ Payment Verified\n          </span>\n        );\n      } else if (booking.paymentVerificationStatus === 'rejected') {\n        return (\n          <span className=\"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium\">\n            ‚ùå Payment Rejected\n          </span>\n        );\n      } else if (booking.paymentScreenshotUploaded) {\n        return (\n          <span className=\"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\">\n            ‚è≥ Awaiting Verification\n          </span>\n        );\n      } else {\n        return (\n          <span className=\"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\">\n            üì§ {booking.paymentType === 'advance' ? 'Upload A"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "dvance Payment Required' : 'Upload Payment Required'}\n          </span>\n        );\n      }\n    }\n    \n    if (booking.bookingStatus === 'cancelled') {\n      return (\n        <span className=\"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-medium\">\n          ‚ùå Cancelled\n        </span>\n      );\n    }\n    \n    if (booking.bookingStatus === 'completed') {\n      return (\n        <span className=\"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\">\n          üéâ Completed\n        </span>\n      );\n    }\n\n    return null;\n  };\n\n  const canUploadPayment = (booking: Booking) => {\n    return booking.bookingStatus === 'pending' && \n           !booking.paymentScreenshotUploaded && \n           booking.paymentVerificationStatus === 'pending';\n  };\n\n  const handlePaymentUploadSuccess = () => {\n    setSelectedBookingForPayment(null);\n    fetchBookings(); // Refresh the bookings list\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br f"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "rom-forest-50 to-nature-50 py-8\">\n        <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-center py-12\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-nature-600\"></div>\n            <span className=\"ml-3 text-forest-800\">Loading your bookings...</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 py-8\">\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-forest-800 mb-2\">My Bookings</h1>\n          <p className=\"text-forest-600\">Manage your trip bookings and payments</p>\n        </div>\n\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6 flex items-center gap-2\">\n            <span className=\"text-xl\">‚ö†Ô∏è</span>\n            <span>{error}</spa"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "n>\n          </div>\n        )}\n\n        {bookings.length === 0 ? (\n          <div className=\"bg-white rounded-2xl shadow-lg p-8 text-center\">\n            <div className=\"text-6xl mb-4\">üéí</div>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-2\">No Bookings Yet</h2>\n            <p className=\"text-forest-600 mb-6\">\n              You haven't booked any trips yet. Start exploring amazing adventures!\n            </p>\n            <a\n              href=\"/\"\n              className=\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-forest-600 to-nature-600 text-white rounded-xl hover:from-forest-700 hover:to-nature-700 transition-all duration-300\"\n            >\n              Explore Trips\n            </a>\n          </div>\n        ) : (\n          <div className=\"grid gap-6\">\n            {bookings.map((booking) => (\n              <div key={booking.bookingId} className=\"bg-white rounded-2xl shadow-lg overflow-hidden\">\n                <div className=\"flex flex-col md:flex"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "-row\">\n                  {/* Trip Image */}\n                  <div className=\"md:w-64 h-48 md:h-auto\">\n                    {booking.coverImage ? (\n                      <img\n                        src={booking.coverImage}\n                        alt={booking.tripTitle}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-full bg-gradient-to-br from-forest-200 to-nature-200 flex items-center justify-center\">\n                        <span className=\"text-4xl\">üèîÔ∏è</span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Booking Details */}\n                  <div className=\"flex-1 p-6\">\n                    <div className=\"flex justify-between items-start mb-4\">\n                      <div>\n                        <h3 className=\"text-xl font-bold text-forest-800 mb-1\">\n                          {booking.tripTitle}"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "</h3>\n                        <p className=\"text-forest-600 mb-2\">üìç {booking.destination}</p>\n                        <p className=\"text-sm text-gray-600\">\n                          üìÖ {new Date(booking.startDate).toLocaleDateString()} - {new Date(booking.endDate).toLocaleDateString()}\n                        </p>\n                      </div>\n                      {getStatusBadge(booking)}\n                    </div>\n\n                    <div className=\"grid md:grid-cols-2 gap-4 mb-4\">\n                      <div>\n                        <p className=\"text-sm text-gray-600\">üë• Travelers</p>\n                        <p className=\"font-semibold text-forest-800\">{booking.numberOfGuests}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-gray-600\">üí∞ Total Amount</p>\n                        <p className=\"font-semibold text-nature-600 text-lg\">‚Çπ{booking.totalAmount.toLocaleString()}</p>\n                        {booking.paymentType ==="
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "'advance' && booking.advanceAmount && (\n                          <div className=\"text-xs text-gray-600 mt-1\">\n                            <p>Advance: ‚Çπ{booking.advanceAmount.toLocaleString()}</p>\n                            <p>Remaining: ‚Çπ{booking.remainingAmount?.toLocaleString()}</p>\n                          </div>\n                        )}\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-gray-600\">üì¶ Package</p>\n                        <p className=\"font-semibold text-forest-800\">{booking.selectedPackage || 'Standard'}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-gray-600\">üó∫Ô∏è Booked On</p>\n                        <p className=\"font-semibold text-forest-800\">{new Date(booking.createdAt).toLocaleDateString()}</p>\n                      </div>\n                    </div>\n\n                    {/* Organizer Info */}\n                    <div className=\"bg-forest-5"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "0 rounded-lg p-3 mb-4\">\n                      <p className=\"text-sm text-gray-600 mb-1\">üë®‚Äçüíº Trip Organizer</p>\n                      <p className=\"font-semibold text-forest-800\">{booking.organizer.name}</p>\n                      <p className=\"text-sm text-forest-600\">{booking.organizer.phone}</p>\n                    </div>\n\n                    {/* Action Buttons */}\n                    <div className=\"flex gap-3 flex-wrap\">\n                      <button\n                        onClick={() => setSelectedBookingForDetails(booking)}\n                        className=\"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 font-medium flex-1 min-w-[120px]\"\n                      >\n                        üìã View Details\n                      </button>\n                      \n                      {canUploadPayment(booking) && (\n                        <button\n                          onClick={() => setSe"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "lectedBookingForPayment(booking)}\n                          className=\"px-4 py-2 bg-gradient-to-r from-nature-600 to-forest-600 text-white rounded-lg hover:from-nature-700 hover:to-forest-700 transition-all duration-300 font-medium flex-1 min-w-[120px]\"\n                        >\n                          üì§ {booking.paymentType === 'advance' ? 'Upload Advance Payment' : 'Upload Payment'}\n                        </button>\n                      )}\n                      \n                      {booking.bookingStatus === 'pending' && booking.paymentScreenshotUploaded && (\n                        <div className=\"px-4 py-2 bg-blue-50 text-blue-800 rounded-lg text-center font-medium flex-1 min-w-[120px]\">\n                          ‚è≥ Payment Under Review\n                        </div>\n                      )}\n                      \n                      {booking.paymentVerificationStatus === 'rejected' && (\n                        <button\n                          onClick={() => setSelectedBooki"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "ngForPayment(booking)}\n                          className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium flex-1 min-w-[120px]\"\n                        >\n                          üîÑ Re-upload Payment\n                        </button>\n                      )}\n                      \n                      <a\n                        href={`/trips/${booking.tripId}`}\n                        className=\"px-4 py-2 border-2 border-forest-300 text-forest-700 rounded-lg hover:bg-forest-100 transition-colors font-medium flex-1 min-w-[120px] text-center\"\n                      >\n                        View Trip\n                      </a>\n                    </div>\n\n                    {/* Payment Rejection Notice */}\n                    {booking.paymentVerificationStatus === 'rejected' && (\n                      <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                        <p className=\"text-sm text-red-800\">"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "‚ùå Your payment was rejected. Please upload a clear payment screenshot to proceed.\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Payment Upload Modal */}\n      {selectedBookingForPayment && (\n        <PaymentUpload\n          bookingId={selectedBookingForPayment.bookingId}\n          totalAmount={selectedBookingForPayment.totalAmount}\n          organizerId={selectedBookingForPayment.organizer?.id || ''}\n          tripTitle={selectedBookingForPayment.tripTitle}\n          paymentType={selectedBookingForPayment.paymentType}\n          advanceAmount={selectedBookingForPayment.advanceAmount}\n          remainingAmount={selectedBookingForPayment.remainingAmount}\n          onUploadSuccess={handlePaymentUploadSuccess}\n          onCancel={() => setSelectedBookingForPayment(null)}\n        />\n      )}\n\n      {/* Booking"
  },
  {
    "source": "web\\src\\pages\\MyBookings.tsx",
    "text": "Details Modal */}\n      {selectedBookingForDetails && (\n        <BookingDetailsModal\n          bookingId={selectedBookingForDetails.bookingId}\n          onClose={() => setSelectedBookingForDetails(null)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default MyBookings;"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRM.tsx",
    "text": "import React from 'react';\nimport LeadsList from '../components/crm/LeadsList';\nimport TicketsView from '../components/crm/TicketsView';\nimport BillingHistory from '../components/crm/BillingHistory';\nimport UpdatePaymentMethod from '../components/crm/UpdatePaymentMethod';\nimport AutoPayToggle from '../components/crm/AutoPayToggle';\n\n/**\n * OrganizerCRM page\n * Aggregates CRM-related components for organizers: leads, tickets, billing,\n * payment update, and auto-pay toggle. This page should be mounted behind\n * the organizer/authenticated routes in the frontend router.\n */\nexport default function OrganizerCRM() {\n  return (\n    <div style={{ padding: 24 }}>\n      <h1>Organizer CRM</h1>\n      <div style={{ display: 'grid', gap: 20 }}>\n        <div>\n          <h2>Leads</h2>\n          <LeadsList />\n        </div>\n\n        <div>\n          <h2>Support Tickets</h2>\n          <TicketsView />\n        </div>\n\n        <div style={{ display: 'flex', gap: 20 }}>\n          <div style={{ flex: 1 }}>"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRM.tsx",
    "text": "<h2>Billing History</h2>\n            <BillingHistory />\n          </div>\n          <div style={{ width: 360 }}>\n            <h2>Payment Method</h2>\n            <UpdatePaymentMethod />\n            <AutoPayToggle />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport api from '../config/api';\nimport { User } from '../types';\nimport SubscriptionCard from '../components/crm/SubscriptionCard';\n\ninterface OrganizerCRMProps {\n  user: User;\n}\n\ninterface Analytics {\n  trips: { total: number; active: number; completed: number; verified: number };\n  leads: { total: number; contacted: number; converted: number; conversionRate: number };\n  revenue: { total: number; thisMonth: number; lastMonth: number };\n  performance: { averageRating: number; totalReviews: number; responseTime: string };\n}\n\ninterface Lead {\n  _id: string;\n  tripId: { _id: string; title: string };\n  travelerId: { name: string; email: string; phone?: string };\n  status: string;\n  message: string;\n  createdAt: string;\n}\n\ninterface Ticket {\n  _id: string;\n  subject: string;\n  status: string;\n  priority: string;\n  createdAt: string;\n  lastUpdated: string;\n}\n\nconst OrganizerCRMDashboard: React.FC<OrganizerCRMProps> = ({ user }) => {\n  cons"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "t [activeTab, setActiveTab] = useState('overview');\n  const [analytics, setAnalytics] = useState<Analytics | null>(null);\n  const [leads, setLeads] = useState<Lead[]>([]);\n  const [tickets, setTickets] = useState<Ticket[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showUpgradeModal, setShowUpgradeModal] = useState(false);\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, [activeTab]);\n\n  const fetchDashboardData = async () => {\n    setLoading(true);\n    try {\n      if (activeTab === 'overview' || activeTab === 'analytics') {\n        const response = await api.get('/analytics/dashboard');\n        setAnalytics(response.data);\n      }\n      if (activeTab === 'leads') {\n        const response = await api.get('/leads');\n        setLeads(response.data.leads || []);\n      }\n      if (activeTab === 'tickets') {\n        const response = await api.get('/tickets');\n        setTickets(response.data.tickets || []);\n      }\n    } catch (error) {\n      console.error('Error fetchi"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "ng dashboard data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const tabs = [\n    { id: 'overview', name: 'Overview', icon: 'üìä' },\n    { id: 'analytics', name: 'Analytics', icon: 'üìà' },\n    { id: 'subscription', name: 'Subscription', icon: 'üí≥' },\n    { id: 'leads', name: 'Leads', icon: 'üéØ' },\n    { id: 'tickets', name: 'Support', icon: 'üé´' },\n    { id: 'payments', name: 'Payments', icon: 'üí∞' },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-20\">\n            <div>\n              <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\n                üè¢ Organizer CRM\n              </h1>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                Welcome back,"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "<span className=\"font-semibold\">{user.name}</span>\n              </p>\n            </div>\n            <button\n              onClick={() => setShowUpgradeModal(true)}\n              className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all shadow-md\"\n            >\n              üëë Upgrade to Premium\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Navigation Tabs */}\n      <div className=\"bg-white border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex space-x-8 overflow-x-auto\">\n            {tabs.map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`flex items-center gap-2 py-4 px-2 border-b-2 font-medium text-sm whitespace-nowrap transition-all ${\n                  activeTab === tab.id\n                    ? 'border-blue-"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                <span>{tab.icon}</span>\n                {tab.name}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {activeTab === 'overview' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            {/* Subscription Card */}\n            <div className=\"lg:col-span-1\">\n              <SubscriptionCard onUpgrade={() => setShowUpgradeModal(true)} />\n            </div>\n\n            {/* Quick Stats */}\n            <div className=\"lg:col-span-2 grid grid-cols-2 gap-4\">\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-gray-600\">Act"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "ive Trips</p>\n                    <p className=\"text-3xl font-bold text-blue-600 mt-1\">\n                      {analytics?.trips.active || 0}\n                    </p>\n                  </div>\n                  <div className=\"p-4 bg-blue-100 rounded-full\">\n                    <span className=\"text-3xl\">üó∫Ô∏è</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-gray-600\">Total Leads</p>\n                    <p className=\"text-3xl font-bold text-green-600 mt-1\">\n                      {analytics?.leads.total || 0}\n                    </p>\n                  </div>\n                  <div className=\"p-4 bg-green-100 rounded-full\">\n                    <span className=\"text-3xl\">üéØ</span>\n                  </div>\n                </div>\n              </div>\n\n              <di"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "v className=\"bg-white rounded-xl shadow-lg p-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-gray-600\">This Month Revenue</p>\n                    <p className=\"text-3xl font-bold text-purple-600 mt-1\">\n                      ‚Çπ{(analytics?.revenue.thisMonth || 0).toLocaleString()}\n                    </p>\n                  </div>\n                  <div className=\"p-4 bg-purple-100 rounded-full\">\n                    <span className=\"text-3xl\">üí∞</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-gray-600\">Conversion Rate</p>\n                    <p className=\"text-3xl font-bold text-orange-600 mt-1\">\n                      {analytics?.leads.conversionRate?.toFixed(1) || 0"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "}%\n                    </p>\n                  </div>\n                  <div className=\"p-4 bg-orange-100 rounded-full\">\n                    <span className=\"text-3xl\">üìä</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Recent Activity */}\n            <div className=\"lg:col-span-3 bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-bold text-gray-900 mb-4\">üìã Recent Activity</h3>\n              <div className=\"space-y-3\">\n                {[1, 2, 3].map((_, i) => (\n                  <div key={i} className=\"flex items-center gap-4 p-3 bg-gray-50 rounded-lg\">\n                    <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm font-medium text-gray-900\">New lead inquiry</p>\n                      <p className=\"text-xs text-gray-500\">{i + 1} hours ago</p>\n                    </div>\n                  </div>"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "))}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'analytics' && (\n          <div className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <p className=\"text-sm text-gray-600\">Total Trips</p>\n                <p className=\"text-3xl font-bold text-gray-900 mt-2\">\n                  {analytics?.trips.total || 0}\n                </p>\n                <p className=\"text-xs text-green-600 mt-1\">‚Üë 12% from last month</p>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <p className=\"text-sm text-gray-600\">Verified Trips</p>\n                <p className=\"text-3xl font-bold text-green-600 mt-2\">\n                  {analytics?.trips.verified || 0}\n                </p>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  {((analytics?.trips.verified ||"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "0) / (analytics?.trips.total || 1) * 100).toFixed(0)}% verified\n                </p>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <p className=\"text-sm text-gray-600\">Lead Conversion</p>\n                <p className=\"text-3xl font-bold text-blue-600 mt-2\">\n                  {analytics?.leads.conversionRate?.toFixed(1) || 0}%\n                </p>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  {analytics?.leads.converted || 0} of {analytics?.leads.total || 0} leads\n                </p>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-lg p-6\">\n                <p className=\"text-sm text-gray-600\">Average Rating</p>\n                <p className=\"text-3xl font-bold text-amber-600 mt-2\">\n                  {analytics?.performance.averageRating?.toFixed(1) || 0}‚≠ê\n                </p>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  {analytics?.perfo"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "rmance.totalReviews || 0} reviews\n                </p>\n              </div>\n            </div>\n\n            {/* Revenue Chart Placeholder */}\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-bold text-gray-900 mb-4\">üìà Revenue Trend</h3>\n              <div className=\"h-64 flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg\">\n                <p className=\"text-gray-500\">Revenue chart coming soon...</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'subscription' && (\n          <div className=\"max-w-4xl mx-auto\">\n            <SubscriptionCard onUpgrade={() => setShowUpgradeModal(true)} />\n\n            {/* Subscription Plans */}\n            <div className=\"mt-8 grid md:grid-cols-2 gap-6\">\n              <div className=\"bg-white rounded-xl shadow-lg p-6 border-2 border-gray-200\">\n                <h3 className=\"text-xl font-bold text-gray-900 mb-2\">üì¶ Basic"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "Plan</h3>\n                <p className=\"text-3xl font-bold text-gray-900 mb-4\">‚Çπ1,499<span className=\"text-sm text-gray-500\">/60 days</span></p>\n                <ul className=\"space-y-2 mb-6\">\n                  <li className=\"flex items-center gap-2 text-sm\">\n                    <span className=\"text-green-500\">‚úì</span>\n                    <span>5 Trip Posts</span>\n                  </li>\n                  <li className=\"flex items-center gap-2 text-sm\">\n                    <span className=\"text-green-500\">‚úì</span>\n                    <span>Basic Analytics</span>\n                  </li>\n                  <li className=\"flex items-center gap-2 text-sm\">\n                    <span className=\"text-green-500\">‚úì</span>\n                    <span>Email Support</span>\n                  </li>\n                </ul>\n                <button className=\"w-full bg-gray-600 text-white py-2 rounded-lg font-semibold\">\n                  Current Plan\n                </button>\n              </div>"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "<div className=\"bg-gradient-to-br from-amber-50 to-yellow-50 rounded-xl shadow-lg p-6 border-2 border-amber-300\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <h3 className=\"text-xl font-bold text-gray-900\">üëë Premium Plan</h3>\n                  <span className=\"px-2 py-1 bg-amber-200 text-amber-800 text-xs font-bold rounded\">RECOMMENDED</span>\n                </div>\n                <p className=\"text-3xl font-bold text-gray-900 mb-4\">‚Çπ2,100<span className=\"text-sm text-gray-500\">/60 days</span></p>\n                <ul className=\"space-y-2 mb-6\">\n                  <li className=\"flex items-center gap-2 text-sm\">\n                    <span className=\"text-amber-600\">‚úì</span>\n                    <span>10 Trip Posts</span>\n                  </li>\n                  <li className=\"flex items-center gap-2 text-sm\">\n                    <span className=\"text-amber-600\">‚úì</span>\n                    <span>Full CRM Access</span>"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "</li>\n                  <li className=\"flex items-center gap-2 text-sm\">\n                    <span className=\"text-amber-600\">‚úì</span>\n                    <span>AI Tools & Insights</span>\n                  </li>\n                  <li className=\"flex items-center gap-2 text-sm\">\n                    <span className=\"text-amber-600\">‚úì</span>\n                    <span>Priority Support</span>\n                  </li>\n                  <li className=\"flex items-center gap-2 text-sm\">\n                    <span className=\"text-amber-600\">‚úì</span>\n                    <span>Advanced Analytics</span>\n                  </li>\n                </ul>\n                <button \n                  onClick={() => setShowUpgradeModal(true)}\n                  className=\"w-full bg-gradient-to-r from-amber-600 to-yellow-600 text-white py-2 rounded-lg font-semibold hover:from-amber-700 hover:to-yellow-700 transition-all\"\n                >\n                  Upgrade Now\n                </button>\n              </di"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "v>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'leads' && (\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">üéØ Lead Management</h3>\n              <select className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\">\n                <option>All Leads</option>\n                <option>New</option>\n                <option>Contacted</option>\n                <option>Converted</option>\n              </select>\n            </div>\n\n            {loading ? (\n              <div className=\"text-center py-12\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n              </div>\n            ) : leads.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <span className=\"text-4xl\">üì≠</span>\n                <p className=\"text-gray-500 mt-4\">No l"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "eads yet</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {leads.map((lead) => (\n                  <div key={lead._id} className=\"p-4 bg-gray-50 rounded-lg border border-gray-200\">\n                    <div className=\"flex items-start justify-between mb-2\">\n                      <div>\n                        <p className=\"font-semibold text-gray-900\">{lead.travelerId.name}</p>\n                        <p className=\"text-sm text-gray-600\">{lead.tripId.title}</p>\n                      </div>\n                      <span className={`px-2 py-1 text-xs font-semibold rounded-full ${\n                        lead.status === 'new' ? 'bg-blue-100 text-blue-800' :\n                        lead.status === 'contacted' ? 'bg-yellow-100 text-yellow-800' :\n                        'bg-green-100 text-green-800'\n                      }`}>\n                        {lead.status.toUpperCase()}\n                      </span>\n                    </div>"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "<p className=\"text-sm text-gray-700 mb-2\">{lead.message}</p>\n                    <div className=\"flex items-center justify-between text-xs text-gray-500\">\n                      <span>üìß {lead.travelerId.email}</span>\n                      <span>{new Date(lead.createdAt).toLocaleDateString()}</span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'tickets' && (\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">üé´ Support Tickets</h3>\n              <button className=\"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-blue-700\">\n                New Ticket\n              </button>\n            </div>\n\n            {loading ? (\n              <div className=\"text-center py-12\">\n                <div className=\"anim"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "ate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n              </div>\n            ) : tickets.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <span className=\"text-4xl\">üé´</span>\n                <p className=\"text-gray-500 mt-4\">No support tickets</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {tickets.map((ticket) => (\n                  <div key={ticket._id} className=\"p-4 bg-gray-50 rounded-lg border border-gray-200\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <p className=\"font-semibold text-gray-900\">{ticket.subject}</p>\n                        <p className=\"text-xs text-gray-500 mt-1\">\n                          Created: {new Date(ticket.createdAt).toLocaleString()}\n                        </p>\n                      </div>\n                      <div className=\"flex gap-2\">"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "<span className={`px-2 py-1 text-xs font-semibold rounded-full ${\n                          ticket.priority === 'high' ? 'bg-red-100 text-red-800' :\n                          ticket.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' :\n                          'bg-green-100 text-green-800'\n                        }`}>\n                          {ticket.priority}\n                        </span>\n                        <span className={`px-2 py-1 text-xs font-semibold rounded-full ${\n                          ticket.status === 'open' ? 'bg-blue-100 text-blue-800' :\n                          ticket.status === 'in_progress' ? 'bg-purple-100 text-purple-800' :\n                          'bg-gray-100 text-gray-800'\n                        }`}>\n                          {ticket.status}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": ">\n        )}\n\n        {activeTab === 'payments' && (\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <h3 className=\"text-xl font-bold text-gray-900 mb-6\">üí∞ Payment History</h3>\n            <div className=\"text-center py-12\">\n              <span className=\"text-4xl\">üí≥</span>\n              <p className=\"text-gray-500 mt-4\">Payment history coming soon...</p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Upgrade Modal */}\n      {showUpgradeModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl p-8 max-w-md w-full\">\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">üëë Upgrade to Premium</h3>\n            <p className=\"text-gray-600 mb-6\">\n              Get access to advanced CRM features, AI insights, and priority support.\n            </p>\n            <div className=\"space-y-4 mb-6\">\n              <p className=\"text-3xl"
  },
  {
    "source": "web\\src\\pages\\OrganizerCRMDashboard.tsx",
    "text": "font-bold text-gray-900\">‚Çπ2,100<span className=\"text-sm text-gray-500\">/60 days</span></p>\n            </div>\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setShowUpgradeModal(false)}\n                className=\"flex-1 bg-gray-200 text-gray-800 py-3 rounded-lg font-semibold hover:bg-gray-300\"\n              >\n                Cancel\n              </button>\n              <button className=\"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700\">\n                Upgrade Now\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default OrganizerCRMDashboard;"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { io, Socket } from 'socket.io-client';\nimport api from '../config/api';\nimport { User } from '../types';\n\ninterface TripSummary {\n  _id: string;\n  title: string;\n  destination: string;\n  startDate: string;\n  endDate: string;\n  participants: string[];\n  capacity: number;\n  price: number;\n  status: 'active' | 'cancelled' | 'completed';\n  pendingVerifications: number;\n}\n\ninterface BookingVerification {\n  _id: string;\n  tripId: string;\n  tripTitle: string;\n  travelerName: string;\n  travelerEmail: string;\n  numberOfGuests: number;\n  totalAmount: number;\n  paymentScreenshot?: {\n    url: string;\n    filename: string;\n    uploadedAt: string;\n  };\n  bookingStatus: 'pending' | 'confirmed' | 'cancelled';\n  paymentVerificationStatus: 'pending' | 'verified' | 'rejected';\n  createdAt: string;\n  participants: Array<{\n    name: string;\n    phone: string;\n    age?: number;\n  }>;\n}\n\ninterface OrganizerDashboardProps {\n  user: User;\n}\n\nconst Org"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "anizerDashboard: React.FC<OrganizerDashboardProps> = ({ user }) => {\n  const [trips, setTrips] = useState<TripSummary[]>([]);\n  const [pendingBookings, setPendingBookings] = useState<BookingVerification[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [verificationLoading, setVerificationLoading] = useState<string | null>(null);\n  const [socket, setSocket] = useState<Socket | null>(null);\n  const [notifications, setNotifications] = useState<Array<{ id: string; message: string; type: 'success' | 'info' | 'error'; timestamp: Date }>>([]);\n  const [crmSubscription, setCrmSubscription] = useState<any | null>(null);\n\n  useEffect(() => {\n    fetchDashboardData();\n    initializeSocket();\n    \n    return () => {\n      if (socket) {\n        socket.disconnect();\n      }\n    };\n  }, []);\n\n  const initializeSocket = () => {\n    const token = localStorage.getItem('token');\n    if (!token) return;\n\n    const newSocket = io(process.env.REACT_AP"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "P_API_URL || 'https://trek-tribe-38in.onrender.com', {\n      auth: { token },\n      path: '/socket.io/'\n    });\n\n    newSocket.on('connect', () => {\n      console.log('üîå Connected to real-time updates');\n    });\n\n    newSocket.on('booking_update', (data) => {\n      console.log('üì¨ Booking update received:', data);\n      addNotification(data.message, 'info');\n      fetchDashboardData(); // Refresh data\n    });\n\n    newSocket.on('organizer_notification', (data) => {\n      console.log('üîî Organizer notification:', data);\n      addNotification(data.message, 'success');\n      \n      if (data.type === 'joined' || data.type === 'payment_verified') {\n        fetchDashboardData();\n      }\n    });\n\n    newSocket.on('error', (error) => {\n      console.error('Socket error:', error);\n    });\n\n    setSocket(newSocket);\n  };\n\n  const fetchDashboardData = async () => {\n    try {\n      const [tripsResponse, bookingsResponse] = await Promise.all([\n        api.get('/organizer/trips'),\n        api.get('/org"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "anizer/pending-verifications')\n      ]);\n      \n      setTrips((tripsResponse.data as any).trips || []);\n      setPendingBookings((bookingsResponse.data as any).bookings || []);\n      // Fetch CRM subscription info (if any)\n      try {\n        const crmRes = await api.get('/api/crm/subscriptions/my');\n        setCrmSubscription(crmRes.data?.data || null);\n      } catch (crmErr: any) {\n        // Not critical; ignore if user has no crm subscription\n        setCrmSubscription(null);\n      }\n    } catch (error: any) {\n      setError(error.response?.data?.error || 'Failed to load dashboard data');\n      console.error('Error fetching dashboard data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addNotification = (message: string, type: 'success' | 'info' | 'error') => {\n    const notification = {\n      id: Date.now().toString(),\n      message,\n      type,\n      timestamp: new Date()\n    };\n    \n    setNotifications(prev => [notification, ...prev.slice(0, 4)]); // Ke"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "ep only 5 most recent\n    \n    // Auto-remove after 5 seconds\n    setTimeout(() => {\n      setNotifications(prev => prev.filter(n => n.id !== notification.id));\n    }, 5000);\n  };\n\n  const handleVerifyPayment = async (bookingId: string, action: 'verify' | 'reject') => {\n    setVerificationLoading(bookingId);\n    try {\n      await api.post(`/organizer/verify-payment/${bookingId}`, { \n        action,\n        notes: action === 'reject' ? 'Payment verification failed' : 'Payment verified successfully'\n      });\n      \n      addNotification(\n        `Payment ${action === 'verify' ? 'verified' : 'rejected'} successfully!`, \n        action === 'verify' ? 'success' : 'info'\n      );\n      \n      // Refresh data\n      fetchDashboardData();\n    } catch (error: any) {\n      setError(error.response?.data?.error || `Failed to ${action} payment`);\n      addNotification(`Error: ${error.response?.data?.error || 'Action failed'}`, 'error');\n    } finally {\n      setVerificationLoading(null);\n    }\n  };"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "const openPaymentScreenshot = (url: string) => {\n    window.open(url, '_blank', 'noopener,noreferrer');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-nature-600 mx-auto mb-4\"></div>\n          <p className=\"text-forest-600\">Loading your dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 p-6\">\n      {/* Header */}\n      <div className=\"max-w-7xl mx-auto mb-8\">\n        <div className=\"bg-white rounded-2xl shadow-xl p-6\">\n          <h1 className=\"text-3xl font-bold bg-gradient-to-r from-forest-800 to-nature-600 bg-clip-text text-transparent mb-2\">\n            üèîÔ∏è Organizer Dashboard\n          </h1>\n          <p className=\"text-forest-600\">\n            Welcome back, <span c"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "lassName=\"font-semibold\">{user.name}</span>! Manage your trips and verify payments.\n          </p>\n        </div>\n      </div>\n\n      {/* Real-time Notifications */}\n      {notifications.length > 0 && (\n        <div className=\"max-w-7xl mx-auto mb-6\">\n          <div className=\"space-y-2\">\n            {notifications.map((notification) => (\n              <div\n                key={notification.id}\n                className={`p-4 rounded-xl shadow-lg border-l-4 ${\n                  notification.type === 'success' \n                    ? 'bg-green-50 border-green-500 text-green-800'\n                    : notification.type === 'error'\n                    ? 'bg-red-50 border-red-500 text-red-800'\n                    : 'bg-blue-50 border-blue-500 text-blue-800'\n                } animate-slide-down`}\n              >\n                <div className=\"flex justify-between items-start\">\n                  <p className=\"text-sm font-medium\">{notification.message}</p>\n                  <span className=\""
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "text-xs opacity-70\">\n                    {notification.timestamp.toLocaleTimeString()}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Error Alert */}\n      {error && (\n        <div className=\"max-w-7xl mx-auto mb-6\">\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl\">\n            <p className=\"text-sm\">{error}</p>\n          </div>\n        </div>\n      )}\n\n      <div className=\"max-w-7xl mx-auto grid lg:grid-cols-3 gap-8\">\n        {/* Trip Overview */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          <div className=\"bg-white rounded-2xl shadow-xl p-6\">\n            <h2 className=\"text-2xl font-bold text-forest-800 mb-6 flex items-center gap-2\">\n              üéØ Your Trips Overview\n            </h2>\n            \n            {trips.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <div className=\"text-6xl mb-4\">üèïÔ∏è</d"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "iv>\n                <h3 className=\"text-xl font-semibold text-forest-700 mb-2\">No trips yet</h3>\n                <p className=\"text-forest-600\">Create your first amazing adventure!</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {trips.map((trip) => (\n                  <div key={trip._id} className=\"bg-gradient-to-r from-forest-50 to-nature-50 rounded-xl p-4 border border-forest-200\">\n                    <div className=\"flex justify-between items-start mb-3\">\n                      <div>\n                        <h3 className=\"text-lg font-semibold text-forest-800\">{trip.title}</h3>\n                        <p className=\"text-forest-600\">üìç {trip.destination}</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <span className={`px-3 py-1 rounded-full text-xs font-semibold ${\n                          trip.status === 'active' ? 'bg-green-100 text-green-800' :"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "trip.status === 'completed' ? 'bg-blue-100 text-blue-800' :\n                          'bg-gray-100 text-gray-800'\n                        }`}>\n                          {trip.status.charAt(0).toUpperCase() + trip.status.slice(1)}\n                        </span>\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                      <div>\n                        <span className=\"text-forest-600\">üìÖ Dates:</span>\n                        <p className=\"font-medium text-forest-800\">\n                          {new Date(trip.startDate).toLocaleDateString()} - {new Date(trip.endDate).toLocaleDateString()}\n                        </p>\n                      </div>\n                      <div>\n                        <span className=\"text-forest-600\">üë• Participants:</span>\n                        <p className=\"font-medium text-forest-800\">\n                          {trip.participants.length} / {trip.ca"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "pacity}\n                        </p>\n                      </div>\n                      <div>\n                        <span className=\"text-forest-600\">üí∞ Price:</span>\n                        <p className=\"font-bold text-nature-600 text-lg\">\n                          ‚Çπ{trip.price.toLocaleString()}\n                        </p>\n                      </div>\n                    </div>\n                    \n                    {trip.pendingVerifications > 0 && (\n                      <div className=\"mt-3 p-2 bg-amber-50 border border-amber-200 rounded-lg\">\n                        <p className=\"text-sm text-amber-700 font-medium\">\n                          ‚ö†Ô∏è {trip.pendingVerifications} payment(s) pending verification\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Payment Verification Panel */}\n        <div className=\"space-y-6\">"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "<div className=\"bg-white rounded-2xl shadow-xl p-6\">\n            <h2 className=\"text-2xl font-bold text-forest-800 mb-6 flex items-center gap-2\">\n              üí≥ Payment Verification\n            </h2>\n            \n            {pendingBookings.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <div className=\"text-4xl mb-3\">‚úÖ</div>\n                <h3 className=\"text-lg font-semibold text-forest-700 mb-1\">All caught up!</h3>\n                <p className=\"text-sm text-forest-600\">No payments pending verification.</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {pendingBookings.map((booking) => (\n                  <div key={booking._id} className=\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200\">\n                    <div className=\"flex justify-between items-start mb-3\">\n                      <div>\n                        <h3 className=\"font-semibold text-forest-800\">{"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "booking.travelerName}</h3>\n                        <p className=\"text-sm text-forest-600\">{booking.tripTitle}</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-lg font-bold text-nature-600\">\n                          ‚Çπ{booking.totalAmount.toLocaleString()}\n                        </p>\n                        <p className=\"text-xs text-forest-500\">\n                          {booking.numberOfGuests} traveler{booking.numberOfGuests > 1 ? 's' : ''}\n                        </p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"space-y-3\">\n                      <div className=\"text-sm\">\n                        <p className=\"text-forest-600 mb-1\">Travelers:</p>\n                        <div className=\"space-y-1\">\n                          {booking.participants.map((participant, index) => (\n                            <div key={index} className=\"flex justif"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "y-between bg-white rounded-lg p-2\">\n                              <span className=\"font-medium\">{participant.name}</span>\n                              <span className=\"text-forest-600\">{participant.phone}</span>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                      \n                      {booking.paymentScreenshot && (\n                        <div>\n                          <p className=\"text-sm text-forest-600 mb-2\">Payment Screenshot:</p>\n                          <div className=\"flex items-center gap-2\">\n                            <button\n                              onClick={() => openPaymentScreenshot(booking.paymentScreenshot!.url)}\n                              className=\"text-blue-600 hover:text-blue-800 text-sm underline\"\n                            >\n                              üìÑ View Screenshot\n                            </button>\n                            <span className=\"te"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "xt-xs text-forest-500\">\n                              Uploaded: {new Date(booking.paymentScreenshot.uploadedAt).toLocaleDateString()}\n                            </span>\n                          </div>\n                        </div>\n                      )}\n                      \n                      <div className=\"flex gap-2 pt-2\">\n                        <button\n                          onClick={() => handleVerifyPayment(booking._id, 'verify')}\n                          disabled={verificationLoading === booking._id}\n                          className=\"flex-1 px-3 py-2 bg-green-600 text-white text-sm font-semibold rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                        >\n                          {verificationLoading === booking._id ? '‚è≥' : '‚úÖ'} Verify\n                        </button>\n                        <button\n                          onClick={() => handleVerifyPayment(booking._id, 'reject')}"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "disabled={verificationLoading === booking._id}\n                          className=\"flex-1 px-3 py-2 bg-red-600 text-white text-sm font-semibold rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                        >\n                          {verificationLoading === booking._id ? '‚è≥' : '‚ùå'} Reject\n                        </button>\n                      </div>\n                    </div>\n                    \n                    <div className=\"mt-3 pt-2 border-t border-blue-200 text-xs text-forest-500\">\n                      Booking created: {new Date(booking.createdAt).toLocaleString()}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* CRM Subscription Panel */}\n      <div className=\"max-w-7xl mx-auto mt-8\">\n        <div className=\"bg-white rounded-2xl shadow-xl p-6\">\n          <h2 className=\"text-2xl font-bold tex"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "t-forest-800 mb-4\">üìã CRM Access</h2>\n          {!crmSubscription ? (\n            <div className=\"text-sm text-forest-600\">\n              <p>You do not have CRM access currently.</p>\n              <p className=\"mt-2\">Purchase the CRM bundle to access leads, tickets and analytics.</p>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div>\n                <p className=\"text-xs text-forest-600\">Status</p>\n                <p className=\"font-semibold text-forest-800\">{crmSubscription.status}</p>\n              </div>\n              <div>\n                <p className=\"text-xs text-forest-600\">CRM Access</p>\n                <p className=\"font-semibold text-forest-800\">{crmSubscription.crmBundle?.hasAccess ? 'Enabled' : 'Disabled'}</p>\n              </div>\n              <div>\n                <p className=\"text-xs text-forest-600\">Billing</p>\n                <p className=\"font-semibold text-forest-800\">{crmSubscription.billingHistory?.length ||"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboard.tsx",
    "text": "0} transactions</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OrganizerDashboard;"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../config/api';\nimport { useToast, ToastContainer } from '../components/Toast';\n\ninterface DashboardStats {\n  trips: {\n    total: number;\n    active: number;\n    upcoming: number;\n    completed: number;\n  };\n  bookings: {\n    total: number;\n    pending: number;\n    confirmed: number;\n    cancelled: number;\n  };\n  revenue: {\n    total: number;\n    thisMonth: number;\n    lastMonth: number;\n    growth: number;\n  };\n  participants: {\n    total: number;\n    thisMonth: number;\n  };\n}\n\ninterface AutoPayInfo {\n  isSetup: boolean;\n  scheduledPaymentDate?: string;\n  daysUntilPayment?: number;\n  subscriptionActive: boolean;\n  listingsRemaining: number;\n}\n\ninterface SubscriptionInfo {\n  isActive: boolean;\n  tripsPublished: number;\n  tripsLimit: number;\n  expiresAt?: string;\n  daysRemaining?: number;\n}\n\ninterface Alert {\n  id: string"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": ";\n  priority: 'critical' | 'high' | 'medium' | 'low';\n  title: string;\n  message: string;\n  action?: {\n    label: string;\n    url: string;\n  };\n}\n\ninterface QuickAction {\n  label: string;\n  icon: string;\n  url: string;\n  badge?: number;\n  color: string;\n}\n\ninterface RecentTrip {\n  _id: string;\n  title: string;\n  startDate: string;\n  participants: number;\n  capacity: number;\n  status: string;\n}\n\ninterface RecentBooking {\n  _id: string;\n  tripTitle: string;\n  travelerName: string;\n  status: string;\n  amount: number;\n  createdAt: string;\n}\n\ninterface OrganizerDashboardData {\n  stats: DashboardStats;\n  autoPay: AutoPayInfo;\n  subscription: SubscriptionInfo;\n  alerts: Alert[];\n  quickActions: QuickAction[];\n  recentTrips: RecentTrip[];\n  recentBookings: RecentBooking[];\n}\n\nconst OrganizerDashboardNew: React.FC = () => {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const { toasts, success, error: showError, removeToast } = useToast();\n  \n  const [loading, setLoading] = u"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "seState(true);\n  const [data, setData] = useState<OrganizerDashboardData | null>(null);\n\n  useEffect(() => {\n    if (user?.role !== 'organizer') {\n      navigate('/');\n      return;\n    }\n    fetchDashboardData();\n  }, [user, navigate]);\n\n  const fetchDashboardData = async () => {\n    try {\n      const response = await api.get('/api/dashboard/organizer');\n      setData(response.data);\n    } catch (error: any) {\n      showError(error.response?.data?.error || 'Failed to load dashboard');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getAlertColor = (priority: string) => {\n    switch (priority) {\n      case 'critical': return 'bg-red-50 border-red-500 text-red-800';\n      case 'high': return 'bg-orange-50 border-orange-500 text-orange-800';\n      case 'medium': return 'bg-yellow-50 border-yellow-500 text-yellow-800';\n      case 'low': return 'bg-blue-50 border-blue-500 text-blue-800';\n      default: return 'bg-gray-50 border-gray-500 text-gray-800';\n    }\n  };\n\n  const form"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "atCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR',\n      maximumFractionDigits: 0\n    }).format(amount / 100);\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-IN', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric'\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-forest-50 via-nature-50 to-forest-100 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <svg className=\"animate-spin h-12 w-12 text-forest-600 mx-auto mb-4\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n          </svg>"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "<p className=\"text-forest-600 font-medium\">Loading your dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!data) return null;\n\n  return (\n    <>\n      <ToastContainer toasts={toasts} onRemove={removeToast} />\n      <div className=\"min-h-screen bg-gradient-to-br from-forest-50 via-nature-50 to-forest-100 p-4 md:p-6 lg:p-8\">\n        <div className=\"max-w-7xl mx-auto space-y-6\">\n          {/* Header */}\n          <div className=\"bg-white rounded-2xl shadow-lg p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h1 className=\"text-3xl font-bold text-forest-900 mb-2\">\n                  üèîÔ∏è Organizer Dashboard\n                </h1>\n                <p className=\"text-forest-600\">\n                  Welcome back, <span className=\"font-semibold\">{user?.name}</span>!\n                </p>\n              </div>\n              <button\n                onClick={() => navigate('/trips/create')}\n                className=\"px-6 py-3 b"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "g-gradient-to-r from-forest-600 to-nature-600 text-white font-semibold rounded-xl hover:from-forest-700 hover:to-nature-700 transition-all shadow-lg hover:shadow-xl\"\n              >\n                + Create New Trip\n              </button>\n            </div>\n          </div>\n\n          {/* Alerts */}\n          {data.alerts.length > 0 && (\n            <div className=\"space-y-3\">\n              {data.alerts.map((alert) => (\n                <div\n                  key={alert.id}\n                  className={`p-4 rounded-xl border-l-4 ${getAlertColor(alert.priority)} shadow-md`}\n                >\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-semibold text-sm mb-1\">{alert.title}</h3>\n                      <p className=\"text-sm opacity-90\">{alert.message}</p>\n                    </div>\n                    {alert.action && (\n                      <button\n                        on"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "Click={() => navigate(alert.action!.url)}\n                        className=\"px-4 py-2 bg-white/80 hover:bg-white rounded-lg text-sm font-medium transition-colors whitespace-nowrap\"\n                      >\n                        {alert.action.label}\n                      </button>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Stats Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n            {/* Total Trips */}\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"w-12 h-12 bg-forest-100 rounded-lg flex items-center justify-center\">\n                  <svg className=\"w-6 h-6 text-forest-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 3v4M3 5h4"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z\" />\n                  </svg>\n                </div>\n                <span className=\"text-xs font-medium text-forest-500\">TRIPS</span>\n              </div>\n              <h3 className=\"text-3xl font-bold text-forest-900\">{data.stats.trips.total}</h3>\n              <p className=\"text-sm text-forest-600 mt-1\">\n                {data.stats.trips.active} active, {data.stats.trips.upcoming} upcoming\n              </p>\n            </div>\n\n            {/* Total Bookings */}\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                  <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d="
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                  </svg>\n                </div>\n                <span className=\"text-xs font-medium text-blue-500\">BOOKINGS</span>\n              </div>\n              <h3 className=\"text-3xl font-bold text-blue-900\">{data.stats.bookings.total}</h3>\n              <p className=\"text-sm text-blue-600 mt-1\">\n                {data.stats.bookings.pending} pending verification\n              </p>\n            </div>\n\n            {/* Total Revenue */}\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"w-12 h-12 bg-nature-100 rounded-lg flex items-center justify-center\">\n                  <svg className=\"w-6 h-6 text-nature-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\""
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <span className=\"text-xs font-medium text-nature-500\">REVENUE</span>\n              </div>\n              <h3 className=\"text-3xl font-bold text-nature-900\">{formatCurrency(data.stats.revenue.total)}</h3>\n              <p className=\"text-sm text-nature-600 mt-1\">\n                {data.stats.revenue.growth >= 0 ? '+' : ''}{data.stats.revenue.growth.toFixed(1)}% from last month\n              </p>\n            </div>\n\n            {/* Total Participants */}\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\n                  <svg className=\"w-6 h-6 text-p"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "urple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n                  </svg>\n                </div>\n                <span className=\"text-xs font-medium text-purple-500\">TRAVELERS</span>\n              </div>\n              <h3 className=\"text-3xl font-bold text-purple-900\">{data.stats.participants.total}</h3>\n              <p className=\"text-sm text-purple-600 mt-1\">\n                {data.stats.participants.thisMonth} this month\n              </p>\n            </div>\n          </div>\n\n          {/* Auto-Pay & Subscription Info */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Auto-Pay Sta"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "tus */}\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\n              <h3 className=\"text-lg font-bold text-forest-900 mb-4 flex items-center gap-2\">\n                <svg className=\"w-5 h-5 text-nature-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\" />\n                </svg>\n                Auto-Pay Status\n              </h3>\n              \n              {data.autoPay.isSetup ? (\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center gap-2\">\n                    <div className={`w-3 h-3 rounded-full ${data.autoPay.subscriptionActive ? 'bg-green-500' : 'bg-orange-500'} animate-pulse`} />\n                    <span className=\"text-sm font-medium text-forest-700\">\n                      {data.autoPay.subscriptionActive ? 'Active' : 'Pending Payment'}"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "</span>\n                  </div>\n                  \n                  {data.autoPay.scheduledPaymentDate && (\n                    <div className=\"bg-forest-50 rounded-lg p-4\">\n                      <p className=\"text-sm text-forest-600 mb-1\">Next payment scheduled:</p>\n                      <p className=\"text-lg font-bold text-forest-900\">{formatDate(data.autoPay.scheduledPaymentDate)}</p>\n                      {data.autoPay.daysUntilPayment !== undefined && (\n                        <p className=\"text-sm text-forest-600 mt-1\">{data.autoPay.daysUntilPayment} days remaining</p>\n                      )}\n                    </div>\n                  )}\n                  \n                  <button\n                    onClick={() => navigate('/auto-pay/manage')}\n                    className=\"w-full py-2 px-4 border-2 border-forest-300 text-forest-700 font-medium rounded-lg hover:bg-forest-50 transition-colors\"\n                  >\n                    Manage Auto-Pay"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "</button>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\n                    <p className=\"text-sm text-orange-800\">\n                      <span className=\"font-semibold\">Action Required:</span> Setup auto-pay to keep your listings active.\n                    </p>\n                  </div>\n                  <button\n                    onClick={() => navigate('/setup-auto-pay')}\n                    className=\"w-full py-3 px-4 bg-gradient-to-r from-forest-600 to-nature-600 text-white font-semibold rounded-lg hover:from-forest-700 hover:to-nature-700 transition-all\"\n                  >\n                    Setup Auto-Pay Now\n                  </button>\n                </div>\n              )}\n            </div>\n\n            {/* Subscription Info */}\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\n              <h3 className=\"text-lg fon"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "t-bold text-forest-900 mb-4 flex items-center gap-2\">\n                <svg className=\"w-5 h-5 text-nature-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                Subscription\n              </h3>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className=\"text-sm text-forest-600\">Listings Used</span>\n                    <span className=\"text-sm font-bold text-forest-900\">\n                      {data.subscription.tripsPublished} / {data.subscription.tripsLimit}\n                    </span>\n                  </div>\n                  <div className=\"w-full h-3 bg-forest-100 rounded-full overflow-hidden\">\n                    <div \n                      className=\"h-full bg-gradient-to-"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "r from-forest-500 to-nature-500 transition-all\"\n                      style={{ width: `${(data.subscription.tripsPublished / data.subscription.tripsLimit) * 100}%` }}\n                    />\n                  </div>\n                </div>\n                \n                {data.subscription.expiresAt && (\n                  <div className=\"bg-forest-50 rounded-lg p-4\">\n                    <p className=\"text-sm text-forest-600 mb-1\">Subscription expires:</p>\n                    <p className=\"text-lg font-bold text-forest-900\">{formatDate(data.subscription.expiresAt)}</p>\n                    {data.subscription.daysRemaining !== undefined && (\n                      <p className=\"text-sm text-forest-600 mt-1\">{data.subscription.daysRemaining} days remaining</p>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Quick Actions */}\n          <div className=\"bg-white rounded-xl shadow-md p-6\">\n            <h3"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "className=\"text-lg font-bold text-forest-900 mb-4\">Quick Actions</h3>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n              {data.quickActions.map((action, index) => (\n                <button\n                  key={index}\n                  onClick={() => navigate(action.url)}\n                  className=\"relative p-4 bg-forest-50 rounded-xl hover:bg-forest-100 transition-colors text-left\"\n                >\n                  {action.badge !== undefined && action.badge > 0 && (\n                    <span className={`absolute top-2 right-2 px-2 py-1 bg-${action.color}-500 text-white text-xs font-bold rounded-full`}>\n                      {action.badge}\n                    </span>\n                  )}\n                  <div className=\"text-2xl mb-2\">{action.icon}</div>\n                  <p className=\"text-sm font-medium text-forest-900\">{action.label}</p>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Recent Trips a"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "nd Bookings */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Recent Trips */}\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-bold text-forest-900\">Recent Trips</h3>\n                <button\n                  onClick={() => navigate('/trips')}\n                  className=\"text-sm text-nature-600 hover:text-nature-700 font-medium\"\n                >\n                  View All ‚Üí\n                </button>\n              </div>\n              \n              <div className=\"space-y-3\">\n                {data.recentTrips.length > 0 ? (\n                  data.recentTrips.map((trip) => (\n                    <div\n                      key={trip._id}\n                      onClick={() => navigate(`/trips/${trip._id}`)}\n                      className=\"p-4 bg-forest-50 rounded-lg hover:bg-forest-100 transition-colors cursor-pointer\""
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": ">\n                      <h4 className=\"font-semibold text-forest-900 mb-1\">{trip.title}</h4>\n                      <div className=\"flex items-center justify-between text-sm text-forest-600\">\n                        <span>{formatDate(trip.startDate)}</span>\n                        <span>{trip.participants}/{trip.capacity} travelers</span>\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <p className=\"text-sm text-forest-500 text-center py-8\">No trips yet</p>\n                )}\n              </div>\n            </div>\n\n            {/* Recent Bookings */}\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-bold text-forest-900\">Recent Bookings</h3>\n                <button\n                  onClick={() => navigate('/bookings')}\n                  className=\"text-sm text-nature-600 hov"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "er:text-nature-700 font-medium\"\n                >\n                  View All ‚Üí\n                </button>\n              </div>\n              \n              <div className=\"space-y-3\">\n                {data.recentBookings.length > 0 ? (\n                  data.recentBookings.map((booking) => (\n                    <div\n                      key={booking._id}\n                      onClick={() => navigate(`/bookings/${booking._id}`)}\n                      className=\"p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors cursor-pointer\"\n                    >\n                      <div className=\"flex items-start justify-between mb-1\">\n                        <h4 className=\"font-semibold text-blue-900\">{booking.travelerName}</h4>\n                        <span className={`px-2 py-1 text-xs font-medium rounded ${\n                          booking.status === 'confirmed' ? 'bg-green-100 text-green-800' :\n                          booking.status === 'pending' ? 'bg-yellow-100 text-yellow-800"
  },
  {
    "source": "web\\src\\pages\\OrganizerDashboardNew.tsx",
    "text": "' :\n                          'bg-gray-100 text-gray-800'\n                        }`}>\n                          {booking.status}\n                        </span>\n                      </div>\n                      <p className=\"text-sm text-blue-700 mb-1\">{booking.tripTitle}</p>\n                      <div className=\"flex items-center justify-between text-sm text-blue-600\">\n                        <span>{formatDate(booking.createdAt)}</span>\n                        <span className=\"font-semibold\">{formatCurrency(booking.amount)}</span>\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <p className=\"text-sm text-forest-500 text-center py-8\">No bookings yet</p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default OrganizerDashboardNew;"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": "import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../config/api';\nimport { useToast, ToastContainer } from '../components/Toast';\n\nconst PhoneVerification: React.FC = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user, refreshUser } = useAuth();\n  const { toasts, success, error: showErrorToast, removeToast } = useToast();\n  \n  const [phone, setPhone] = useState('');\n  const [otp, setOtp] = useState(['', '', '', '', '', '']);\n  const [step, setStep] = useState<'phone' | 'otp'>('phone');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [countdown, setCountdown] = useState(0);\n  const [devOtp, setDevOtp] = useState('');\n  \n  const otpInputRefs = useRef<(HTMLInputElement | null)[]>([]);\n\n  // Check if already verified\n  useEffect(() => {\n    if (user?.phoneVerified"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": ") {\n      // Already verified, redirect based on state or role\n      const from = (location.state as any)?.from || getDashboardRoute();\n      navigate(from, { replace: true });\n    }\n  }, [user, navigate, location]);\n\n  // Countdown timer for resend OTP\n  useEffect(() => {\n    if (countdown > 0) {\n      const timer = setTimeout(() => setCountdown(countdown - 1), 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [countdown]);\n\n  const getDashboardRoute = () => {\n    if (!user) return '/';\n    switch (user.role) {\n      case 'organizer': return '/organizer-dashboard';\n      case 'agent': return '/agent-dashboard';\n      case 'admin': return '/admin-dashboard';\n      default: return '/';\n    }\n  };\n\n  const validatePhone = (phoneNumber: string): boolean => {\n    // Match format: optional +, followed by 1-9, then 1-14 digits\n    const phoneRegex = /^[+]?[1-9]\\d{1,14}$/;\n    return phoneRegex.test(phoneNumber.replace(/\\s/g, ''));\n  };\n\n  const handleSendOTP = async (e?: React.FormEv"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": "ent) => {\n    if (e) e.preventDefault();\n    \n    const cleanPhone = phone.replace(/\\s/g, '');\n    \n    if (!validatePhone(cleanPhone)) {\n      setError('Please enter a valid phone number (e.g., +919876543210)');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await api.post('/auth/verify-phone/send-otp', { phone: cleanPhone });\n      \n      // Store dev OTP if available\n      if (response.data.otp) {\n        setDevOtp(response.data.otp);\n        console.log('DEV OTP:', response.data.otp);\n      }\n      \n      setStep('otp');\n      setCountdown(60);\n      success('OTP sent to your phone!');\n      \n      // Focus first OTP input\n      setTimeout(() => otpInputRefs.current[0]?.focus(), 100);\n    } catch (error: any) {\n      const errorMsg = error.response?.data?.error || 'Failed to send OTP';\n      setError(errorMsg);\n      showErrorToast(errorMsg);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleOtpChange = (index: number"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": ", value: string) => {\n    // Only allow digits\n    if (value && !/^\\d$/.test(value)) return;\n\n    const newOtp = [...otp];\n    newOtp[index] = value;\n    setOtp(newOtp);\n\n    // Auto-focus next input\n    if (value && index < 5) {\n      otpInputRefs.current[index + 1]?.focus();\n    }\n\n    // Auto-submit when all 6 digits entered\n    if (newOtp.every(digit => digit !== '') && newOtp.join('').length === 6) {\n      handleVerifyOTP(newOtp.join(''));\n    }\n  };\n\n  const handleOtpKeyDown = (index: number, e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Backspace' && !otp[index] && index > 0) {\n      // Move to previous input on backspace if current is empty\n      otpInputRefs.current[index - 1]?.focus();\n    }\n  };\n\n  const handleOtpPaste = (e: React.ClipboardEvent) => {\n    e.preventDefault();\n    const pastedData = e.clipboardData.getData('text').slice(0, 6);\n    \n    if (/^\\d+$/.test(pastedData)) {\n      const newOtp = pastedData.split('').concat(Array(6).fill('')).slice("
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": "0, 6);\n      setOtp(newOtp);\n      \n      // Focus last filled input or first empty\n      const focusIndex = Math.min(pastedData.length, 5);\n      otpInputRefs.current[focusIndex]?.focus();\n\n      // Auto-submit if 6 digits pasted\n      if (pastedData.length === 6) {\n        handleVerifyOTP(pastedData);\n      }\n    }\n  };\n\n  const handleVerifyOTP = async (otpValue?: string) => {\n    const otpCode = otpValue || otp.join('');\n    \n    if (otpCode.length !== 6) {\n      setError('Please enter all 6 digits');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      await api.post('/auth/verify-phone/verify-otp', {\n        phone: phone.replace(/\\s/g, ''),\n        otp: otpCode\n      });\n\n      success('Phone verified successfully!');\n      \n      // Refresh user data\n      if (refreshUser) {\n        await refreshUser();\n      }\n\n      // Redirect based on next required step\n      setTimeout(() => {\n        const nextStep = (location.state as any)?.nextStep;"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": "if (nextStep === 'auto-pay') {\n          navigate('/setup-auto-pay', { replace: true });\n        } else if (nextStep === 'complete-profile') {\n          navigate('/complete-profile', { replace: true });\n        } else {\n          navigate(getDashboardRoute(), { replace: true });\n        }\n      }, 1000);\n    } catch (error: any) {\n      const errorMsg = error.response?.data?.error || 'Invalid OTP';\n      setError(errorMsg);\n      showErrorToast(errorMsg);\n      \n      // Clear OTP on error\n      setOtp(['', '', '', '', '', '']);\n      otpInputRefs.current[0]?.focus();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleResendOTP = async () => {\n    if (countdown > 0) return;\n    \n    setOtp(['', '', '', '', '', '']);\n    await handleSendOTP();\n  };\n\n  const handleChangePhone = () => {\n    setStep('phone');\n    setOtp(['', '', '', '', '', '']);\n    setError('');\n  };\n\n  return (\n    <>\n      <ToastContainer toasts={toasts} onRemove={removeToast} />\n      <div className"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": "=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-forest-50 via-nature-50 to-forest-100 py-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-md w-full space-y-8\">\n          {/* Header */}\n          <div className=\"text-center\">\n            <div className=\"mx-auto h-20 w-20 bg-gradient-to-br from-forest-600 to-nature-600 rounded-2xl flex items-center justify-center shadow-lg\">\n              <svg className=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z\" />\n              </svg>\n            </div>\n            <h2 className=\"mt-6 text-3xl font-extrabold text-forest-900\">\n              Verify Your Phone\n            </h2>\n            <p className=\"mt-2 text-sm text-forest-600\">\n              {step === 'phone' \n                ? 'Enter your phone number to receive a verificatio"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": "n code'\n                : 'Enter the 6-digit code sent to your phone'\n              }\n            </p>\n          </div>\n\n          {/* Form Card */}\n          <div className=\"bg-white rounded-2xl shadow-xl p-8 space-y-6\">\n            {/* Dev OTP Display (only in development) */}\n            {devOtp && (\n              <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-center\">\n                <p className=\"text-xs text-yellow-800 font-medium\">DEV MODE - OTP:</p>\n                <p className=\"text-2xl font-bold text-yellow-900 mt-1\">{devOtp}</p>\n              </div>\n            )}\n\n            {/* Error Display */}\n            {error && (\n              <div className=\"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded flex items-start gap-3\">\n                <svg className=\"w-5 h-5 mt-0.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": "l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                </svg>\n                <span className=\"text-sm\">{error}</span>\n              </div>\n            )}\n\n            {step === 'phone' ? (\n              /* Phone Number Step */\n              <form onSubmit={handleSendOTP} className=\"space-y-6\">\n                <div>\n                  <label htmlFor=\"phone\" className=\"block text-sm font-semibold text-forest-700 mb-2\">\n                    Phone Number\n                  </label>\n                  <div className=\"relative\">\n                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\n                      <svg className=\"w-5 h-5 text-forest-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": ".948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\n                      </svg>\n                    </div>\n                    <input\n                      id=\"phone\"\n                      type=\"tel\"\n                      placeholder=\"+919876543210\"\n                      value={phone}\n                      onChange={(e) => {\n                        setPhone(e.target.value);\n                        setError('');\n                      }}\n                      className=\"w-full pl-12 pr-4 py-3.5 border-2 border-forest-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-forest-500 focus:border-transparent transition-all\"\n                      disabled={loading}\n                      required\n                    />\n                  </div>\n                  <p className=\"mt-2 text-xs text-forest-500\">\n                    Format: +[country code][numbe"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": "r] (e.g., +919876543210)\n                  </p>\n                </div>\n\n                <button\n                  type=\"submit\"\n                  disabled={loading || !phone}\n                  className=\"w-full py-3.5 px-4 bg-gradient-to-r from-forest-600 to-nature-600 text-white font-semibold rounded-xl hover:from-forest-700 hover:to-nature-700 focus:outline-none focus:ring-2 focus:ring-forest-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl\"\n                >\n                  {loading ? (\n                    <span className=\"flex items-center justify-center gap-2\">\n                      <svg className=\"animate-spin h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7."
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": "962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n                      </svg>\n                      Sending...\n                    </span>\n                  ) : (\n                    'Send Verification Code'\n                  )}\n                </button>\n              </form>\n            ) : (\n              /* OTP Verification Step */\n              <div className=\"space-y-6\">\n                <div className=\"bg-forest-50 rounded-lg p-4 flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2\">\n                    <svg className=\"w-5 h-5 text-forest-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z\" />\n                    </svg>\n                    <span className=\"text-sm font-medium text-forest-700\">{phone}</span>\n                  </div>\n                  <button"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": "onClick={handleChangePhone}\n                    className=\"text-sm text-nature-600 hover:text-nature-700 font-medium\"\n                  >\n                    Change\n                  </button>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-forest-700 mb-3 text-center\">\n                    Enter Verification Code\n                  </label>\n                  <div className=\"flex gap-2 justify-center\" onPaste={handleOtpPaste}>\n                    {otp.map((digit, index) => (\n                      <input\n                        key={index}\n                        ref={(el) => (otpInputRefs.current[index] = el)}\n                        type=\"text\"\n                        inputMode=\"numeric\"\n                        maxLength={1}\n                        value={digit}\n                        onChange={(e) => handleOtpChange(index, e.target.value)}\n                        onKeyDown={(e) => handleOtpKeyDown(inde"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": "x, e)}\n                        className=\"w-12 h-14 text-center text-2xl font-bold border-2 border-forest-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-forest-500 focus:border-transparent transition-all\"\n                        disabled={loading}\n                      />\n                    ))}\n                  </div>\n                </div>\n\n                <button\n                  onClick={() => handleVerifyOTP()}\n                  disabled={loading || otp.some(d => !d)}\n                  className=\"w-full py-3.5 px-4 bg-gradient-to-r from-forest-600 to-nature-600 text-white font-semibold rounded-xl hover:from-forest-700 hover:to-nature-700 focus:outline-none focus:ring-2 focus:ring-forest-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl\"\n                >\n                  {loading ? (\n                    <span className=\"flex items-center justify-center gap-2\">\n                      <svg class"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": "Name=\"animate-spin h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n                      </svg>\n                      Verifying...\n                    </span>\n                  ) : (\n                    'Verify Code'\n                  )}\n                </button>\n\n                <div className=\"text-center\">\n                  <button\n                    onClick={handleResendOTP}\n                    disabled={countdown > 0 || loading}\n                    className=\"text-sm text-nature-600 hover:text-nature-700 font-medium disabled:text-forest-400 disabled:cursor-not-allowed\"\n                  >\n                    {countdown > 0 ? (\n                      `Resend code in ${countdown}s`"
  },
  {
    "source": "web\\src\\pages\\PhoneVerification.tsx",
    "text": ") : (\n                      'Resend verification code'\n                    )}\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Help Text */}\n          <div className=\"text-center\">\n            <p className=\"text-xs text-forest-500\">\n              Having trouble?{' '}\n              <a href=\"/support\" className=\"text-nature-600 hover:text-nature-700 font-medium\">\n                Contact Support\n              </a>\n            </p>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default PhoneVerification;"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "import React from 'react';\nimport { Shield, Eye, Database, Cookie, Mail, Phone } from 'lucide-react';\n\nconst PrivacyPolicy: React.FC = () => {\n  const lastUpdated = \"January 9, 2025\";\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50\">\n      <div className=\"max-w-4xl mx-auto px-4 py-12\">\n        {/* Header */}\n        <div className=\"text-center mb-12\">\n          <div className=\"flex items-center justify-center gap-3 mb-4\">\n            <Shield className=\"w-8 h-8 text-forest-600\" />\n            <h1 className=\"text-4xl font-bold text-forest-800\">Privacy Policy</h1>\n          </div>\n          <p className=\"text-xl text-gray-600 mb-2\">\n            Your privacy is important to us at Trek Tribe\n          </p>\n          <p className=\"text-sm text-gray-500\">\n            Last updated: {lastUpdated}\n          </p>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"bg-white rounded-2xl shadow-xl p-8 space-y-8\">\n          \n          {/* In"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "troduction */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4 flex items-center gap-2\">\n              <Eye className=\"w-6 h-6\" />\n              1. Introduction\n            </h2>\n            <div className=\"prose prose-gray max-w-none\">\n              <p className=\"text-gray-700 leading-relaxed\">\n                Welcome to Trek Tribe (\"we,\" \"our,\" or \"us\"). We are committed to protecting your personal information \n                and your right to privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard \n                your information when you use our website and services.\n              </p>\n              <p className=\"text-gray-700 leading-relaxed mt-3\">\n                Trek Tribe is a community platform that connects adventure enthusiasts, organizes trips, and facilitates \n                outdoor experiences. We believe in transparency and want you to understand how we handle your data.\n              </p>"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "</div>\n          </section>\n\n          {/* Information We Collect */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4 flex items-center gap-2\">\n              <Database className=\"w-6 h-6\" />\n              2. Information We Collect\n            </h2>\n            \n            <div className=\"space-y-6\">\n              <div className=\"bg-forest-50 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-semibold text-forest-800 mb-3\">Information You Provide</h3>\n                <ul className=\"space-y-2 text-gray-700\">\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-forest-600 mt-1\">‚Ä¢</span>\n                    <span><strong>Account Information:</strong> Name, email address, password, phone number</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-forest-600 mt-1\">‚Ä¢</span>\n                    <span><strong>Profil"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "e Information:</strong> Bio, location, profile photo, social media links</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-forest-600 mt-1\">‚Ä¢</span>\n                    <span><strong>Trip Information:</strong> Trip details, reviews, photos, participant data</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-forest-600 mt-1\">‚Ä¢</span>\n                    <span><strong>Communication Data:</strong> Messages, chat conversations, support requests</span>\n                  </li>\n                </ul>\n              </div>\n\n              <div className=\"bg-nature-50 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-semibold text-forest-800 mb-3\">Information Automatically Collected</h3>\n                <ul className=\"space-y-2 text-gray-700\">\n                  <li className=\"flex items-start gap-2\">\n                    <span cl"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "assName=\"text-nature-600 mt-1\">‚Ä¢</span>\n                    <span><strong>Usage Data:</strong> Pages visited, time spent, clicks, interactions</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-nature-600 mt-1\">‚Ä¢</span>\n                    <span><strong>Device Information:</strong> IP address, browser type, operating system</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-nature-600 mt-1\">‚Ä¢</span>\n                    <span><strong>Location Data:</strong> General location (city/country) for trip recommendations</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-nature-600 mt-1\">‚Ä¢</span>\n                    <span><strong>Cookies:</strong> Login status, preferences, analytics data</span>\n                  </li>\n                </ul>\n              </di"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "v>\n            </div>\n          </section>\n\n          {/* How We Use Information */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4\">3. How We Use Your Information</h2>\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div className=\"space-y-4\">\n                <div className=\"border-l-4 border-forest-600 pl-4\">\n                  <h4 className=\"font-semibold text-gray-800\">Service Delivery</h4>\n                  <p className=\"text-gray-600 text-sm\">Provide trip booking, user accounts, and platform functionality</p>\n                </div>\n                <div className=\"border-l-4 border-forest-600 pl-4\">\n                  <h4 className=\"font-semibold text-gray-800\">Communication</h4>\n                  <p className=\"text-gray-600 text-sm\">Send trip updates, confirmations, and important notifications</p>\n                </div>\n                <div className=\"border-l-4 border-forest-600 pl-4\">\n                  <h4 classNam"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "e=\"font-semibold text-gray-800\">Safety & Security</h4>\n                  <p className=\"text-gray-600 text-sm\">Verify identities, prevent fraud, and ensure user safety</p>\n                </div>\n              </div>\n              <div className=\"space-y-4\">\n                <div className=\"border-l-4 border-nature-600 pl-4\">\n                  <h4 className=\"font-semibold text-gray-800\">Personalization</h4>\n                  <p className=\"text-gray-600 text-sm\">Recommend trips, customize experience based on preferences</p>\n                </div>\n                <div className=\"border-l-4 border-nature-600 pl-4\">\n                  <h4 className=\"font-semibold text-gray-800\">Analytics</h4>\n                  <p className=\"text-gray-600 text-sm\">Understand usage patterns and improve our services</p>\n                </div>\n                <div className=\"border-l-4 border-nature-600 pl-4\">\n                  <h4 className=\"font-semibold text-gray-800\">Legal Compliance</h4>\n                  <p"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "className=\"text-gray-600 text-sm\">Meet legal obligations and respond to legal requests</p>\n                </div>\n              </div>\n            </div>\n          </section>\n\n          {/* Cookies */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4 flex items-center gap-2\">\n              <Cookie className=\"w-6 h-6\" />\n              4. Cookies and Tracking Technologies\n            </h2>\n            <div className=\"bg-blue-50 p-6 rounded-xl\">\n              <p className=\"text-gray-700 leading-relaxed mb-4\">\n                We use cookies and similar tracking technologies to enhance your experience on Trek Tribe. \n                You can control cookie preferences through our cookie consent banner.\n              </p>\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div>\n                  <h4 className=\"font-semibold text-blue-800 mb-2\">Types of Cookies:</h4>\n                  <ul className=\"text-sm text-gray-700 space-y-"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "1\">\n                    <li>‚Ä¢ Essential cookies (always active)</li>\n                    <li>‚Ä¢ Functional cookies (enhance features)</li>\n                    <li>‚Ä¢ Analytics cookies (Google Analytics)</li>\n                    <li>‚Ä¢ Marketing cookies (advertising)</li>\n                  </ul>\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-blue-800 mb-2\">Your Controls:</h4>\n                  <ul className=\"text-sm text-gray-700 space-y-1\">\n                    <li>‚Ä¢ Customize preferences anytime</li>\n                    <li>‚Ä¢ Block specific cookie types</li>\n                    <li>‚Ä¢ Clear cookies from browser</li>\n                    <li>‚Ä¢ Opt-out of analytics tracking</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </section>\n\n          {/* Information Sharing */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4\">5. Information Sharing and Dis"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "closure</h2>\n            <div className=\"space-y-4\">\n              <div className=\"bg-yellow-50 border-l-4 border-yellow-400 p-4\">\n                <h4 className=\"font-semibold text-yellow-800 mb-2\">We DO NOT sell your personal information.</h4>\n                <p className=\"text-yellow-700 text-sm\">\n                  Your data is never sold to third parties for marketing purposes.\n                </p>\n              </div>\n              \n              <div className=\"space-y-3\">\n                <h4 className=\"font-semibold text-gray-800\">We may share information in these situations:</h4>\n                <ul className=\"space-y-2 text-gray-700\">\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-forest-600 mt-1\">‚Ä¢</span>\n                    <span><strong>Trip Participants:</strong> Share contact info with other trip participants for coordination</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "<span className=\"text-forest-600 mt-1\">‚Ä¢</span>\n                    <span><strong>Service Providers:</strong> Payment processors, email services, hosting providers</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-forest-600 mt-1\">‚Ä¢</span>\n                    <span><strong>Legal Requirements:</strong> When required by law, court orders, or legal process</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-forest-600 mt-1\">‚Ä¢</span>\n                    <span><strong>Safety Concerns:</strong> To protect users from harm or illegal activities</span>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </section>\n\n          {/* Data Security */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4\">6. Data Security</h2>\n            <div classN"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "ame=\"bg-green-50 p-6 rounded-xl\">\n              <p className=\"text-gray-700 leading-relaxed mb-4\">\n                We implement appropriate security measures to protect your personal information against \n                unauthorized access, alteration, disclosure, or destruction.\n              </p>\n              <div className=\"grid md:grid-cols-3 gap-4\">\n                <div className=\"text-center\">\n                  <div className=\"w-12 h-12 bg-forest-600 rounded-full flex items-center justify-center mx-auto mb-2\">\n                    <Shield className=\"w-6 h-6 text-white\" />\n                  </div>\n                  <h4 className=\"font-semibold text-forest-800 text-sm\">Encryption</h4>\n                  <p className=\"text-xs text-gray-600\">SSL/TLS encryption for data transmission</p>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"w-12 h-12 bg-forest-600 rounded-full flex items-center justify-center mx-auto mb-2\">"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "<Database className=\"w-6 h-6 text-white\" />\n                  </div>\n                  <h4 className=\"font-semibold text-forest-800 text-sm\">Secure Storage</h4>\n                  <p className=\"text-xs text-gray-600\">Protected servers and databases</p>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"w-12 h-12 bg-forest-600 rounded-full flex items-center justify-center mx-auto mb-2\">\n                    <Eye className=\"w-6 h-6 text-white\" />\n                  </div>\n                  <h4 className=\"font-semibold text-forest-800 text-sm\">Access Controls</h4>\n                  <p className=\"text-xs text-gray-600\">Limited access on need-to-know basis</p>\n                </div>\n              </div>\n            </div>\n          </section>\n\n          {/* Your Rights */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4\">7. Your Privacy Rights</h2>\n            <div className=\"bg-purple-50 p-6 r"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "ounded-xl\">\n              <p className=\"text-gray-700 leading-relaxed mb-4\">\n                You have several rights regarding your personal information:\n              </p>\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <ul className=\"space-y-2 text-gray-700\">\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-purple-600 mt-1\">‚úì</span>\n                    <span><strong>Access:</strong> Request copies of your personal data</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-purple-600 mt-1\">‚úì</span>\n                    <span><strong>Correction:</strong> Request to correct inaccurate information</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-purple-600 mt-1\">‚úì</span>\n                    <span><strong>Deletion:</strong> Request deletion of your data</spa"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "n>\n                  </li>\n                </ul>\n                <ul className=\"space-y-2 text-gray-700\">\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-purple-600 mt-1\">‚úì</span>\n                    <span><strong>Portability:</strong> Request data in a portable format</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-purple-600 mt-1\">‚úì</span>\n                    <span><strong>Object:</strong> Object to certain data processing</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-purple-600 mt-1\">‚úì</span>\n                    <span><strong>Withdraw Consent:</strong> Withdraw consent anytime</span>\n                  </li>\n                </ul>\n              </div>\n              <div className=\"mt-4 p-4 bg-purple-100 rounded-lg\">\n                <p className=\"text-purple-800 text-sm"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "\">\n                  <strong>How to exercise your rights:</strong> Contact us at privacy@trekktribe.com or \n                  use the settings in your account dashboard.\n                </p>\n              </div>\n            </div>\n          </section>\n\n          {/* Children's Privacy */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4\">8. Children's Privacy</h2>\n            <div className=\"bg-red-50 border border-red-200 p-6 rounded-xl\">\n              <p className=\"text-gray-700 leading-relaxed\">\n                Trek Tribe is not intended for children under 13 years of age. We do not knowingly collect \n                personal information from children under 13. If you are a parent or guardian and believe your \n                child has provided us with personal information, please contact us immediately.\n              </p>\n            </div>\n          </section>\n\n          {/* Contact Information */}\n          <section>\n            <h2 class"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "Name=\"text-2xl font-semibold text-forest-800 mb-4\">9. Contact Us</h2>\n            <div className=\"bg-gradient-to-r from-forest-600 to-nature-600 text-white p-6 rounded-xl\">\n              <p className=\"mb-4\">\n                If you have questions about this Privacy Policy or our data practices, please contact us:\n              </p>\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-3\">\n                  <Mail className=\"w-5 h-5\" />\n                  <span>privacy@trekktribe.com</span>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <Phone className=\"w-5 h-5\" />\n                  <span>+1 (555) 123-4567</span>\n                </div>\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"w-5 h-5 mt-0.5\">üìç</div>\n                  <div>\n                    <p>Trek Tribe Privacy Team</p>\n                    <p>123 Adventure Lane, Mountain View, CA 94041</p>"
  },
  {
    "source": "web\\src\\pages\\PrivacyPolicy.tsx",
    "text": "</div>\n                </div>\n              </div>\n            </div>\n          </section>\n\n          {/* Changes to Policy */}\n          <section>\n            <div className=\"border-t border-gray-200 pt-6\">\n              <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">Changes to This Privacy Policy</h3>\n              <p className=\"text-gray-600 text-sm leading-relaxed\">\n                We may update this Privacy Policy from time to time. We will notify you of any changes by \n                posting the new Privacy Policy on this page and updating the \"Last updated\" date. \n                We encourage you to review this Privacy Policy periodically for any changes.\n              </p>\n            </div>\n          </section>\n\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PrivacyPolicy;"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../config/api';\nimport { User } from '../types';\nimport AIAnalyticsDashboard from '../components/AIAnalyticsDashboard';\nimport { useAuth } from '../contexts/AuthContext';\n\n\ninterface Trip {\n  _id: string;\n  title: string;\n  description: string;\n  destination: string;\n  price: number;\n  capacity: number;\n  participants: string[];\n  categories: string[];\n  organizerId: string;\n  status: string;\n}\n\ninterface ProfileProps {\n  user: User;\n}\n\nconst Profile: React.FC<ProfileProps> = ({ user: initialUser }) => {\n  const navigate = useNavigate();\n  const { user, updateUser } = useAuth();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [userTrips, setUserTrips] = useState<Trip[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [editing, setEditing] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [formData, setForm"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "Data] = useState({\n    name: user?.name || '',\n    email: user?.email || '',\n    phone: user?.phone || '',\n    location: user?.location || '',\n    bio: user?.bio || ''\n  });\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  useEffect(() => {\n    const fetchUserTrips = async () => {\n      try {\n        if (!user?.id) {\n          console.log('No user ID available, skipping trip fetch');\n          setLoading(false);\n          return;\n        }\n\n        const response = await api.get('/trips');\n        const allTrips = response.data;\n        \n        if (!Array.isArray(allTrips)) {\n          console.warn('Expected array of trips, got:', typeof allTrips);\n          setUserTrips([]);\n          setLoading(false);\n          return;\n        }\n        \n        // Filter trips based on user role\n        if (user?.role === 'organizer') {\n          // Show trips created by the user\n          const tripsData = allTrips as Trip[];\n          const userTrips = t"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "ripsData.filter((trip: Trip) => {\n            return trip.organizerId === user.id;\n          });\n          console.log(`Found ${userTrips.length} organized trips`);\n          setUserTrips(userTrips);\n        } else {\n          // Show trips the user has joined\n          const tripsData = allTrips as Trip[];\n          const joinedTrips = tripsData.filter((trip: Trip) => {\n            return trip.participants && Array.isArray(trip.participants) && trip.participants.includes(user.id);\n          });\n          console.log(`Found ${joinedTrips.length} joined trips`);\n          setUserTrips(joinedTrips);\n        }\n      } catch (error: any) {\n        console.error('Error fetching user trips:', error);\n        setError('Failed to load your trips. Please try refreshing the page.');\n        setUserTrips([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (user) {\n      fetchUserTrips();\n    } else {\n      setLoading(false);\n    }\n  }, [user]);\n\n  // Update form data when use"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "r changes\n  useEffect(() => {\n    if (user) {\n      setFormData({\n        name: user.name || '',\n        email: user.email || '',\n        phone: user.phone || '',\n        location: user.location || '',\n        bio: user.bio || ''\n      });\n    }\n  }, [user]);\n\n  const handlePhotoUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      setError('Please select an image file');\n      return;\n    }\n\n    // Validate file size (5MB max)\n    if (file.size > 5 * 1024 * 1024) {\n      setError('File size must be less than 5MB');\n      return;\n    }\n\n    setUploading(true);\n    setError('');\n\n    try {\n      const formData = new FormData();\n      formData.append('photo', file);\n\n      const response = await api.post('/files/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      if ((respon"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "se.data as any).success && updateUser) {\n        // Update user context with new photo\n        const updatedUser = {\n          ...user,\n          profilePhoto: (response.data as any).photoUrl\n        };\n        updateUser(updatedUser);\n        setSuccess('Profile photo updated successfully!');\n        \n        // Clear success message after 3 seconds\n        setTimeout(() => setSuccess(''), 3000);\n      }\n    } catch (err: any) {\n      console.error('Photo upload error:', err);\n      setError(err.response?.data?.error || 'Failed to upload photo');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleSaveProfile = async () => {\n    setError('');\n    setSuccess('');\n\n    try {\n      // Basic validation\n      if (!formData.name.trim()) {\n        setError('Name is required');\n        return;\n      }\n      if (!formData.email.trim()) {\n        setError('Email is required');\n        return;\n      }\n\n      const response = await api.patch('/auth/profile', formData);"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "if (updateUser) {\n        const updatedUser = {\n          ...user,\n          ...(response.data as any).user\n        };\n        updateUser(updatedUser);\n      }\n\n      setEditing(false);\n      setSuccess('Profile updated successfully!');\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err: any) {\n      console.error('Profile update error:', err);\n      const errorMessage = err.response?.data?.error || err.response?.data?.message || 'Failed to update profile';\n      setError(errorMessage);\n    }\n  };\n\n  const handleCancelEdit = () => {\n    setEditing(false);\n    setError('');\n    // Reset form data to original values\n    if (user) {\n      setFormData({\n        name: user.name || '',\n        email: user.email || '',\n        phone: user.phone || '',\n        location: user.location || '',\n        bio: user.bio || ''\n      });\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div cla"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "ssName=\"bg-white rounded-lg shadow-md p-8\">\n          <div className=\"mb-8 flex justify-between items-start\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Profile</h1>\n              <p className=\"text-gray-600\">Manage your account and view your trips</p>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              {editing ? (\n                <>\n                  <button\n                    onClick={handleCancelEdit}\n                    className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={handleSaveProfile}\n                    className=\"px-6 py-2 bg-forest-600 text-white rounded-lg hover:bg-forest-700 transition-colors flex items-center gap-2\"\n                  >\n                    üíæ Save Changes\n                  </button>"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "</>\n              ) : (\n                <button\n                  onClick={() => setEditing(true)}\n                  className=\"px-6 py-2 bg-nature-600 text-white rounded-lg hover:bg-nature-700 transition-colors flex items-center gap-2\"\n                >\n                  ‚úèÔ∏è Edit Profile\n                </button>\n              )}\n            </div>\n          </div>\n\n          {/* Success/Error Messages */}\n          {success && (\n            <div className=\"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg\">\n              <p className=\"text-green-800 flex items-center gap-2\">\n                <span className=\"text-green-600\">‚úÖ</span>\n                {success}\n              </p>\n            </div>\n          )}\n          \n          {error && (\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\n              <p className=\"text-red-800 flex items-center gap-2\">\n                <span className=\"text-red-600\">‚ùå</span>\n                {error}"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "</p>\n            </div>\n          )}\n\n          {/* User Info */}\n          <div className=\"bg-gray-50 rounded-lg p-6 mb-8\">\n            <h2 className=\"text-xl font-semibold mb-6\">Account Information</h2>\n            \n            <div className=\"flex flex-col md:flex-row gap-6\">\n              {/* Profile Photo Section */}\n              <div className=\"flex flex-col items-center\">\n                <div className=\"relative\">\n                  <div className=\"w-32 h-32 rounded-full overflow-hidden bg-gradient-to-br from-forest-400 to-nature-500 flex items-center justify-center\">\n                    {user?.profilePhoto ? (\n                      <img \n                        src={user.profilePhoto} \n                        alt=\"Profile\" \n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <span className=\"text-4xl font-bold text-white\">\n                        {user?.name?.charAt(0)?.toUpperCase() || 'U'}"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "</span>\n                    )}\n                  </div>\n                  {uploading && (\n                    <div className=\"absolute inset-0 rounded-full bg-black bg-opacity-50 flex items-center justify-center\">\n                      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white\"></div>\n                    </div>\n                  )}\n                </div>\n                {editing && (\n                  <button\n                    onClick={() => fileInputRef.current?.click()}\n                    disabled={uploading}\n                    className=\"mt-3 px-4 py-2 bg-forest-600 text-white text-sm rounded-lg hover:bg-forest-700 transition-colors disabled:bg-gray-400 flex items-center gap-2\"\n                  >\n                    {uploading ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                        Uploading...\n                      </>"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": ") : (\n                      <>\n                        üì∑ Upload Photo\n                      </>\n                    )}\n                  </button>\n                )}\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handlePhotoUpload}\n                  className=\"hidden\"\n                />\n              </div>\n\n              {/* Form Fields */}\n              <div className=\"flex-1 grid md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Name</label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.name}\n                      onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-forest-500 focus:b"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "order-forest-500\"\n                    />\n                  ) : (\n                    <p className=\"mt-1 text-lg text-gray-900\">{user?.name || 'Not provided'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\n                  {editing ? (\n                    <input\n                      type=\"email\"\n                      value={formData.email}\n                      onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-forest-500 focus:border-forest-500\"\n                    />\n                  ) : (\n                    <p className=\"mt-1 text-lg text-gray-900\">{user?.email || 'Not provided'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Phone</la"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "bel>\n                  {editing ? (\n                    <input\n                      type=\"tel\"\n                      value={formData.phone}\n                      onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-forest-500 focus:border-forest-500\"\n                      placeholder=\"Enter phone number\"\n                    />\n                  ) : (\n                    <p className=\"mt-1 text-lg text-gray-900\">{user?.phone || 'Not provided'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Role</label>\n                  <p className=\"mt-1 text-lg text-gray-900 capitalize flex items-center gap-2\">\n                    {user?.role === 'admin' && 'üëë'}\n                    {user?.role === 'organizer' && 'üèïÔ∏è'}\n                    {user?.role === 'agent' && 'üéØ'}"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "{user?.role === 'traveler' && 'üéí'}\n                    {user?.role || 'Not specified'}\n                  </p>\n                </div>\n                <div className=\"md:col-span-2\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Location</label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.location}\n                      onChange={(e) => setFormData({ ...formData, location: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-forest-500 focus:border-forest-500\"\n                      placeholder=\"Enter your location\"\n                    />\n                  ) : (\n                    <p className=\"mt-1 text-lg text-gray-900\">{user?.location || 'Not provided'}</p>\n                  )}\n                </div>\n                <div className=\"md:col-span-2\">\n                  <label class"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "Name=\"block text-sm font-medium text-gray-700 mb-1\">Bio</label>\n                  {editing ? (\n                    <textarea\n                      value={formData.bio}\n                      onChange={(e) => setFormData({ ...formData, bio: e.target.value })}\n                      rows={3}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-forest-500 focus:border-forest-500\"\n                      placeholder=\"Tell us about yourself...\"\n                    />\n                  ) : (\n                    <p className=\"mt-1 text-lg text-gray-900\">{user?.bio || 'No bio provided'}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* User Trips */}\n          <div>\n            <h2 className=\"text-xl font-semibold mb-4\">\n              {user?.role === 'organizer' ? 'My Created Trips' : 'My Joined Trips'}\n            </h2>\n            \n            {loading ? (\n              <d"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "iv className=\"flex justify-center\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n              </div>\n            ) : userTrips.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <div className=\"text-gray-500 text-lg mb-2\">\n                  {user?.role === 'organizer' ? 'No trips created yet' : 'No trips joined yet'}\n                </div>\n                <p className=\"text-gray-400\">\n                  {user?.role === 'organizer' \n                    ? 'Create your first trip to get started!' \n                    : 'Join some trips to see them here'\n                  }\n                </p>\n              </div>\n            ) : (\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                {userTrips.map((trip) => (\n                  <div key={trip._id} className=\"border border-gray-200 rounded-lg p-6\">\n                    <h3 className=\"text-lg font-semibold mb-2\">{trip.title}</h3>"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "<p className=\"text-gray-600 mb-4 line-clamp-2\">{trip.description}</p>\n                    \n                    <div className=\"space-y-2 mb-4\">\n                      <div className=\"flex items-center text-sm text-gray-500\">\n                        <span className=\"mr-2\">üìç</span>\n                        {trip.destination}\n                      </div>\n                      <div className=\"flex items-center text-sm text-gray-500\">\n                        <span className=\"mr-2\">üë•</span>\n                        {trip.participants.length}/{trip.capacity} participants\n                      </div>\n                      <div className=\"flex items-center text-sm text-gray-500\">\n                        <span className=\"mr-2\">üí∞</span>\n                        ‚Çπ{trip.price} per person\n                      </div>\n                    </div>\n\n                    <div className=\"flex flex-wrap gap-2 mb-4\">\n                      {trip.categories.map((category, index) => ("
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "<span key={index} className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">\n                          {category}\n                        </span>\n                      ))}\n                    </div>\n\n                    <div className=\"flex justify-between items-center\">\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                        trip.status === 'active' \n                          ? 'bg-green-100 text-green-800' \n                          : 'bg-gray-100 text-gray-800'\n                      }`}>\n                        {trip.status}\n                      </span>\n                      {user?.role === 'organizer' && (\n                        <button \n                          onClick={() => navigate(`/edit-trip/${trip._id}`)}\n                          className=\"text-nature-600 hover:text-forest-700 text-sm font-medium flex items-center gap-1 transition-colors\"\n                        >\n                          ‚úèÔ∏è Edit"
  },
  {
    "source": "web\\src\\pages\\Profile.tsx",
    "text": "Trip\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n          \n          {/* AI Travel Analytics */}\n          <div className=\"mt-12\">\n            <h2 className=\"text-xl font-semibold mb-6\">üß† AI Travel Insights</h2>\n            <AIAnalyticsDashboard className=\"w-full\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "import React, { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../config/api';\nimport RoleSelectModal from '../components/RoleSelectModal';\nimport GoogleLoginButton from '../components/GoogleLoginButton';\nimport EmailVerificationModal from '../components/EmailVerificationModal';\n\ninterface RegisterProps {\n  onLogin: (email: string, password?: string) => Promise<{ success: boolean; error?: string }>;\n}\n\nconst Register: React.FC<RegisterProps> = ({ onLogin }) => {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    phoneNumber: '',\n    password: '',\n    confirmPassword: '',\n    role: undefined as undefined | 'traveler' | 'organizer'\n  });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [showRoleModal, setShowRoleModal] = useState(false);"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "const [showEmailVerification, setShowEmailVerification] = useState(false);\n  const [userId, setUserId] = useState('');\n  const [devOtp, setDevOtp] = useState('');\n  const [organizerDraft, setOrganizerDraft] = useState<{\n    experience?: string;\n    yearsOfExperience?: number;\n    specialties?: string[];\n    languages?: string[];\n    bio?: string;\n  } | undefined>(undefined);\n\n  // Redirect if already logged in\n  useEffect(() => {\n    if (user) {\n      navigate('/', { replace: true });\n    }\n  }, [user, navigate]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    // Clear error when user starts typing (indicates they're trying again)\n    if (error) {\n      setError('');\n    }\n    \n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    // Don't clear error immediately - only clear when user starts typing"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "if (formData.password !== formData.confirmPassword) {\n      setError('Passwords do not match');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const response = await api.post('/auth/register', {\n        name: formData.name,\n        email: formData.email,\n        phone: formData.phoneNumber,\n        password: formData.password,\n        role: formData.role || 'traveler'\n      });\n\n      const responseData = response.data as any;\n      \n      // Registration successful, now verify email\n      if (responseData.requiresVerification && responseData.userId) {\n        setUserId(responseData.userId);\n        \n        // Show dev OTP if available\n        if (responseData.otp) {\n          setDevOtp(responseData.otp);\n        }\n        \n        // Show email verification modal\n        setShowEmailVerification(true);\n        setError('');\n        return;\n      }\n    } catch (error: any) {\n      console.log('Registration error details:', error);\n      if (error.response?.data?.erro"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "r) {\n        let errorMessage = '';\n        if (typeof error.response.data.error === 'object') {\n          // Handle Zod validation errors\n          const validationErrors = error.response.data.error.fieldErrors || error.response.data.error;\n          const errorMessages = Object.values(validationErrors).flat();\n          errorMessage = errorMessages.join(', ');\n        } else {\n          errorMessage = error.response.data.error;\n        }\n        \n        // Provide better guidance for common errors\n        if (errorMessage.includes('Email already in use')) {\n          setError('This email is already registered. Try logging in instead, or use a different email address.');\n        } else {\n          setError(errorMessage);\n        }\n      } else if (error.message) {\n        setError(`Connection error: ${error.message}. Please make sure you have a stable internet connection.`);\n      } else {\n        setError('Registration failed. Please check your information and try again.');\n      }"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "} finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEmailVerified = async () => {\n    setShowEmailVerification(false);\n    \n    // Phone verified, now login\n    try {\n      const result = await onLogin(formData.email, formData.password);\n      if (result.success) {\n        // If organizer, push initial organizer basics\n        if ((formData.role === 'organizer') && organizerDraft) {\n          try {\n            await api.put('/profile/me', {\n              organizerProfile: {\n                experience: organizerDraft.experience,\n                yearsOfExperience: organizerDraft.yearsOfExperience,\n                specialties: organizerDraft.specialties,\n                languages: organizerDraft.languages,\n                bio: organizerDraft.bio,\n              }\n            });\n          } catch {}\n        }\n        navigate('/my-profile', { replace: true });\n      } else if (result.error) {\n        setError(result.error);\n        navigate('/login', { replace: true });"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "}\n    } catch (error) {\n      setError('Login failed after verification. Please try logging in.');\n      navigate('/login', { replace: true });\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-forest-50 via-white to-nature-50\">\n      {/* Hero */}\n      <div className=\"bg-gradient-to-r from-forest-700 to-nature-600 text-white\">\n        <div className=\"max-w-6xl mx-auto px-6 py-10 flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl sm:text-4xl font-extrabold tracking-tight\">Join TrekTribe</h1>\n            <p className=\"text-white/90 mt-1\">Create your adventure profile and start exploring curated treks.</p>\n          </div>\n          <div className=\"hidden sm:block text-5xl\">üèîÔ∏è</div>\n        </div>\n      </div>\n\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 pb-12\">\n        <div className=\"grid lg:grid-cols-2 gap-8\">\n          {/* Left: Brand card */}\n          <div className=\"hidden lg:block\">"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "<div className=\"bg-white rounded-2xl shadow-xl p-8 border border-forest-200\">\n              <h3 className=\"text-xl font-bold text-forest-800 mb-4\">Why TrekTribe?</h3>\n              <ul className=\"space-y-3 text-forest-700\">\n                <li>‚Ä¢ Verified organizers and real reviews</li>\n                <li>‚Ä¢ Curated itineraries and transparent pricing</li>\n                <li>‚Ä¢ Secure bookings with support from real agents</li>\n                <li>‚Ä¢ Build your adventure profile and earn badges</li>\n              </ul>\n            </div>\n          </div>\n\n          {/* Right: Form card */}\n          <div className=\"w-full space-y-6 sm:space-y-8\">\n            <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-6 sm:p-8 border border-forest-200\">\n          {/* Google Sign-Up - only show if not logged in */}\n          {!user && (\n            <div className=\"space-y-3 mb-4\">\n              <GoogleLoginButton \n                className=\"w-full\"\n                onError={(m"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "sg) => setError(msg || 'Google sign-in failed')}\n                onSuccess={() => {\n                  setError('');\n                  // After Google sign-in, collect role basics\n                  setShowRoleModal(true);\n                }}\n              />\n              <div className=\"flex items-center gap-2\">\n                <div className=\"h-px bg-forest-200 flex-1\" />\n                <span className=\"text-forest-500 text-sm\">or</span>\n                <div className=\"h-px bg-forest-200 flex-1\" />\n              </div>\n            </div>\n          )}\n\n          <RoleSelectModal \n            open={showRoleModal}\n            onClose={() => setShowRoleModal(false)}\n            onSelect={(role, data) => {\n              setFormData(prev => ({ ...prev, role }));\n              setOrganizerDraft(data);\n              setShowRoleModal(false);\n            }}\n          />\n          \n          <EmailVerificationModal\n            open={showEmailVerification}\n            email={formData.email}"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "userId={userId}\n            onVerified={handleEmailVerified}\n            onClose={() => {\n              setShowEmailVerification(false);\n              setError('Registration cancelled. Please try again.');\n            }}\n            initialDevOtp={devOtp}\n          />\n          <form className=\"space-y-4 sm:space-y-6\" onSubmit={handleSubmit}>\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center gap-2\">\n                <span className=\"text-xl\">‚ö†Ô∏è</span>\n                <span className=\"text-sm\">{error}</span>\n              </div>\n            )}\n          \n            <div className=\"space-y-6\">\n              <div>\n                <label htmlFor=\"name\" className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                  üë§ Full Name\n                </label>\n                <input\n                  id=\"name\"\n                  name=\"name\"\n                  type=\"text"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "\"\n                  autoComplete=\"name\"\n                  required\n                  value={formData.name}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Enter your full name\"\n                />\n              </div>\n              \n              <div>\n                <label htmlFor=\"email\" className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                  üìß Email address\n                </label>\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  required\n                  value={formData.email}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-20"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "0 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Enter your email\"\n                />\n              </div>\n              \n              <div>\n                <label htmlFor=\"phoneNumber\" className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                  üì± Phone Number <span className=\"text-xs text-gray-500\">(Optional)</span>\n                </label>\n                <input\n                  id=\"phoneNumber\"\n                  name=\"phoneNumber\"\n                  type=\"tel\"\n                  autoComplete=\"tel\"\n                  value={formData.phoneNumber}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"+123456"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "7890 (include country code)\"\n                />\n                <p className=\"text-xs text-forest-600 mt-1\">You'll receive an email verification code</p>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                  üéØ Join as\n                </label>\n                <div className=\"flex gap-3\">\n                  <button type=\"button\" onClick={() => setShowRoleModal(true)} className=\"px-4 py-2 border-2 border-forest-200 rounded-xl hover:border-nature-500 hover:bg-nature-50 transition\">Select role</button>\n                  {formData.role && (\n                    <span className=\"px-3 py-2 bg-forest-100 text-forest-700 rounded-xl text-sm\">{formData.role === 'traveler' ? 'Adventurer' : 'Organizer'} selected</span>\n                  )}\n                </div>\n              </div>\n              \n              <div>\n                <label htmlFor=\"password\" className=\"block t"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "ext-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                  üîê Password\n                </label>\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  autoComplete=\"new-password\"\n                  required\n                  value={formData.password}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Create a secure password\"\n                />\n              </div>\n              \n              <div>\n                <label htmlFor=\"confirmPassword\" className=\"block text-sm font-medium text-forest-700 mb-2 flex items-center gap-2\">\n                  ‚úÖ Confirm Password\n                </label>\n                <input\n                  id=\"confirmPassword\""
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "name=\"confirmPassword\"\n                  type=\"password\"\n                  autoComplete=\"new-password\"\n                  required\n                  value={formData.confirmPassword}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-3 border-2 border-forest-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                  placeholder=\"Confirm your password\"\n                />\n              </div>\n            </div>\n\n            <div className=\"pt-2 sm:pt-4\">\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"group relative w-full flex justify-center py-3 sm:py-4 px-4 sm:px-6 border border-transparent text-base sm:text-lg font-bold rounded-xl text-white bg-gradient-to-r from-nature-600 to-forest-600 hover:from-nature-700 hover:to-forest-700 focus:outline-none focus:ring-4 focus:ring-natu"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "re-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl\"\n              >\n                {loading ? (\n                  <span className=\"flex items-center gap-2\">\n                    <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\n                    Creating your adventure profile...\n                  </span>\n                ) : (\n                  <span className=\"flex items-center gap-2\">\n                    üå± Join the Tribe\n                    <svg className=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </span>\n                )}\n              </button>\n            </di"
  },
  {
    "source": "web\\src\\pages\\Register.tsx",
    "text": "v>\n          </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;"
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport ProfileSearch from '../components/ProfileSearch';\nimport api from '../config/api';\n\ninterface ProfileSearchResult {\n  _id: string;\n  name: string;\n  email: string;\n  profilePhoto?: string;\n  role: string;\n  location?: string;\n  bio?: string;\n  uniqueUrl?: string;\n  socialStats: {\n    followersCount: number;\n    followingCount: number;\n    postsCount: number;\n  };\n  isVerified: boolean;\n}\n\nconst SearchPage: React.FC = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const [searchQuery, setSearchQuery] = useState(searchParams.get('q') || '');\n  const [results, setResults] = useState<ProfileSearchResult[]>([]);\n  const [suggestions, setSuggestions] = useState<ProfileSearchResult[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedRole, setSelectedRole] = useState('');\n  const [hasSearched, setHasSearched] ="
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": "useState(false);\n\n  useEffect(() => {\n    loadSuggestions();\n    // If there's a query parameter, perform search on mount\n    if (searchQuery) {\n      searchProfiles(searchQuery);\n    }\n  }, []);\n\n  const loadSuggestions = async () => {\n    try {\n      const response = await api.get('/api/search/suggestions?limit=12&role=organizer');\n      setSuggestions((response.data as any).suggestions);\n    } catch (error) {\n      console.error('Error loading suggestions:', error);\n    }\n  };\n\n  const searchProfiles = async (query: string) => {\n    if (!query.trim() || query.length < 2) {\n      setResults([]);\n      setHasSearched(false);\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const params = new URLSearchParams({\n        q: query,\n        limit: '20',\n        role: 'organizer' // Only search for organizers\n      });\n\n      const response = await api.get(`/api/search/profiles?${params.toString()}`);\n      setResults((response.data as any).profiles);\n      setHasSearched(true);"
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": "} catch (error) {\n      console.error('Error searching profiles:', error);\n      setResults([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    searchProfiles(searchQuery);\n  };\n\n  const handleProfileClick = (profile: ProfileSearchResult) => {\n    navigate(`/profile/${profile._id}`);\n  };\n\n  const handleShareProfile = async (profile: ProfileSearchResult) => {\n    try {\n      const profileUrl = profile.uniqueUrl \n        ? `${window.location.origin}/profile/${profile.uniqueUrl}`\n        : `${window.location.origin}/profile/${profile._id}`;\n      \n      if (navigator.share) {\n        // Use native share API if available\n        await navigator.share({\n          title: `${profile.name}'s Profile - TrekTribe`,\n          text: `Check out ${profile.name}'s profile on TrekTribe!`,\n          url: profileUrl,\n        });\n      } else {\n        // Fallback to clipboard\n        await navigator.clipboard.writeTex"
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": "t(profileUrl);\n        alert('Profile link copied to clipboard!');\n      }\n    } catch (error) {\n      console.error('Error sharing profile:', error);\n      // Fallback to clipboard\n      try {\n        const profileUrl = profile.uniqueUrl \n          ? `${window.location.origin}/profile/${profile.uniqueUrl}`\n          : `${window.location.origin}/profile/${profile._id}`;\n        await navigator.clipboard.writeText(profileUrl);\n        alert('Profile link copied to clipboard!');\n      } catch (clipboardError) {\n        alert('Unable to share profile link');\n      }\n    }\n  };\n\n  const getRoleIcon = (role: string) => {\n    switch (role) {\n      case 'organizer': return 'üó∫Ô∏è';\n      case 'admin': return 'üõ†Ô∏è';\n      case 'agent': return 'üéß';\n      default: return 'üéí';\n    }\n  };\n\n  const getRoleColor = (role: string) => {\n    switch (role) {\n      case 'organizer': return 'text-blue-600 bg-blue-100 border-blue-200';\n      case 'admin': return 'text-red-600 bg-red-100 border-red-200';\n      c"
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": "ase 'agent': return 'text-green-600 bg-green-100 border-green-200';\n      default: return 'text-gray-600 bg-gray-100 border-gray-200';\n    }\n  };\n\n  const renderProfileCard = (profile: ProfileSearchResult) => (\n    <div\n      key={profile._id}\n      onClick={() => handleProfileClick(profile)}\n      className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 hover:border-gray-300\"\n    >\n      <div className=\"flex items-start space-x-4\">\n        {/* Profile Photo */}\n        <div className=\"flex-shrink-0\">\n          <div className=\"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden\">\n            {profile.profilePhoto ? (\n              <img\n                src={profile.profilePhoto}\n                alt={profile.name}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <span className=\"text-2xl\">üë§</span>\n            )}\n          </div>\n        </div>"
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": "{/* Profile Info */}\n        <div className=\"flex-1 min-w-0 overflow-hidden\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <h3 className=\"text-lg font-semibold text-gray-900 truncate flex-1\">\n              {profile.name}\n            </h3>\n            {profile.isVerified && (\n              <span className=\"text-blue-500 flex-shrink-0\" title=\"Verified Profile\">‚úÖ</span>\n            )}\n          </div>\n\n          <div className=\"flex items-center gap-2 mb-3\">\n            <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${getRoleColor(profile.role)}`}>\n              <span className=\"mr-1\">{getRoleIcon(profile.role)}</span>\n              {profile.role}\n            </span>\n            \n            {profile.location && (\n              <span className=\"text-sm text-gray-500 flex items-center truncate max-w-[200px]\">\n                üìç <span className=\"truncate\">{profile.location}</span>\n              </span>"
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": ")}\n          </div>\n\n          {/* Social Stats */}\n          <div className=\"flex items-center gap-4 mb-3 text-sm text-gray-600\">\n            <span className=\"flex items-center gap-1\">\n              <span className=\"font-medium text-blue-600\">{profile.socialStats.followersCount}</span>\n              <span>followers</span>\n            </span>\n            <span className=\"flex items-center gap-1\">\n              <span className=\"font-medium text-green-600\">{profile.socialStats.followingCount}</span>\n              <span>following</span>\n            </span>\n            <span className=\"flex items-center gap-1\">\n              <span className=\"font-medium text-purple-600\">{profile.socialStats.postsCount}</span>\n              <span>posts</span>\n            </span>\n          </div>\n\n          {/* Bio */}\n          {profile.bio && (\n            <p className=\"text-sm text-gray-700 line-clamp-3 overflow-hidden\">\n              {profile.bio.length > 150 ? `${profile.bio.substring(0, 150)}...` : p"
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": "rofile.bio}\n            </p>\n          )}\n\n          {/* Share Profile */}\n          <div className=\"mt-3 pt-3 border-t border-gray-100\">\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                handleShareProfile(profile);\n              }}\n              className=\"text-xs text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1\"\n            >\n              üì§ Share Profile\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-8\">\n      <div className=\"max-w-4xl mx-auto px-4\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Search Organizers</h1>\n          <p className=\"text-gray-600\">Discover amazing trip organizers in the TrekTribe community</p>\n        </div>\n\n        {/* Search Form */}\n        <div className=\"bg-white roun"
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": "ded-2xl shadow-xl p-6 mb-8\">\n          <form onSubmit={handleSearch} className=\"space-y-4\">\n            <div className=\"flex gap-4\">\n              <div className=\"flex-1\">\n                <input\n                  type=\"text\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  placeholder=\"Search organizers by name, location, or bio...\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={loading || searchQuery.trim().length < 2}\n                className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n              >\n                {loading ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4"
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": "w-4 border-b-2 border-white\"></div>\n                    Searching...\n                  </>\n                ) : (\n                  <>\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                    </svg>\n                    Search\n                  </>\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n\n        {/* Results */}\n        {hasSearched ? (\n          <div>\n            <div className=\"mb-6\">\n              <h2 className=\"text-xl font-semibold text-gray-900\">\n                {loading ? 'Searching...' : `Search Results (${results.length})`}\n              </h2>\n              {searchQuery && (\n                <p className=\"text-gray-600\">\n              Results for \"{searchQuery}\"\n                </p>\n              )}\n            </div>"
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": "{results.length > 0 ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {results.map(renderProfileCard)}\n              </div>\n            ) : (\n              <div className=\"text-center py-12\">\n                <div className=\"text-6xl mb-4\">üîç</div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No profiles found</h3>\n                <p className=\"text-gray-600\">\n                  Try adjusting your search terms or browse our suggestions below.\n                </p>\n              </div>\n            )}\n          </div>\n        ) : (\n          /* Suggestions */\n          <div>\n            <div className=\"mb-6\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Popular Organizers</h2>\n              <p className=\"text-gray-600\">Discover some of our most popular trip organizers</p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {sugges"
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": "tions.map(renderProfileCard)}\n            </div>\n          </div>\n        )}\n\n        {/* Quick Actions */}\n        <div className=\"mt-12 text-center\">\n          <div className=\"bg-white rounded-2xl shadow-xl p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Can't find what you're looking for?</h3>\n            <div className=\"flex flex-wrap justify-center gap-4\">\n              <button\n                onClick={() => navigate('/trips')}\n                className=\"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2\"\n              >\n                üåø Browse Trips\n              </button>\n              <button\n                onClick={() => navigate('/ai-showcase')}\n                className=\"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2\"\n              >\n                ü§ñ AI Features\n              </button>\n              <button\n                onClick="
  },
  {
    "source": "web\\src\\pages\\SearchPage.tsx",
    "text": "{() => navigate('/my-profile')}\n                className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\"\n              >\n                üë§ My Profile\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SearchPage;"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "import React from 'react';\nimport { FileText, Users, CreditCard, AlertTriangle, Scale, Globe } from 'lucide-react';\n\nconst TermsConditions: React.FC = () => {\n  const lastUpdated = \"January 9, 2025\";\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50\">\n      <div className=\"max-w-4xl mx-auto px-4 py-12\">\n        {/* Header */}\n        <div className=\"text-center mb-12\">\n          <div className=\"flex items-center justify-center gap-3 mb-4\">\n            <FileText className=\"w-8 h-8 text-forest-600\" />\n            <h1 className=\"text-4xl font-bold text-forest-800\">Terms & Conditions</h1>\n          </div>\n          <p className=\"text-xl text-gray-600 mb-2\">\n            Please read these terms carefully before using Trek Tribe\n          </p>\n          <p className=\"text-sm text-gray-500\">\n            Last updated: {lastUpdated}\n          </p>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"bg-white rounded-2xl shadow-xl p-8 space"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "-y-8\">\n\n          {/* Acceptance */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4 flex items-center gap-2\">\n              <Scale className=\"w-6 h-6\" />\n              1. Acceptance of Terms\n            </h2>\n            <div className=\"bg-blue-50 border-l-4 border-blue-400 p-6\">\n              <p className=\"text-gray-700 leading-relaxed mb-3\">\n                By accessing and using Trek Tribe (\"the Service\"), you accept and agree to be bound by the terms \n                and provision of this agreement. If you do not agree to abide by the above, please do not use this service.\n              </p>\n              <p className=\"text-gray-700 leading-relaxed\">\n                These terms apply to all visitors, users, and others who access or use the service, including \n                trip organizers, participants, and general users.\n              </p>\n            </div>\n          </section>\n\n          {/* Description of Service */}\n          <sect"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "ion>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4 flex items-center gap-2\">\n              <Globe className=\"w-6 h-6\" />\n              2. Description of Service\n            </h2>\n            <div className=\"space-y-4\">\n              <p className=\"text-gray-700 leading-relaxed\">\n                Trek Tribe is an online platform that connects adventure enthusiasts and facilitates outdoor experiences. \n                Our services include:\n              </p>\n              \n              <div className=\"grid md:grid-cols-2 gap-6\">\n                <div className=\"bg-forest-50 p-4 rounded-xl\">\n                  <h4 className=\"font-semibold text-forest-800 mb-2\">For Travelers:</h4>\n                  <ul className=\"text-sm text-gray-700 space-y-1\">\n                    <li>‚Ä¢ Browse and book adventure trips</li>\n                    <li>‚Ä¢ Connect with fellow adventurers</li>\n                    <li>‚Ä¢ Access trip information and itineraries</li>\n                    <li>‚Ä¢ Le"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "ave reviews and ratings</li>\n                  </ul>\n                </div>\n                <div className=\"bg-nature-50 p-4 rounded-xl\">\n                  <h4 className=\"font-semibold text-forest-800 mb-2\">For Organizers:</h4>\n                  <ul className=\"text-sm text-gray-700 space-y-1\">\n                    <li>‚Ä¢ Create and manage adventure trips</li>\n                    <li>‚Ä¢ Communicate with participants</li>\n                    <li>‚Ä¢ Manage bookings and payments</li>\n                    <li>‚Ä¢ Build your organizer profile</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </section>\n\n          {/* User Responsibilities */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4 flex items-center gap-2\">\n              <Users className=\"w-6 h-6\" />\n              3. User Responsibilities\n            </h2>\n            \n            <div className=\"space-y-6\">\n              <div className=\"bg-yellow"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "-50 border border-yellow-200 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-semibold text-forest-800 mb-3\">Account Requirements</h3>\n                <ul className=\"space-y-2 text-gray-700\">\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-yellow-600 mt-1\">‚Ä¢</span>\n                    <span>You must be at least 18 years old to use this service</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-yellow-600 mt-1\">‚Ä¢</span>\n                    <span>Provide accurate, current, and complete information during registration</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-yellow-600 mt-1\">‚Ä¢</span>\n                    <span>Maintain and update your account information</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "<span className=\"text-yellow-600 mt-1\">‚Ä¢</span>\n                    <span>Keep your login credentials secure and confidential</span>\n                  </li>\n                </ul>\n              </div>\n\n              <div className=\"bg-red-50 border border-red-200 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-semibold text-red-800 mb-3\">Prohibited Activities</h3>\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <ul className=\"space-y-2 text-gray-700 text-sm\">\n                    <li className=\"flex items-start gap-2\">\n                      <span className=\"text-red-600 mt-1\">‚úó</span>\n                      <span>Fraudulent or illegal activities</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <span className=\"text-red-600 mt-1\">‚úó</span>\n                      <span>Harassment or threatening behavior</span>\n                    </li>\n                    <li className=\"flex items-st"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "art gap-2\">\n                      <span className=\"text-red-600 mt-1\">‚úó</span>\n                      <span>Spam or unauthorized advertising</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <span className=\"text-red-600 mt-1\">‚úó</span>\n                      <span>Violating intellectual property rights</span>\n                    </li>\n                  </ul>\n                  <ul className=\"space-y-2 text-gray-700 text-sm\">\n                    <li className=\"flex items-start gap-2\">\n                      <span className=\"text-red-600 mt-1\">‚úó</span>\n                      <span>Impersonating others</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <span className=\"text-red-600 mt-1\">‚úó</span>\n                      <span>Spreading malware or viruses</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "span className=\"text-red-600 mt-1\">‚úó</span>\n                      <span>Circumventing security measures</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <span className=\"text-red-600 mt-1\">‚úó</span>\n                      <span>Creating fake accounts or reviews</span>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </section>\n\n          {/* Trip Booking & Payments */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4 flex items-center gap-2\">\n              <CreditCard className=\"w-6 h-6\" />\n              4. Trip Booking & Payments\n            </h2>\n            \n            <div className=\"space-y-6\">\n              <div className=\"bg-green-50 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-semibold text-forest-800 mb-3\">Booking Process</h3>\n                <ul className=\"space-y-2 text-gray-700\">"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "<li className=\"flex items-start gap-2\">\n                    <span className=\"text-green-600 mt-1\">‚Ä¢</span>\n                    <span>All bookings are subject to availability and organizer approval</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-green-600 mt-1\">‚Ä¢</span>\n                    <span>Payment confirms your booking and agreement to trip terms</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-green-600 mt-1\">‚Ä¢</span>\n                    <span>Trip details, including dates and itineraries, may be subject to change</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-green-600 mt-1\">‚Ä¢</span>\n                    <span>Participants must meet any specified requirements or restrictions</span>\n                  </li>"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "</ul>\n              </div>\n\n              <div className=\"bg-blue-50 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-semibold text-forest-800 mb-3\">Cancellation & Refunds</h3>\n                <div className=\"space-y-3\">\n                  <p className=\"text-gray-700 text-sm\">\n                    Cancellation policies vary by trip and are set by individual organizers. \n                    Common policies include:\n                  </p>\n                  <div className=\"grid md:grid-cols-3 gap-4\">\n                    <div className=\"border border-blue-200 p-3 rounded-lg\">\n                      <h4 className=\"font-semibold text-blue-800 text-sm mb-1\">Flexible</h4>\n                      <p className=\"text-xs text-gray-600\">Full refund 24h before trip</p>\n                    </div>\n                    <div className=\"border border-blue-200 p-3 rounded-lg\">\n                      <h4 className=\"font-semibold text-blue-800 text-sm mb-1\">Moderate</h4>\n                      <p cl"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "assName=\"text-xs text-gray-600\">50% refund 3+ days before</p>\n                    </div>\n                    <div className=\"border border-blue-200 p-3 rounded-lg\">\n                      <h4 className=\"font-semibold text-blue-800 text-sm mb-1\">Strict</h4>\n                      <p className=\"text-xs text-gray-600\">No refund after booking</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </section>\n\n          {/* Safety & Liability */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4 flex items-center gap-2\">\n              <AlertTriangle className=\"w-6 h-6\" />\n              5. Safety & Liability\n            </h2>\n            \n            <div className=\"space-y-4\">\n              <div className=\"bg-orange-50 border-l-4 border-orange-400 p-6\">\n                <h3 className=\"text-lg font-semibold text-orange-800 mb-3\">‚ö†Ô∏è Important Safety Notice</h3>\n                <p cla"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "ssName=\"text-gray-700 leading-relaxed mb-3\">\n                  Adventure activities involve inherent risks. By participating in trips organized through Trek Tribe, \n                  you acknowledge and assume these risks. We strongly recommend:\n                </p>\n                <ul className=\"space-y-1 text-gray-700 text-sm\">\n                  <li>‚Ä¢ Obtaining appropriate travel and activity insurance</li>\n                  <li>‚Ä¢ Ensuring you meet physical fitness requirements</li>\n                  <li>‚Ä¢ Following all safety instructions provided by organizers</li>\n                  <li>‚Ä¢ Disclosing any medical conditions or limitations</li>\n                </ul>\n              </div>\n\n              <div className=\"bg-gray-50 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">Limitation of Liability</h3>\n                <p className=\"text-gray-700 leading-relaxed text-sm\">\n                  Trek Tribe acts as a platform connecting users and is"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "not responsible for the actual provision of \n                  trip services. Trip organizers are independent operators responsible for their own activities. \n                  Trek Tribe's liability is limited to the maximum extent permitted by law.\n                </p>\n              </div>\n            </div>\n          </section>\n\n          {/* Organizer Responsibilities */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4\">6. Organizer Responsibilities</h2>\n            \n            <div className=\"bg-purple-50 p-6 rounded-xl\">\n              <h3 className=\"text-lg font-semibold text-forest-800 mb-4\">If you organize trips, you must:</h3>\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                <div>\n                  <h4 className=\"font-semibold text-purple-800 mb-2\">Legal & Safety:</h4>\n                  <ul className=\"space-y-1 text-gray-700 text-sm\">\n                    <li>‚Ä¢ Hold necessary licenses and permits</li>"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "<li>‚Ä¢ Maintain appropriate insurance coverage</li>\n                    <li>‚Ä¢ Comply with local laws and regulations</li>\n                    <li>‚Ä¢ Ensure participant safety at all times</li>\n                  </ul>\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-purple-800 mb-2\">Service Quality:</h4>\n                  <ul className=\"space-y-1 text-gray-700 text-sm\">\n                    <li>‚Ä¢ Provide accurate trip descriptions</li>\n                    <li>‚Ä¢ Deliver services as advertised</li>\n                    <li>‚Ä¢ Communicate clearly with participants</li>\n                    <li>‚Ä¢ Handle refunds according to your policy</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </section>\n\n          {/* Intellectual Property */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4\">7. Intellectual Property</h2>\n            <div className=\"spa"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "ce-y-4\">\n              <div className=\"bg-indigo-50 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-semibold text-forest-800 mb-3\">Platform Content</h3>\n                <p className=\"text-gray-700 leading-relaxed text-sm mb-3\">\n                  All content on Trek Tribe, including but not limited to text, graphics, logos, images, and software, \n                  is the property of Trek Tribe or its licensors and is protected by copyright and other intellectual property laws.\n                </p>\n              </div>\n\n              <div className=\"bg-indigo-50 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-semibold text-forest-800 mb-3\">User Content</h3>\n                <p className=\"text-gray-700 leading-relaxed text-sm\">\n                  By uploading content (photos, reviews, trip descriptions), you grant Trek Tribe a worldwide, \n                  non-exclusive, royalty-free license to use, display, and distribute your content in connection with the servic"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "e.\n                </p>\n              </div>\n            </div>\n          </section>\n\n          {/* Privacy */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4\">8. Privacy</h2>\n            <div className=\"bg-gradient-to-r from-forest-100 to-nature-100 p-6 rounded-xl\">\n              <p className=\"text-gray-700 leading-relaxed\">\n                Your privacy is important to us. Please review our{' '}\n                <a href=\"/privacy-policy\" className=\"text-forest-600 hover:underline font-semibold\">\n                  Privacy Policy\n                </a>, which also governs your use of the service, to understand our practices regarding \n                the collection and use of your personal information.\n              </p>\n            </div>\n          </section>\n\n          {/* Termination */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4\">9. Termination</h2>\n            <div className=\"space-y-4\">"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "<p className=\"text-gray-700 leading-relaxed\">\n                We reserve the right to terminate or suspend your account and access to the service immediately, \n                without prior notice, for conduct that we believe violates these terms or is harmful to other users, \n                us, or third parties.\n              </p>\n              \n              <div className=\"bg-red-50 border border-red-200 p-4 rounded-xl\">\n                <h4 className=\"font-semibold text-red-800 mb-2\">Reasons for termination may include:</h4>\n                <ul className=\"text-red-700 text-sm space-y-1\">\n                  <li>‚Ä¢ Violation of terms and conditions</li>\n                  <li>‚Ä¢ Fraudulent or illegal activity</li>\n                  <li>‚Ä¢ Harassment of other users</li>\n                  <li>‚Ä¢ Multiple complaints against your account</li>\n                </ul>\n              </div>\n            </div>\n          </section>\n\n          {/* Changes to Terms */}\n          <section>"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "<h2 className=\"text-2xl font-semibold text-forest-800 mb-4\">10. Changes to Terms</h2>\n            <div className=\"bg-blue-50 p-6 rounded-xl\">\n              <p className=\"text-gray-700 leading-relaxed mb-3\">\n                We reserve the right to modify these terms at any time. We will notify users of significant changes \n                via email or by posting a notice on our website. Your continued use of the service after such \n                modifications constitutes acceptance of the updated terms.\n              </p>\n              <p className=\"text-blue-700 text-sm font-semibold\">\n                We recommend reviewing these terms periodically for any changes.\n              </p>\n            </div>\n          </section>\n\n          {/* Governing Law */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4\">11. Governing Law</h2>\n            <div className=\"bg-gray-50 p-6 rounded-xl\">\n              <p className=\"text-gray-700 leading-relax"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "ed\">\n                These terms shall be interpreted and governed in accordance with the laws of California, United States, \n                without regard to conflict of law provisions. Any disputes arising from these terms or your use of \n                the service shall be resolved in the courts of California.\n              </p>\n            </div>\n          </section>\n\n          {/* Contact Information */}\n          <section>\n            <h2 className=\"text-2xl font-semibold text-forest-800 mb-4\">12. Contact Information</h2>\n            <div className=\"bg-gradient-to-r from-forest-600 to-nature-600 text-white p-6 rounded-xl\">\n              <p className=\"mb-4\">\n                If you have any questions about these Terms and Conditions, please contact us:\n              </p>\n              <div className=\"space-y-2 text-sm\">\n                <div>üìß Email: legal@trekktribe.com</div>\n                <div>üìû Phone: +1 (555) 123-4567</div>\n                <div>üìç Address: 123 Adventure Lane,"
  },
  {
    "source": "web\\src\\pages\\TermsConditions.tsx",
    "text": "Mountain View, CA 94041</div>\n              </div>\n            </div>\n          </section>\n\n          {/* Agreement */}\n          <section>\n            <div className=\"border-t border-gray-200 pt-6\">\n              <div className=\"bg-forest-50 p-6 rounded-xl text-center\">\n                <p className=\"text-forest-800 font-semibold mb-2\">\n                  By using Trek Tribe, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions.\n                </p>\n                <p className=\"text-forest-600 text-sm\">\n                  These terms constitute the entire agreement between you and Trek Tribe regarding your use of the service.\n                </p>\n              </div>\n            </div>\n          </section>\n\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TermsConditions;"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport api from '../config/api';\nimport JoinTripModal from '../components/JoinTripModal';\nimport ReviewModal from '../components/ReviewModal';\nimport ReviewsList from '../components/ReviewsList';\nimport { User } from '../types';\nimport { getTripShareUrl } from '../utils/config';\n\ninterface Trip {\n  _id: string;\n  title: string;\n  description: string;\n  destination: string;\n  price: number;\n  capacity: number;\n  minimumAge?: number;\n  participants: string[];\n  categories: string[];\n  images: string[];\n  coverImage?: string;\n  organizerId: string;\n  status: string;\n  startDate: string;\n  endDate: string;\n  itinerary?: string;\n  itineraryPdf?: string;\n  schedule?: Array<{\n    day: number;\n    title: string;\n    activities: string[];\n  }>;\n  difficultyLevel?: string;\n  includedItems?: string[];\n  requirements?: string[];\n  location?: {\n    coordinates: [number, number];\n  };\n}\n\ninterface"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "TripDetailsProps {\n  user: User | null;\n}\n\nconst TripDetails: React.FC<TripDetailsProps> = ({ user }) => {\n  const { id } = useParams<{ id: string }>();\n  const [trip, setTrip] = useState<Trip | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showJoinModal, setShowJoinModal] = useState(false);\n  const [showReviewModal, setShowReviewModal] = useState(false);\n  const [selectedImageIndex, setSelectedImageIndex] = useState(0);\n  const [copySuccess, setCopySuccess] = useState(false);\n\n  useEffect(() => {\n    const fetchTrip = async () => {\n      if (!id) return;\n      \n      try {\n        const response = await api.get(`/trips/${id}`);\n        const tripData = response.data as Trip;\n        setTrip(tripData);\n      } catch (error: any) {\n        console.error('Error fetching trip:', error);\n        setError('Failed to load trip details');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchTrip();\n  }, [id]);"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "const handleJoinSuccess = async () => {\n    // Refresh trip data\n    if (id) {\n      const response = await api.get(`/trips/${id}`);\n      const tripData = response.data as Trip;\n      setTrip(tripData);\n    }\n  };\n\n  const handleReviewSuccess = () => {\n    // Reviews will refresh automatically via ReviewsList component\n    alert('Thank you for your review!');\n  };\n\n  const isParticipant = trip && user && trip.participants.includes(user.id);\n  const isOrganizer = trip && user && trip.organizerId === user.id;\n  const canJoin = trip && user && !isParticipant && !isOrganizer && trip.participants.length < trip.capacity;\n  const hasEnded = trip && new Date(trip.endDate) < new Date();\n  const canReview = isParticipant && !isOrganizer && !!hasEnded; // Only participants after trip end\n\n  const handleShareTrip = async () => {\n    const shareUrl = getTripShareUrl(trip!._id);\n    \n    try {\n      await navigator.clipboard.writeText(shareUrl);\n      setCopySuccess(true);\n      setTimeout(() ="
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "> setCopySuccess(false), 2000);\n    } catch (err) {\n      // Fallback for browsers that don't support clipboard API\n      const textArea = document.createElement('textarea');\n      textArea.value = shareUrl;\n      document.body.appendChild(textArea);\n      textArea.select();\n      document.execCommand('copy');\n      document.body.removeChild(textArea);\n      setCopySuccess(true);\n      setTimeout(() => setCopySuccess(false), 2000);\n    }\n  };\n\n  const getDifficultyColor = (level?: string) => {\n    switch (level) {\n      case 'beginner': return 'text-green-600 bg-green-100';\n      case 'intermediate': return 'text-yellow-600 bg-yellow-100';\n      case 'advanced': return 'text-red-600 bg-red-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const getDifficultyIcon = (level?: string) => {\n    switch (level) {\n      case 'beginner': return 'üü¢';\n      case 'intermediate': return 'üü°';\n      case 'advanced': return 'üî¥';\n      default: return '‚ö™';\n    }\n  };\n\n  const forma"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "tDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  const getDaysDifference = (startDate: string, endDate: string) => {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const diffTime = Math.abs(end.getTime() - start.getTime());\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"animate-pulse space-y-8\">\n            <div className=\"h-96 bg-gray-200 rounded-2xl\"></div>\n            <div className=\"grid lg:grid-cols-3 gap-8\">\n              <div className=\"lg:col-span-2 space-y-6\">\n                <div className=\"h-8 bg-gray-200 rounded w-3/4\"></div>\n                <di"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "v className=\"h-32 bg-gray-200 rounded\"></div>\n              </div>\n              <div className=\"space-y-4\">\n                <div className=\"h-64 bg-gray-200 rounded\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !trip) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl mb-4\">üèîÔ∏è</div>\n          <h2 className=\"text-2xl font-bold text-forest-800 mb-4\">Trip Not Found</h2>\n          <p className=\"text-forest-600 mb-6\">{error || 'This adventure seems to have gone missing!'}</p>\n          <Link\n            to=\"/trips\"\n            className=\"px-6 py-3 bg-gradient-to-r from-forest-600 to-nature-600 text-white rounded-xl font-semibold hover:from-forest-700 hover:to-nature-700 transition-all duration-300\"\n          >\n            Browse Other Adventures\n          </Link>"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "</div>\n      </div>\n    );\n  }\n\n  const tripImages = trip.images && trip.images.length > 0 ? trip.images : [];\n  const duration = getDaysDifference(trip.startDate, trip.endDate);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Image Gallery */}\n        <div className=\"mb-8\">\n          {tripImages.length > 0 ? (\n            <div className=\"space-y-4\">\n              <div className=\"relative h-96 rounded-2xl overflow-hidden shadow-2xl\">\n                <img\n                  src={trip.coverImage || tripImages[selectedImageIndex]}\n                  alt={trip.title}\n                  className=\"w-full h-full object-cover\"\n                  onError={(e) => {\n                    const target = e.target as HTMLImageElement;\n                    target.src = `https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=2071&h=600&fit=crop`;\n                  }}"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "/>\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent\"></div>\n                <div className=\"absolute bottom-6 left-6 text-white\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    {trip.categories.map((category, index) => (\n                      <span key={index} className=\"px-2 py-1 bg-white/20 backdrop-blur-sm rounded-full text-xs font-medium\">\n                        {category}\n                      </span>\n                    ))}\n                  </div>\n                  <h1 className=\"text-4xl font-bold mb-2\">{trip.title}</h1>\n                  <p className=\"text-xl opacity-90\">üìç {trip.destination}</p>\n                </div>\n                <div className=\"absolute top-6 right-6\">\n                  <button\n                    onClick={handleShareTrip}\n                    className=\"bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white p-3 rounded-full transition-all duration-"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "300 group\"\n                    title=\"Share this adventure\"\n                  >\n                    {copySuccess ? (\n                      <svg className=\"w-5 h-5 text-green-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                      </svg>\n                    ) : (\n                      <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path d=\"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\" />\n                      </svg>\n                    )}\n                  </button>\n                </div>\n              </div>\n              \n              {tripImages.length > 1 && (\n                <div className=\"flex space-x-2 overflow-x-auto pb-2\">"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "{tripImages.map((image, index) => (\n                    <button\n                      key={index}\n                      onClick={() => setSelectedImageIndex(index)}\n                      className={`flex-shrink-0 w-24 h-16 rounded-lg overflow-hidden border-2 transition-all ${\n                        selectedImageIndex === index ? 'border-nature-500 ring-2 ring-nature-200' : 'border-gray-200'\n                      }`}\n                    >\n                      <img\n                        src={image}\n                        alt={`${trip.title} ${index + 1}`}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"h-96 bg-gradient-to-br from-forest-400 to-nature-500 rounded-2xl flex items-center justify-center text-white shadow-2xl\">\n              <div className=\"text-center\">"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "<div className=\"text-8xl mb-4\">üèîÔ∏è</div>\n                <h1 className=\"text-4xl font-bold mb-2\">{trip.title}</h1>\n                <p className=\"text-xl\">üìç {trip.destination}</p>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"grid lg:grid-cols-3 gap-8\">\n          {/* Main Content */}\n          <div className=\"lg:col-span-2 space-y-8\">\n            {/* Trip Info */}\n            <div className=\"bg-white rounded-2xl p-8 shadow-lg border border-forest-200\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <div className=\"flex items-center space-x-4\">\n                  <h2 className=\"text-2xl font-bold text-forest-800\">Adventure Details</h2>\n                  {trip.difficultyLevel && (\n                    <span className={`px-3 py-1 rounded-full text-sm font-medium ${getDifficultyColor(trip.difficultyLevel)}`}>\n                      {getDifficultyIcon(trip.difficultyLevel)} {trip.difficultyLevel.charAt(0).toUp"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "perCase() + trip.difficultyLevel.slice(1)}\n                    </span>\n                  )}\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"text-3xl font-bold text-nature-600\">‚Çπ{trip.price.toLocaleString()}</div>\n                  <div className=\"text-sm text-forest-600\">per person</div>\n                </div>\n              </div>\n\n              <div className=\"grid md:grid-cols-2 gap-6 mb-6\">\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center text-forest-700\">\n                    <span className=\"mr-3 text-xl\">üìÖ</span>\n                    <div>\n                      <div className=\"font-semibold\">Duration</div>\n                      <div className=\"text-sm text-forest-600\">{duration} days, {duration - 1} nights</div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center text-forest-700\">\n                    <span className=\"mr-3 text-xl\">"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "üóìÔ∏è</span>\n                    <div>\n                      <div className=\"font-semibold\">Start Date</div>\n                      <div className=\"text-sm text-forest-600\">{formatDate(trip.startDate)}</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center text-forest-700\">\n                    <span className=\"mr-3 text-xl\">üë•</span>\n                    <div>\n                      <div className=\"font-semibold\">Group Size</div>\n                      <div className=\"text-sm text-forest-600\">{trip.participants.length}/{trip.capacity} adventurers</div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center text-forest-700\">\n                    <span className=\"mr-3 text-xl\">üèÅ</span>\n                    <div>\n                      <div className=\"font-semibold\">End Date</div>\n                      <div className=\"text-sm text-"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "forest-600\">{formatDate(trip.endDate)}</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"border-t border-forest-100 pt-6\">\n                <h3 className=\"text-lg font-semibold text-forest-800 mb-3\">About This Adventure</h3>\n                <p className=\"text-forest-700 leading-relaxed\">{trip.description}</p>\n              </div>\n            </div>\n\n            {/* What's Included & Requirements */}\n            {(trip.includedItems || trip.requirements) && (\n              <div className=\"bg-white rounded-2xl p-8 shadow-lg border border-forest-200\">\n                <div className=\"grid md:grid-cols-2 gap-8\">\n                  {trip.includedItems && trip.includedItems.length > 0 && (\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-forest-800 mb-4 flex items-center\">\n                        <span className=\"mr-2\">‚úÖ</span>\n                        What's Included"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "</h3>\n                      <ul className=\"space-y-2\">\n                        {trip.includedItems.map((item, index) => (\n                          <li key={index} className=\"flex items-center text-forest-700\">\n                            <span className=\"mr-2 text-nature-500\">‚Ä¢</span>\n                            {item}\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n                  \n                  {trip.requirements && trip.requirements.length > 0 && (\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-forest-800 mb-4 flex items-center\">\n                        <span className=\"mr-2\">üìã</span>\n                        Requirements\n                      </h3>\n                      <ul className=\"space-y-2\">\n                        {trip.requirements.map((req, index) => (\n                          <li key={index} className=\"flex items-center"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "text-forest-700\">\n                            <span className=\"mr-2 text-amber-500\">‚Ä¢</span>\n                            {req}\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Itinerary & Schedule */}\n            {(trip.itinerary || (trip.schedule && trip.schedule.length > 0) || trip.itineraryPdf) && (\n              <div className=\"bg-white rounded-2xl p-8 shadow-lg border border-forest-200\">\n                <div className=\"flex justify-between items-center mb-6\">\n                  <h3 className=\"text-lg font-semibold text-forest-800 flex items-center\">\n                    <span className=\"mr-2\">üó∫Ô∏è</span>\n                    Adventure Itinerary\n                  </h3>\n                  {trip.itineraryPdf && (\n                    <a\n                      href={trip.itineraryPdf}\n                      target=\"_blank\""
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "rel=\"noopener noreferrer\"\n                      className=\"inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200 font-medium\"\n                    >\n                      <svg className=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                      </svg>\n                      Download PDF Itinerary\n                    </a>\n                  )}\n                </div>\n                \n                {trip.schedule && trip.schedule.length > 0 ? (\n                  <div className=\"space-y-6\">\n                    {trip.schedule.map((day, index) => (\n                      <div key={index} className=\"flex space-x-4\">\n                        <div classN"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "ame=\"flex-shrink-0\">\n                          <div className=\"w-10 h-10 bg-gradient-to-br from-nature-500 to-forest-600 rounded-full flex items-center justify-center text-white font-bold\">\n                            {day.day}\n                          </div>\n                        </div>\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-semibold text-forest-800 mb-2\">{day.title}</h4>\n                          {day.activities && day.activities.length > 0 && (\n                            <ul className=\"space-y-1\">\n                              {day.activities.map((activity, actIndex) => (\n                                <li key={actIndex} className=\"text-forest-600 text-sm flex items-start\">\n                                  <span className=\"mr-2 text-nature-500 mt-1\">‚Üí</span>\n                                  {activity}\n                                </li>\n                              ))}\n                            </ul>"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": ")}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"text-forest-700 leading-relaxed whitespace-pre-line\">\n                    {trip.itinerary}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Reviews Section */}\n            <div className=\"bg-white rounded-2xl p-8 shadow-lg border border-forest-200\">\n              <ReviewsList\n                tripId={trip._id}\n                allowReview={!!canReview}\n                currentUserId={user?.email}\n                onWriteReview={() => setShowReviewModal(true)}\n              />\n            </div>\n          </div>\n\n          {/* Sidebar */}\n          <div className=\"space-y-6\">\n            {/* Booking Card */}\n            <div className=\"bg-white rounded-2xl p-6 shadow-lg border border-forest-200 sticky top-4\">\n              <div className=\"text-center mb-6\">"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "<div className=\"text-3xl font-bold text-nature-600 mb-1\">‚Çπ{trip.price.toLocaleString()}</div>\n                <div className=\"text-sm text-forest-600\">per adventurer</div>\n              </div>\n\n              <div className=\"space-y-4 mb-6\">\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-forest-600\">Available spots:</span>\n                  <span className=\"font-semibold text-forest-800\">{trip.capacity - trip.participants.length}/{trip.capacity}</span>\n                </div>\n                {trip.minimumAge && (\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-forest-600\">Minimum age:</span>\n                    <span className=\"font-semibold text-forest-800\">{trip.minimumAge} years</span>\n                  </div>\n                )}\n                <div className=\"w-full bg-forest-100 rounded-full h-2\">\n                  <div\n                    className=\"bg-nature-500"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "h-2 rounded-full transition-all duration-500\"\n                    style={{ width: `${(trip.participants.length / trip.capacity) * 100}%` }}\n                  ></div>\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                {canJoin ? (\n                  <button\n                    onClick={() => setShowJoinModal(true)}\n                    className=\"w-full bg-gradient-to-r from-forest-600 to-nature-600 hover:from-forest-700 hover:to-nature-700 text-white py-4 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg\"\n                  >\n                    üåü Join This Adventure\n                  </button>\n                ) : isParticipant ? (\n                  <div className=\"text-center py-4\">\n                    <div className=\"text-nature-600 font-semibold mb-2\">‚úÖ You're signed up!</div>\n                    <div className=\"text-sm text-forest-600\">Get ready for an amazing adventure</div>"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "</div>\n                ) : isOrganizer ? (\n                  <div className=\"text-center py-4\">\n                    <div className=\"text-forest-600 font-semibold mb-2\">üó∫Ô∏è You're organizing this trip</div>\n                    <Link\n                      to={`/edit-trip/${trip._id}`}\n                      className=\"inline-block px-4 py-2 bg-forest-600 text-white rounded-lg hover:bg-forest-700 transition-colors\"\n                    >\n                      Edit Trip\n                    </Link>\n                  </div>\n                ) : trip.participants.length >= trip.capacity ? (\n                  <div className=\"text-center py-4 text-amber-600 font-semibold\">\n                    üéÜ This adventure is fully booked\n                  </div>\n                ) : !user ? (\n                  <div className=\"text-center\">\n                    <Link\n                      to=\"/login\"\n                      className=\"w-full inline-block bg-gradient-to-r from-forest-600 to-nature-600 hover:from-fore"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "st-700 hover:to-nature-700 text-white py-4 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg text-center\"\n                    >\n                      Login to Join Adventure\n                    </Link>\n                  </div>\n                ) : (\n                  <div className=\"text-center py-4 text-forest-600\">\n                    Unable to join this adventure\n                  </div>\n                )}\n\n                <button\n                  onClick={handleShareTrip}\n                  className=\"w-full mt-2 bg-forest-100 hover:bg-forest-200 text-forest-700 py-2 rounded-lg font-medium transition-all duration-300 flex items-center justify-center space-x-2\"\n                >\n                  {copySuccess ? (\n                    <>\n                      <svg className=\"w-4 h-4 text-green-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                      </svg>\n                      <span className=\"text-green-600\">Link Copied!</span>\n                    </>\n                  ) : (\n                    <>\n                      <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path d=\"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\" />\n                      </svg>\n                      <span>Share Adventure</span>\n                    </>\n                  )}\n                </button>\n                <div className=\"text-center text-xs text-forest-500 pt-2\">\n                  Free cancellation up to 7 days before start date\n                </div>\n              </div>\n            </div>\n\n            {/* Organizer Info */}\n            <div className=\"bg-white rounded-2xl p-6 shadow-lg border border-"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "forest-200\">\n              <h3 className=\"text-lg font-semibold text-forest-800 mb-4\">Adventure Guide</h3>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-12 h-12 bg-gradient-to-br from-forest-400 to-nature-500 rounded-full flex items-center justify-center text-white font-bold text-lg\">\n                  O\n                </div>\n                <div>\n                  <div className=\"font-semibold text-forest-800\">Trek Organizer</div>\n                  <div className=\"text-sm text-forest-600\">Adventure Leader</div>\n                </div>\n              </div>\n              <div className=\"mt-4 text-sm text-forest-600\">\n                Experienced guide with multiple successful expeditions\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Modals */}\n      {trip && showJoinModal && user && (\n        <JoinTripModal\n          trip={trip}\n          user={user}\n          isOpen={showJoinModal}"
  },
  {
    "source": "web\\src\\pages\\TripDetails.tsx",
    "text": "onClose={() => setShowJoinModal(false)}\n          onSuccess={handleJoinSuccess}\n        />\n      )}\n\n      {trip && showReviewModal && user && (\n        <ReviewModal\n          tripId={trip._id}\n          tripTitle={trip.title}\n          user={user}\n          isOpen={showReviewModal}\n          onClose={() => setShowReviewModal(false)}\n          onSuccess={handleReviewSuccess}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default TripDetails;"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Slider, Filter, Calendar, MapPin, DollarSign, ArrowUpDown } from 'lucide-react';\nimport api from '../config/api';\nimport JoinTripModal from '../components/JoinTripModal';\nimport AISmartSearch from '../components/AISmartSearch';\nimport AIRecommendations from '../components/AIRecommendations';\nimport SaveTripButton from '../components/SaveTripButton';\nimport SocialShareButtons from '../components/SocialShareButtons';\nimport { User } from '../types';\nimport { getTripShareUrl } from '../utils/config';\n\ninterface Trip {\n  _id: string;\n  title: string;\n  description: string;\n  destination: string;\n  price: number;\n  capacity: number;\n  participants: string[];\n  categories: string[];\n  images: string[];\n  coverImage?: string;\n  organizerId: string;\n  status: string;\n  startDate: string;\n  endDate: string;\n}\n\ninterface TripsProps {\n  user: User | null;\n}\n\nconst Trips: React.FC<TripsProps> = ({"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "user }) => {\n  const [trips, setTrips] = useState<Trip[]>([]);\n  const [filteredTrips, setFilteredTrips] = useState<Trip[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [selectedTrip, setSelectedTrip] = useState<Trip | null>(null);\n  const [showJoinModal, setShowJoinModal] = useState(false);\n  const [copySuccess, setCopySuccess] = useState<{[key: string]: boolean}>({});\n  const [showFilters, setShowFilters] = useState(false);\n  \n  // Advanced Filters\n  const [priceRange, setPriceRange] = useState<[number, number]>([0, 100000]);\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [destination, setDestination] = useState('');\n  const [sortBy, setSortBy] = useState<'price' | 'date' | 'popularity' | 'newest'>('newest');\n  const [difficulty, setDifficulty] = useState<string>('');\n\n  const categories = ['Adven"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "ture', 'Cultural', 'Beach', 'Mountain', 'City', 'Nature'];\n  const difficulties = ['Easy', 'Moderate', 'Difficult', 'Extreme'];\n\n  useEffect(() => {\n    const fetchTrips = async () => {\n      try {\n        const params = new URLSearchParams();\n        if (searchTerm) params.append('search', searchTerm);\n        if (selectedCategory) params.append('category', selectedCategory);\n        \n        console.log('üîç Fetching trips with params:', params.toString());\n        \n        const response = await api.get(`/trips?${params.toString()}`);\n        const tripsData = response.data as Trip[];\n        \n        console.log(`‚úÖ Received ${tripsData.length} trips from API:`, tripsData.map(t => ({ id: t._id, title: t.title })));\n        \n        setTrips(tripsData);\n        \n        // Calculate price range\n        if (tripsData.length > 0) {\n          const prices = tripsData.map(t => t.price);\n          const maxPrice = Math.max(...prices);\n          setPriceRange([0, Math.ceil(maxPrice / 1000) *"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "1000]);\n        }\n      } catch (error: any) {\n        console.error('‚ùå Error fetching trips:', error);\n        console.error('Error details:', error.response?.data || error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchTrips();\n  }, [searchTerm, selectedCategory]);\n\n  // Apply filters and sorting\n  useEffect(() => {\n    let filtered = [...trips];\n\n    // Price filter\n    filtered = filtered.filter(trip => \n      trip.price >= priceRange[0] && trip.price <= priceRange[1]\n    );\n\n    // Date filter\n    if (startDate) {\n      filtered = filtered.filter(trip => \n        new Date(trip.startDate) >= new Date(startDate)\n      );\n    }\n    if (endDate) {\n      filtered = filtered.filter(trip => \n        new Date(trip.endDate) <= new Date(endDate)\n      );\n    }\n\n    // Destination filter\n    if (destination) {\n      filtered = filtered.filter(trip =>\n        trip.destination.toLowerCase().includes(destination.toLowerCase())\n      );\n    }\n\n    // Sort\n    fi"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "ltered.sort((a, b) => {\n      switch (sortBy) {\n        case 'price':\n          return a.price - b.price;\n        case 'date':\n          return new Date(a.startDate).getTime() - new Date(b.startDate).getTime();\n        case 'popularity':\n          return b.participants.length - a.participants.length;\n        case 'newest':\n        default:\n          return new Date(b.startDate).getTime() - new Date(a.startDate).getTime();\n      }\n    });\n\n    setFilteredTrips(filtered);\n  }, [trips, priceRange, startDate, endDate, destination, sortBy]);\n\n  const handleJoinTrip = (trip: Trip) => {\n    if (!user) {\n      alert('Please login to join trips');\n      return;\n    }\n    setSelectedTrip(trip);\n    setShowJoinModal(true);\n  };\n\n  const handleLeaveTrip = async (tripId: string) => {\n    if (!user) return;\n    \n    if (window.confirm('Are you sure you want to leave this trip? This action cannot be undone.')) {\n      try {\n        await api.post(`/trips/${tripId}/leave`);\n        // Refresh trips li"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "st\n        const response = await api.get('/trips');\n        const tripsData = response.data as Trip[];\n        setTrips(tripsData);\n        alert('Successfully left the trip!');\n      } catch (error: any) {\n        alert(error.response?.data?.error || 'Failed to leave trip');\n      }\n    }\n  };\n\n  const handleJoinSuccess = async () => {\n    // Refresh trips list\n    const response = await api.get('/trips');\n    const tripsData = response.data as Trip[];\n    setTrips(tripsData);\n    alert('Successfully joined the trip!');\n  };\n\n  const handleShareTrip = async (tripId: string) => {\n    const shareUrl = getTripShareUrl(tripId);\n    \n    try {\n      await navigator.clipboard.writeText(shareUrl);\n      setCopySuccess(prev => ({ ...prev, [tripId]: true }));\n      setTimeout(() => {\n        setCopySuccess(prev => ({ ...prev, [tripId]: false }));\n      }, 2000);\n    } catch (err) {\n      // Fallback for browsers that don't support clipboard API\n      const textArea = document.createElement('t"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "extarea');\n      textArea.value = shareUrl;\n      document.body.appendChild(textArea);\n      textArea.select();\n      document.execCommand('copy');\n      document.body.removeChild(textArea);\n      setCopySuccess(prev => ({ ...prev, [tripId]: true }));\n      setTimeout(() => {\n        setCopySuccess(prev => ({ ...prev, [tripId]: false }));\n      }, 2000);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"mb-12 text-center\">\n          <h1 className=\"text-4xl md:text-5xl font-bold text-forest-800 mb-4\">\n            Discover Epic \n            <span className=\"text-nature-600\">Adventures</span>\n          </h1>\n          <p className=\"text-xl text-forest-600 max-w-2xl mx-auto\">\n            Find your next wilderness adventure and connect with fellow nature lovers\n          </p>\n          \n          {/* AI Smart Search */}\n          <div className=\"m"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "b-8\">\n            <AISmartSearch \n              onSearch={(query, filters) => {\n                console.log('AI Search:', { query, filters });\n                // Apply filters from AI search\n                if (filters.destination) setSearchTerm(filters.destination);\n                if (filters.category) setSelectedCategory(filters.category);\n                if (!filters.destination && !filters.category) setSearchTerm(query);\n              }}\n              placeholder=\"Ask me to find your perfect adventure... e.g., 'Show me trekking trips under ‚Çπ10,000'\"\n              className=\"mb-6\"\n            />\n          </div>\n          \n          {/* Traditional Search and Filter - Backup */}\n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-forest-200 mb-8\">\n            <div className=\"flex flex-col gap-4\">\n              <div className=\"flex flex-col md:flex-row gap-4\">\n                <div className=\"flex-1\">\n                  <div className=\"relati"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "ve\">\n                    <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-forest-500\">üîç</span>\n                    <input\n                      type=\"text\"\n                      placeholder=\"Search trips...\"\n                      value={searchTerm}\n                      onChange={(e) => setSearchTerm(e.target.value)}\n                      className=\"w-full pl-10 pr-4 py-3 border-2 border-forest-200 rounded-xl focus:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50\"\n                    />\n                  </div>\n                </div>\n                <div className=\"relative\">\n                  <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-forest-500\">üéØ</span>\n                  <select\n                    value={selectedCategory}\n                    onChange={(e) => setSelectedCategory(e.target.value)}\n                    className=\"pl-10 pr-8 py-3 border-2 border-forest-200 rounded-xl foc"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "us:ring-2 focus:ring-nature-500 focus:border-nature-500 transition-all duration-300 bg-forest-50/50 appearance-none min-w-[200px]\"\n                  >\n                    <option value=\"\">All Categories</option>\n                    {categories.map(category => (\n                      <option key={category} value={category}>{category}</option>\n                    ))}\n                  </select>\n                </div>\n                <button\n                  onClick={() => setShowFilters(!showFilters)}\n                  className=\"flex items-center gap-2 px-4 py-3 bg-nature-600 text-white rounded-xl hover:bg-nature-700 transition-colors font-medium\"\n                >\n                  <Filter className=\"w-5 h-5\" />\n                  <span>Filters</span>\n                </button>\n              </div>\n\n              {/* Advanced Filters Panel */}\n              {showFilters && (\n                <div className=\"border-t border-forest-200 pt-4 mt-4 space-y-4\">\n                  <div className"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                    {/* Price Range */}\n                    <div>\n                      <label className=\"block text-sm font-semibold text-forest-700 mb-2 flex items-center gap-2\">\n                        <DollarSign className=\"w-4 h-4\" />\n                        Price Range\n                      </label>\n                      <div className=\"space-y-2\">\n                        <input\n                          type=\"range\"\n                          min={0}\n                          max={priceRange[1]}\n                          step={1000}\n                          value={priceRange[1]}\n                          onChange={(e) => setPriceRange([priceRange[0], parseInt(e.target.value)])}\n                          className=\"w-full\"\n                        />\n                        <div className=\"flex justify-between text-xs text-gray-600\">\n                          <span>‚Çπ{priceRange[0].toLocaleString()}</span>"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "<span>‚Çπ{priceRange[1].toLocaleString()}</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Start Date */}\n                    <div>\n                      <label className=\"block text-sm font-semibold text-forest-700 mb-2 flex items-center gap-2\">\n                        <Calendar className=\"w-4 h-4\" />\n                        Start Date\n                      </label>\n                      <input\n                        type=\"date\"\n                        value={startDate}\n                        onChange={(e) => setStartDate(e.target.value)}\n                        className=\"w-full px-3 py-2 border-2 border-forest-200 rounded-lg focus:ring-2 focus:ring-nature-500 focus:border-nature-500\"\n                      />\n                    </div>\n\n                    {/* End Date */}\n                    <div>\n                      <label className=\"block text-sm font-semibold text-forest-700 mb-2 flex items-center gap-"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "2\">\n                        <Calendar className=\"w-4 h-4\" />\n                        End Date\n                      </label>\n                      <input\n                        type=\"date\"\n                        value={endDate}\n                        onChange={(e) => setEndDate(e.target.value)}\n                        className=\"w-full px-3 py-2 border-2 border-forest-200 rounded-lg focus:ring-2 focus:ring-nature-500 focus:border-nature-500\"\n                      />\n                    </div>\n\n                    {/* Destination */}\n                    <div>\n                      <label className=\"block text-sm font-semibold text-forest-700 mb-2 flex items-center gap-2\">\n                        <MapPin className=\"w-4 h-4\" />\n                        Destination\n                      </label>\n                      <input\n                        type=\"text\"\n                        placeholder=\"Location...\"\n                        value={destination}\n                        onChange={(e"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": ") => setDestination(e.target.value)}\n                        className=\"w-full px-3 py-2 border-2 border-forest-200 rounded-lg focus:ring-2 focus:ring-nature-500 focus:border-nature-500\"\n                      />\n                    </div>\n                  </div>\n\n                  {/* Sort By */}\n                  <div className=\"flex items-center gap-4\">\n                    <label className=\"text-sm font-semibold text-forest-700 flex items-center gap-2\">\n                      <ArrowUpDown className=\"w-4 h-4\" />\n                      Sort By:\n                    </label>\n                    <select\n                      value={sortBy}\n                      onChange={(e) => setSortBy(e.target.value as any)}\n                      className=\"px-4 py-2 border-2 border-forest-200 rounded-lg focus:ring-2 focus:ring-nature-500 focus:border-nature-500\"\n                    >\n                      <option value=\"newest\">Newest First</option>\n                      <option value=\"price\">Price: Lo"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "w to High</option>\n                      <option value=\"date\">Date: Soonest First</option>\n                      <option value=\"popularity\">Most Popular</option>\n                    </select>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n          </div>\n        ) : (\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredTrips.map((trip) => (\n              <div key={trip._id} className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow\">\n                <div className=\"relative h-48 overflow-hidden\">\n                  {/* Try to display organizer uploaded images first */}\n                  {(trip.coverImage || (trip.images && trip.images.length > 0)) ? (\n                    <img"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "src={trip.coverImage || trip.images[0]}\n                      alt={trip.title}\n                      className=\"w-full h-full object-cover transition-transform duration-300 hover:scale-105\"\n                      onError={(e) => {\n                        const target = e.target as HTMLImageElement;\n                        target.style.display = 'none';\n                        const fallback = target.nextElementSibling as HTMLElement;\n                        if (fallback) fallback.style.display = 'flex';\n                      }}\n                    />\n                  ) : null}\n                  <div className={`absolute inset-0 bg-gradient-to-br from-forest-400 to-nature-500 flex items-center justify-center ${(trip.coverImage || (trip.images && trip.images.length > 0)) ? 'hidden' : 'flex'}`}>\n                    <div className=\"text-center text-white\">\n                      <div className=\"text-6xl mb-2\">\n                        {(trip.categories && trip.categories.inclu"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "des('Mountain')) ? 'üèîÔ∏è' : \n                         (trip.categories && trip.categories.includes('Nature')) ? 'üå≤' : \n                         (trip.categories && trip.categories.includes('Beach')) ? 'üèñÔ∏è' : \n                         (trip.categories && trip.categories.includes('Cultural')) ? 'üèõÔ∏è' : \n                         (trip.categories && trip.categories.includes('Adventure')) ? 'üéí' : 'üåç'}\n                      </div>\n                      <p className=\"text-sm opacity-90 font-medium\">{trip.categories && trip.categories.length > 0 ? trip.categories[0] : 'Adventure'}</p>\n                    </div>\n                  </div>\n                  <div className=\"absolute top-4 right-4 flex gap-2\">\n                    <SaveTripButton tripId={trip._id} size=\"md\" className=\"z-10\" />\n                    <div className=\"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1 text-forest-800 text-sm font-semibold\">\n                      ‚Çπ{trip.price.toLocaleString()}\n                    </div>"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "</div>\n                </div>\n                <div className=\"p-6\">\n                  <h3 className=\"text-xl font-semibold mb-2\">{trip.title}</h3>\n                  <p className=\"text-gray-600 mb-4 line-clamp-3\">{trip.description}</p>\n                  \n                  <div className=\"space-y-2 mb-4\">\n                    <div className=\"flex items-center text-sm text-gray-500\">\n                      <span className=\"mr-2\">üìç</span>\n                      {trip.destination}\n                    </div>\n                    <div className=\"flex items-center text-sm text-gray-500\">\n                      <span className=\"mr-2\">üìÖ</span>\n                      {new Date(trip.startDate).toLocaleDateString()} - {new Date(trip.endDate).toLocaleDateString()}\n                    </div>\n                    <div className=\"flex items-center text-sm text-gray-500\">\n                      <span className=\"mr-2\">üë•</span>\n                      {trip.participants.length}/{trip.capacity} spots fi"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "lled\n                    </div>\n                  </div>\n\n                  <div className=\"flex flex-wrap gap-2 mb-4\">\n                    {trip.categories.map((category, index) => (\n                      <span key={index} className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">\n                        {category}\n                      </span>\n                    ))}\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"text-2xl font-bold text-nature-600\">‚Çπ{trip.price}</span>\n                      <SocialShareButtons\n                        tripId={trip._id}\n                        tripTitle={trip.title}\n                        tripDescription={trip.description}\n                        variant=\"icon-only\"\n                      />\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Link"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "to={`/trip/${trip._id}`}\n                        className=\"flex-1 bg-forest-100 hover:bg-forest-200 text-forest-700 px-3 py-2 rounded-lg font-medium text-sm transition-all duration-300 border border-forest-200 text-center\"\n                      >\n                        üëÅÔ∏è View Details\n                      </Link>\n                      {trip.participants.includes(user?.id || '') ? (\n                        <button\n                          onClick={() => handleLeaveTrip(trip._id)}\n                          className=\"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-4 py-2 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 text-sm\"\n                        >\n                          üö™ Leave Trip\n                        </button>\n                      ) : trip.participants.length >= trip.capacity ? (\n                        <button\n                          disabled\n                          className=\"bg-gra"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "y-400 cursor-not-allowed text-white px-4 py-2 rounded-xl font-medium text-sm\"\n                        >\n                          üéÜ Full\n                        </button>\n                      ) : (\n                        <button\n                          onClick={() => handleJoinTrip(trip)}\n                          className=\"bg-gradient-to-r from-forest-600 to-nature-600 hover:from-forest-700 hover:to-nature-700 text-white px-4 py-2 rounded-xl font-medium transition-all duration-300 transform hover:scale-105\"\n                        >\n                          üåü Join Adventure\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {filteredTrips.length === 0 && !loading && (\n          <div className=\"text-center py-16\">\n            <div className=\"max-w-md mx-auto\">\n              <div className=\"text-6xl mb-6\">üèîÔ∏è</div>"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "<h3 className=\"text-2xl font-bold text-forest-800 mb-4\">\n                {searchTerm || selectedCategory ? 'No matching adventures found' : 'No adventures yet'}\n              </h3>\n              <p className=\"text-forest-600 mb-6\">\n                {searchTerm || selectedCategory \n                  ? 'Try adjusting your search criteria or check back later' \n                  : 'Be the first to create an epic adventure for fellow explorers!'}\n              </p>\n              {user?.role === 'organizer' && !searchTerm && !selectedCategory && (\n                <div className=\"space-y-4\">\n                  <button\n                    onClick={() => window.location.href = '/create-trip'}\n                    className=\"bg-gradient-to-r from-forest-600 to-nature-600 hover:from-forest-700 hover:to-nature-700 text-white px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 inline-flex items-center gap-2\"\n                  >\n                    ‚ú® Create First Ad"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "venture\n                  </button>\n                  <p className=\"text-sm text-forest-500\">\n                    Share your passion for adventure and connect with like-minded travelers\n                  </p>\n                </div>\n              )}\n              {(!user || user.role === 'traveler') && !searchTerm && !selectedCategory && (\n                <div className=\"bg-forest-50/50 border border-forest-200 rounded-xl p-6 mt-6\">\n                  <h4 className=\"font-semibold text-forest-800 mb-2\">Want to organize adventures?</h4>\n                  <p className=\"text-sm text-forest-600 mb-4\">\n                    Upgrade to an organizer account to create and lead amazing trips!\n                  </p>\n                  <button \n                    onClick={() => {\n                      // Open AI chat widget or redirect to support\n                      const chatWidget = document.querySelector('[data-testid=\"ai-chat-widget\"]') as HTMLButtonElement;\n                      if (chatWidget)"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "{\n                        chatWidget.click();\n                      } else {\n                        // Fallback: scroll to bottom and show contact info\n                        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });\n                        alert('üí¨ Chat support will be available soon. For immediate help, please contact us at tanejasaksham44@gmail.com or call 9876177839');\n                      }\n                    }}\n                    className=\"bg-forest-600 hover:bg-forest-700 text-white px-4 py-2 rounded-lg text-sm transition-colors\"\n                  >\n                    üí¨ Contact Support\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* AI Recommendations Section */}\n        {!loading && filteredTrips.length > 0 && (\n          <div className=\"mt-16 bg-gradient-to-br from-purple-50 to-blue-50 rounded-2xl p-8\">\n            <div className=\"text-center mb-8\">"
  },
  {
    "source": "web\\src\\pages\\Trips.tsx",
    "text": "<h2 className=\"text-3xl font-bold text-gray-800 mb-4\">\n                ü§ñ AI Recommended Just for You\n              </h2>\n              <p className=\"text-gray-600 max-w-2xl mx-auto\">\n                Based on your preferences and browsing history, here are some personalized adventure recommendations\n              </p>\n            </div>\n            <AIRecommendations className=\"w-full\" maxRecommendations={6} showPersonalized={true} />\n          </div>\n        )}\n\n        {/* Join Trip Modal */}\n        {selectedTrip && (\n          <JoinTripModal\n            trip={selectedTrip}\n            user={user!}\n            isOpen={showJoinModal}\n            onClose={() => {\n              setShowJoinModal(false);\n              setSelectedTrip(null);\n            }}\n            onSuccess={handleJoinSuccess}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Trips;"
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Heart, Trash2, Tag, Calendar, MapPin, Users, DollarSign, Filter } from 'lucide-react';\nimport api from '../config/api';\nimport { useAuth } from '../contexts/AuthContext';\n\ninterface WishlistItem {\n  _id: string;\n  tripId: {\n    _id: string;\n    title: string;\n    description: string;\n    destination: string;\n    price: number;\n    startDate: string;\n    endDate: string;\n    capacity: number;\n    images: string[];\n    coverImage?: string;\n    categories: string[];\n  };\n  notes?: string;\n  priority: 'low' | 'medium' | 'high';\n  tags: string[];\n  createdAt: string;\n}\n\nconst Wishlist: React.FC = () => {\n  const { user } = useAuth();\n  const [wishlistItems, setWishlistItems] = useState<WishlistItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filterPriority, setFilterPriority] = useState<string>('all');\n  const [sortBy, setSortBy] = useState<string>('createdAt');\n  const"
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "[stats, setStats] = useState({\n    totalItems: 0,\n    priorityBreakdown: { low: 0, medium: 0, high: 0 },\n    popularTags: [] as Array<{ tag: string; count: number }>\n  });\n\n  useEffect(() => {\n    if (user) {\n      fetchWishlist();\n      fetchStats();\n    }\n  }, [user, filterPriority, sortBy]);\n\n  const fetchWishlist = async () => {\n    try {\n      setLoading(true);\n      const params = new URLSearchParams();\n      if (filterPriority !== 'all') {\n        params.append('priority', filterPriority);\n      }\n      params.append('sortBy', sortBy);\n      params.append('sortOrder', 'desc');\n      \n      const response = await api.get(`/wishlist?${params.toString()}`);\n      const data = (response.data as any);\n      setWishlistItems(data.wishlistItems || []);\n    } catch (error) {\n      console.error('Error fetching wishlist:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchStats = async () => {\n    try {\n      const response = await api.get('/wishlist/stats');"
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "setStats((response.data as any));\n    } catch (error) {\n      console.error('Error fetching wishlist stats:', error);\n    }\n  };\n\n  const handleRemove = async (wishlistId: string) => {\n    if (!window.confirm('Remove this trip from your wishlist?')) return;\n\n    try {\n      await api.delete(`/wishlist/${wishlistId}`);\n      setWishlistItems(items => items.filter(item => item._id !== wishlistId));\n      fetchStats();\n    } catch (error) {\n      console.error('Error removing from wishlist:', error);\n      alert('Failed to remove from wishlist');\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high': return 'bg-red-100 text-red-800 border-red-300';\n      case 'medium': return 'bg-yellow-100 text-yellow-800 border-yellow-300';\n      case 'low': return 'bg-blue-100 text-blue-800 border-blue-300';\n      default: return 'bg-gray-100 text-gray-800 border-gray-300';\n    }\n  };\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen b"
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "g-gradient-to-br from-forest-50 to-nature-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl mb-4\">üîí</div>\n          <h2 className=\"text-2xl font-bold text-forest-800 mb-2\">Login Required</h2>\n          <p className=\"text-forest-600 mb-6\">Please login to view your wishlist</p>\n          <Link\n            to=\"/login\"\n            className=\"inline-block bg-gradient-to-r from-forest-600 to-nature-600 text-white px-6 py-3 rounded-xl font-medium hover:from-forest-700 hover:to-nature-700 transition-all\"\n          >\n            Go to Login\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-forest-50 to-nature-50 py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-4xl font-bold text-forest-800 mb-2 flex items-center gap-3\">\n            <Heart className=\"w-10 h-1"
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "0 text-red-500 fill-current\" />\n            My Wishlist\n          </h1>\n          <p className=\"text-forest-600\">Trips you've saved for later</p>\n        </div>\n\n        {/* Stats */}\n        {stats.totalItems > 0 && (\n          <div className=\"bg-white rounded-xl shadow-lg p-6 mb-6\">\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <div className=\"text-center\">\n                <div className=\"text-3xl font-bold text-forest-800\">{stats.totalItems}</div>\n                <div className=\"text-sm text-forest-600\">Total Saved</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-3xl font-bold text-red-600\">{stats.priorityBreakdown.high}</div>\n                <div className=\"text-sm text-forest-600\">High Priority</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-3xl font-bold text-yellow-600\">{stats.priorityBreakdown.medium}</div>\n                <d"
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "iv className=\"text-sm text-forest-600\">Medium</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-3xl font-bold text-blue-600\">{stats.priorityBreakdown.low}</div>\n                <div className=\"text-sm text-forest-600\">Low</div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Filters */}\n        <div className=\"bg-white rounded-xl shadow-lg p-6 mb-6\">\n          <div className=\"flex flex-col md:flex-row gap-4 items-center\">\n            <div className=\"flex items-center gap-2\">\n              <Filter className=\"w-5 h-5 text-forest-600\" />\n              <span className=\"font-medium text-forest-700\">Filter:</span>\n            </div>\n            <select\n              value={filterPriority}\n              onChange={(e) => setFilterPriority(e.target.value)}\n              className=\"px-4 py-2 border-2 border-forest-200 rounded-lg focus:ring-2 focus:ring-nature-500 focus:border-nature-500\"\n            >"
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "<option value=\"all\">All Priorities</option>\n              <option value=\"high\">High Priority</option>\n              <option value=\"medium\">Medium Priority</option>\n              <option value=\"low\">Low Priority</option>\n            </select>\n            <div className=\"flex items-center gap-2 ml-auto\">\n              <span className=\"font-medium text-forest-700\">Sort:</span>\n              <select\n                value={sortBy}\n                onChange={(e) => setSortBy(e.target.value)}\n                className=\"px-4 py-2 border-2 border-forest-200 rounded-lg focus:ring-2 focus:ring-nature-500 focus:border-nature-500\"\n              >\n                <option value=\"createdAt\">Recently Added</option>\n                <option value=\"priority\">Priority</option>\n                <option value=\"trip.startDate\">Trip Date</option>\n                <option value=\"trip.price\">Price</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Wishlist Ite"
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "ms */}\n        {loading ? (\n          <div className=\"flex justify-center py-12\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-nature-600\"></div>\n          </div>\n        ) : wishlistItems.length === 0 ? (\n          <div className=\"bg-white rounded-xl shadow-lg p-12 text-center\">\n            <Heart className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-2xl font-bold text-forest-800 mb-2\">Your Wishlist is Empty</h3>\n            <p className=\"text-forest-600 mb-6\">Start saving trips you love to your wishlist</p>\n            <Link\n              to=\"/trips\"\n              className=\"inline-block bg-gradient-to-r from-forest-600 to-nature-600 text-white px-6 py-3 rounded-xl font-medium hover:from-forest-700 hover:to-nature-700 transition-all\"\n            >\n              Explore Trips\n            </Link>\n          </div>\n        ) : (\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {wishlistItem"
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "s.map((item) => (\n              <div key={item._id} className=\"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow\">\n                <div className=\"relative h-48\">\n                  {item.tripId.coverImage || (item.tripId.images && item.tripId.images.length > 0) ? (\n                    <img\n                      src={item.tripId.coverImage || item.tripId.images[0]}\n                      alt={item.tripId.title}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-full bg-gradient-to-br from-forest-400 to-nature-500 flex items-center justify-center\">\n                      <span className=\"text-6xl\">üèîÔ∏è</span>\n                    </div>\n                  )}\n                  <div className=\"absolute top-4 right-4 flex gap-2\">\n                    <span className={`px-3 py-1 rounded-full text-xs font-semibold border ${getPriorityColor(item.priority)}`}>"
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "{item.priority}\n                    </span>\n                  </div>\n                  <div className=\"absolute top-4 left-4\">\n                    <div className=\"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1 text-forest-800 text-sm font-semibold\">\n                      ‚Çπ{item.tripId.price.toLocaleString()}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"p-6\">\n                  <h3 className=\"text-xl font-bold text-forest-800 mb-2\">{item.tripId.title}</h3>\n                  <p className=\"text-gray-600 text-sm mb-4 line-clamp-2\">{item.tripId.description}</p>\n                  \n                  <div className=\"space-y-2 mb-4\">\n                    <div className=\"flex items-center text-sm text-gray-600\">\n                      <MapPin className=\"w-4 h-4 mr-2\" />\n                      {item.tripId.destination}\n                    </div>\n                    <div className=\"flex items-center text-sm text-gray-600\">"
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "<Calendar className=\"w-4 h-4 mr-2\" />\n                      {new Date(item.tripId.startDate).toLocaleDateString()} - {new Date(item.tripId.endDate).toLocaleDateString()}\n                    </div>\n                    <div className=\"flex items-center text-sm text-gray-600\">\n                      <Users className=\"w-4 h-4 mr-2\" />\n                      Up to {item.tripId.capacity} travelers\n                    </div>\n                  </div>\n\n                  {item.tags.length > 0 && (\n                    <div className=\"flex flex-wrap gap-2 mb-4\">\n                      {item.tags.map((tag, idx) => (\n                        <span key={idx} className=\"px-2 py-1 bg-forest-100 text-forest-700 text-xs rounded-full flex items-center gap-1\">\n                          <Tag className=\"w-3 h-3\" />\n                          {tag}\n                        </span>\n                      ))}\n                    </div>\n                  )}\n\n                  {item.notes && ("
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "<div className=\"bg-forest-50 rounded-lg p-3 mb-4\">\n                      <p className=\"text-sm text-forest-700 italic\">\"{item.notes}\"</p>\n                    </div>\n                  )}\n\n                  <div className=\"flex gap-2\">\n                    <Link\n                      to={`/trip/${item.tripId._id}`}\n                      className=\"flex-1 bg-gradient-to-r from-forest-600 to-nature-600 text-white px-4 py-2 rounded-lg font-medium text-center hover:from-forest-700 hover:to-nature-700 transition-all\"\n                    >\n                      View Details\n                    </Link>\n                    <button\n                      onClick={() => handleRemove(item._id)}\n                      className=\"bg-red-100 text-red-600 hover:bg-red-200 px-4 py-2 rounded-lg transition-colors\"\n                      title=\"Remove from wishlist\"\n                    >\n                      <Trash2 className=\"w-5 h-5\" />\n                    </button>\n                  </div>"
  },
  {
    "source": "web\\src\\pages\\Wishlist.tsx",
    "text": "</div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Wishlist;"
  }
]